//////////////////////////////////////////////////////////////////////
// Pano2VR 5.2 beta4/15957 HTML5/CSS3 & WebGL Panorama Player       //
// Trial License: For evaluation only!                              //
// (c) 2017, Garden Gnome Software, http://ggnome.com               //
//////////////////////////////////////////////////////////////////////

function G(){var m="perspective",g=["Webkit","Moz","O","ms","Ms"],h;for(h=0;h<g.length;h++)"undefined"!==typeof document.documentElement.style[g[h]+"Perspective"]&&(m=g[h]+"Perspective");"undefined"!==typeof document.documentElement.style[m]?"webkitPerspective"in document.documentElement.style?(m=document.createElement("style"),g=document.createElement("div"),h=document.head||document.getElementsByTagName("head")[0],m.textContent="@media (-webkit-transform-3d) {#ggswhtml5{height:5px}}",h.appendChild(m),
g.id="ggswhtml5",document.documentElement.appendChild(g),h=5===g.offsetHeight,m.parentNode.removeChild(m),g.parentNode.removeChild(g)):h=!0:h=!1;return h}function N(){var m;if(m=!!window.WebGLRenderingContext)try{var g=document.createElement("canvas");g.width=100;g.height=100;var h=g.getContext("webgl");h||(h=g.getContext("experimental-webgl"));m=!!h}catch(b){m=!1}return m}
var __extends=this&&this.__extends||function(m,g){function h(){this.constructor=m}for(var b in g)g.hasOwnProperty(b)&&(m[b]=g[b]);m.prototype=null===g?Object.create(g):(h.prototype=g.prototype,new h)},ggP2VR;
(function(m){var g=function(){function b(a){this.h=null;this.xf=this.Uj=this.xb=!1;this.lb=this.Ea=this.wa=0;this.f=70;this.Sa=0;this.autoplay=this.Bf=!1;this.id="";this.j=this.pan=0;this.h=a;this.Rc=this.Ac=100;this.hd=1}b.prototype.Db=function(a){var d;if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("pan"))this.pan=Number(d.nodeValue);if(d=a.getAttributeNode("tilt"))this.j=Number(d.nodeValue)};b.prototype.pl=function(a){var d="",c=this.h,b=!0;if(c.Rg){var f=
new m.sa(0,0,-100);f.wa(-this.j*Math.PI/180);f.Ea(this.pan*Math.PI/180);f.Ea(-c.pan.c*Math.PI/180);f.wa(c.j.c*Math.PI/180);f.lb(c.M.c*Math.PI/180);.01<=f.z&&(b=!1)}c.tc&&(d+="perspective("+a+"px) ");d=d+("translate3d(0px,0px,"+a+"px) ")+("rotateZ("+c.M.c.toFixed(10)+"deg) ");d+="rotateX("+c.j.c.toFixed(10)+"deg) ";d+="rotateY("+(-c.pan.c).toFixed(10)+"deg) ";d+="rotateY("+this.pan.toFixed(10)+"deg) ";d+="rotateX("+(-this.j).toFixed(10)+"deg) ";a=1E4;var f=this.b.videoWidth,l=this.b.videoHeight;if(0==
f||0==l)f=640,l=480;0<this.Ac&&(f=this.Ac);0<this.Rc&&(l=this.Rc);0<f&&0<l&&(this.b.width=f,this.b.height=l,this.b.style.width=f+"px",this.b.style.height=l+"px");0<this.f&&(a=f/(2*Math.tan(this.f/2*Math.PI/180)));d+="translate3d(0px,0px,"+(-a).toFixed(10)+"px) ";d+="rotateZ("+this.lb.toFixed(10)+"deg) ";d+="rotateY("+(-this.Ea).toFixed(10)+"deg) ";d+="rotateX("+this.wa.toFixed(10)+"deg) ";this.hd&&1!=this.hd&&(d+="scaleY("+this.hd+") ");d+="translate3d("+-f/2+"px,"+-l/2+"px,0px) ";this.b.style[c.Va+
"Origin"]="0% 0%";this.xb&&(d="",1==this.Sa&&(d+="scale("+Math.min(c.m.width/f,c.m.height/l)+") "),d+="translate3d("+-f/2+"px,"+-l/2+"px,0px) ");this.Sm!=d&&(this.Sm=d,this.b.style[c.Va]=d,this.b.style.visibility=b?"visible":"hidden",this.xf&&this.Uj==this.xb&&(this.b.style[c.Pc]="all 0s linear 0s"),this.Uj=this.xb)};b.prototype.Wk=function(){this.b&&(this.b.style.visibility="hidden")};b.prototype.se=function(){var a=this.h;this.b.style.left=a.margin.left+a.m.width/2+"px";this.b.style.top=a.margin.top+
a.m.height/2+"px"};return b}();m.Ro=g;var h=function(b){function a(a){b.call(this,a);this.Hi=this.Hg=this.Ze=this.ia=!1;this.hf=this.wb=null;this.ie=this.gg=0;this.ph=this.Gi=this.ke=!1;this.url=[];this.loop=0;this.level=1;this.xc=0;this.mode=1;this.Aj=10;this.th=this.Ab=0;this.ka=1;this.Gc=this.wc=this.vc=this.Fc=0}__extends(a,b);a.prototype.Zk=function(){this.ia&&this.ph?this.ph=!1:(!this.ia&&this.h.Rg&&(this.td(),this.addElement()),0==this.loop?this.ia?(this.wb=null,this.Jc()):this.b.play():0<
this.Mc?(this.Mc--,this.ia||(this.b.currentTime=0),this.Hg&&(this.Qc&&0==this.Qc.gain.value||0==this.nc.gain.value&&0==this.qc.gain.value&&0==this.oc.gain.value&&0==this.pc.gain.value)||(this.ia?(this.wb=null,this.Jc()):this.b.play())):this.ia&&(this.wb=null,this.ke=!1))};a.prototype.Eh=function(){var a=this.h.Ha;a&&(this.ia||(this.source=a.createMediaElementSource(this.b)),2==this.mode||3==this.mode||5==this.mode?(this.ze=a.createChannelSplitter(2),this.nc=a.createGain(),this.oc=a.createGain(),this.pc=
a.createGain(),this.qc=a.createGain(),this.lf=a.createChannelMerger(2),this.ia||this.source.connect(this.ze),this.ze.connect(this.nc,0),this.ze.connect(this.oc,0),this.ze.connect(this.pc,1),this.ze.connect(this.qc,1),this.nc.connect(this.lf,0,0),this.oc.connect(this.lf,0,1),this.pc.connect(this.lf,0,0),this.qc.connect(this.lf,0,1),this.lf.connect(a.destination)):(this.Qc=a.createGain(),this.ia||this.source.connect(this.Qc),this.Qc.connect(a.destination)))};a.prototype.ag=function(){var a=this.h.Ha;
this.xb||this.Hi||(this.nc.gain.setValueAtTime(this.Fc,a.currentTime),this.qc.gain.setValueAtTime(this.Gc,a.currentTime),this.oc.gain.setValueAtTime(this.vc,a.currentTime),this.pc.gain.setValueAtTime(this.wc,a.currentTime))};a.prototype.yh=function(){var a=this.h,c=this.h.Ha;if(this.b||this.ia){var b,f=this.pan-a.pan.c;for(b=this.j-a.j.c;-180>f;)f+=360;for(;180<f;)f-=360;var l=this.xc,k=this.Aj;0==k&&(k=.01);0>k&&(k=a.f.c);this.Gb||(this.Gb=new m.sa,this.Gb.Cj(this.pan,this.j));0!=this.mode&&1!=this.mode||
!c||this.Qc&&this.Qc.gain.setValueAtTime(this.level*a.V*this.ka,c.currentTime);if(2==this.mode&&c){var w=.5*Math.cos(f*Math.PI/180)+.5;this.Fc=Math.sqrt(w)*this.ka*this.level*a.V;this.Gc=Math.sqrt(w)*this.ka*this.level*a.V;this.vc=Math.sqrt(1-w)*this.ka*this.level*a.V;this.wc=Math.sqrt(1-w)*this.ka*this.level*a.V;this.ag()}if(3==this.mode){0>f?f<-this.Ab?f+=this.Ab:f=0:f=f>this.Ab?f-this.Ab:0;w=this.level;b=Math.abs(b);b=b<this.th?0:b-this.th;var B=1-b/k;if(Math.abs(f)>k||0>B){var h=w*l*a.V;c?(this.Fc=
h*this.ka,this.Gc=h*this.ka,this.wc=this.vc=0,this.ag()):this.b.volume=w*l*a.V}else if(h=1-Math.abs(f/k),c){var g=w*(l+(1-l)*B*h)*a.V,h=w*l*a.V;0<=f?(this.Fc=g*this.ka,this.Gc=h*this.ka):(this.Fc=h*this.ka,this.Gc=g*this.ka);2*Math.abs(f)<k?(h=1-Math.abs(2*f)/k,g=w*(l+(1-l)*B*h)*a.V,h=.5*w*(1-l)*B*(1-h)*a.V,0<=f?(this.Gc=g*this.ka,this.wc=h*this.ka,this.vc=0):(this.Fc=g*this.ka,this.vc=h*this.ka,this.wc=0)):(h=1-(Math.abs(2*f)-k)/k,g=.5*w*(1-l)*B*h*a.V,0<=f?(this.wc=g*this.ka,this.vc=0):(this.vc=
g*this.ka,this.wc=0));this.ag()}else this.b.volume=w*(l+(1-l)*B*h)*a.V}4==this.mode&&(Math.abs(f)<this.Ab&&Math.abs(b)<this.th?this.Ze||(this.Ze=!0,this.Mc=this.loop-1,this.ia?this.ke||this.Jc():this.b.play()):this.Ze=!1);5==this.mode&&(b=180*Math.acos(a.Th.fh(this.Gb))/Math.PI,b<this.Ab?c?(this.Fc=this.level*a.V*this.ka,this.Gc=this.level*a.V*this.ka,this.wc=this.vc=0,this.ag()):this.b.volume=this.level*a.V:c?b<this.Ab+k?(0>f?f=f>-this.Ab?0:f+this.Ab:f=f<this.Ab?0:f-this.Ab,g=1-Math.max(b-this.Ab,
0)/k,h=Math.max(1-Math.abs(f)*Math.cos(this.j*Math.PI/180)/k,0),0<f?(this.Fc=this.level*(g*(1-this.xc)+this.xc)*a.V*this.ka,this.Gc=this.level*(g*h*(1-this.xc)+this.xc)*a.V*this.ka,this.vc=0,this.wc=this.level*g*(1-h)*a.V*this.ka):(this.Fc=this.level*(g*h*(1-this.xc)+this.xc)*a.V*this.ka,this.Gc=this.level*(g*(1-this.xc)+this.xc)*a.V*this.ka,this.vc=this.level*g*(1-h)*a.V*this.ka,this.wc=0),this.ag()):(g=this.level*this.xc*a.V,this.Fc=g*this.ka,this.Gc=g*this.ka,this.wc=this.vc=0):(b-=this.Ab,this.b.volume=
b<k&&0<k?this.level*(l+(1-l)*(1-Math.abs(b/k)))*a.V:l*a.V));6==this.mode&&(b=180*Math.acos(a.Th.fh(this.Gb))/Math.PI,Math.abs(b)<this.Ab?this.Ze||(this.Ze=!0,this.Mc=this.loop-1,this.ia?this.ke||this.Jc():this.b.play()):this.Ze=!1)}};a.prototype.rj=function(){var a=this;a.wb=this.h.Ha.createBufferSource();a.wb.addEventListener("ended",function(){a.Zk()},!1);2==a.mode||3==a.mode||5==a.mode?a.wb.connect(a.ze):a.wb.connect(a.Qc)};a.prototype.zn=function(a){var c=this,b=this.h.Ha;c.rj();this.h.O("createBufferSoundSource()");
b.decodeAudioData(a,function(a){c.hf=a;c.wb.buffer=a;c.h.O("audio Data decoded");c.Gi&&(c.Jc(),c.Gi=!1)})};a.prototype.Jc=function(){var a=this.h.Ha,c=this.ie;this.hf?(null==this.wb&&(this.rj(),this.wb.buffer=this.hf),this.gg=a.currentTime-c,this.ie=0,this.ke=!0,this.ph=!1,this.wb.start(0,c),this.h.O("buffer Source started")):(this.h.O("bufferSoundPlay() -> no audio buffer -> playWhenReady"),this.Gi=!0)};a.prototype.Lh=function(){var a=this.h.Ha.currentTime-this.gg;this.ye();this.ie=a};a.prototype.ye=
function(){this.wb&&this.ke&&(this.ph=!0,this.wb.disconnect(),this.wb.stop(0),this.wb=null);this.gg=this.ie=0;this.ke=!1};a.prototype.Sl=function(){var a=this.h.Ha;return this.ie?this.ie:this.gg?a.currentTime-this.gg:0};a.prototype.Tl=function(a){this.ye();this.ie=a;this.Jc()};a.prototype.addElement=function(){var a=-1,c=this,b=this.h,f=this.h.Ha;try{for(var l=!1,k=0;k<b.S.length;k++)b.S[k].id==c.id&&(a=k,null==b.S[k].b&&!b.S[k].ia||b.S[k].url.join()!=c.url.join()||b.S[k].loop!=c.loop||b.S[k].mode!=
c.mode||(l=!0));if(l)b.O("Keep playing "+c.id);else{if(0<=a){var w=b.S[a];if(null!=w.b||w.ia)if(f&&b.Fa.enabled)b.Fa.jg.push(w),1!=b.C.Na&&2!=b.C.Na&&b.Fa.Zh(w);else{try{w.ia?w.Lh():w.b.pause()}catch(h){b.O(h)}try{w.td()}catch(h){b.O(h)}}}if(f&&b.Hd&&(2==this.mode||3==this.mode||5==this.mode)){if(0<c.url.length){c.ia=!0;c.Eh();var g=new XMLHttpRequest;g.open("GET",b.Xb(c.url[0]),!0);g.responseType="arraybuffer";g.onload=function(){c.zn(g.response)};g.send();c.Hg=!1}}else{c.b=document.createElement("audio");
c.b.crossOrigin=b.crossOrigin;c.b.setAttribute("class","ggmedia");b.Je&&c.b.setAttribute("id",b.Je+c.id);for(k=0;k<c.url.length;k++)l=void 0,l=document.createElement("source"),""!=c.url[k]&&"#"!=c.url[k]&&(l.crossOrigin=b.crossOrigin,l.setAttribute("src",b.Xb(c.url[k])),c.b.appendChild(l));c.b.volume=c.level*b.V;0<c.b.childNodes.length&&(b.U.appendChild(c.b),c.b.addEventListener("ended",function(){c.Zk()},!1),f&&(c.Eh(),c.Hg=!1,0==c.loop&&c.source.mediaElement&&(c.source.mediaElement.loop=!0)))}1<=
c.loop&&(c.Mc=c.loop-1);0<=a?b.S[a]=c:b.S.push(c);1!=c.mode&&2!=c.mode&&3!=c.mode&&5!=c.mode||!(0<=c.loop)||f&&b.Fa.enabled||(c.ia||(c.b.autoplay=!0),c.autoplay=!0);0==c.mode&&0<=c.loop&&(c.autoplay=!0);c.yh()}}catch(h){this.h.O(h)}};a.prototype.td=function(){try{this.h.O("Remove Snd:"+this.id),this.ia||(this.h.U.removeChild(this.b),this.b=null)}catch(a){this.h.O(a)}};a.prototype.Db=function(a){b.prototype.Db.call(this,a);var c;(c=a.getAttributeNode("url"))&&this.url.push(c.nodeValue.toString());
if(c=a.getAttributeNode("level"))this.level=Number(c.nodeValue);if(c=a.getAttributeNode("loop"))this.loop=Number(c.nodeValue);if(c=a.getAttributeNode("mode"))this.mode=Number(c.nodeValue);if(c=a.getAttributeNode("field"))this.Aj=Number(c.nodeValue);if(c=a.getAttributeNode("ambientlevel"))this.xc=Number(c.nodeValue);if(c=a.getAttributeNode("pansize"))this.Ab=Number(c.nodeValue);if(c=a.getAttributeNode("tiltsize"))this.th=Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&
this.url.push(c.nodeValue.toString()),a=a.nextSibling};return a}(g);m.Il=h;h=function(b){function a(a){b.call(this,a);this.poster="";this.lb=this.Ea=this.wa=0;this.f=50;this.Sa=0;this.Xc=this.Bf=!1}__extends(a,b);a.prototype.Sc=function(){1!=this.Sa&&4!=this.Sa||this.yf(!this.xb);2==this.Sa&&this.h.Ek(this.id)};a.prototype.yf=function(a){var c=this.h,b=c.Ha;if(1==this.Sa||4==this.Sa)if(this.xb=a,this.h.vb)(c=c.ha)&&c.activateSound(this.id,this.xb?1:0);else{if(this.xb)this.b.play(),this.b.style.zIndex=
(c.qg+8E4).toString(),this.b.style[this.h.Pc]="all 1s ease 0s",c.je(this.id);else{this.b.style.zIndex=c.qg.toString();this.b.style[this.h.Pc]="all 1s ease 0s";this.Hi=!0;var f=this;setTimeout(function(){f.Hi=!1},1E3)}if(b&&(2==this.mode||3==this.mode||5==this.mode)){var b=b.currentTime,l=this.nc.gain.value,k=this.qc.gain.value,w=this.oc.gain.value,h=this.pc.gain.value;this.xb?(this.nc.gain.linearRampToValueAtTime(l,b),this.nc.gain.linearRampToValueAtTime(this.level*c.V,b+1),this.qc.gain.linearRampToValueAtTime(k,
b),this.qc.gain.linearRampToValueAtTime(this.level*c.V,b+1),this.oc.gain.linearRampToValueAtTime(w,b),this.oc.gain.linearRampToValueAtTime(0,b+1),this.pc.gain.linearRampToValueAtTime(h,b),this.pc.gain.linearRampToValueAtTime(0,b+1)):(this.nc.gain.linearRampToValueAtTime(l,b),this.nc.gain.linearRampToValueAtTime(this.Fc,b+1),this.qc.gain.linearRampToValueAtTime(k,b),this.qc.gain.linearRampToValueAtTime(this.Gc,b+1),this.oc.gain.linearRampToValueAtTime(w,b),this.oc.gain.linearRampToValueAtTime(this.vc,
b+1),this.pc.gain.linearRampToValueAtTime(h,b),this.pc.gain.linearRampToValueAtTime(this.wc,b+1))}this.xf=!0;this.h.ql()}2==this.Sa&&(a?this.h.je(this.id):this.h.Fi(this.id))};a.prototype.zf=function(){this.xf=!1;this.b.style[this.h.Pc]="none"};a.prototype.Jo=function(){0==this.loop?this.b.play():0<this.Mc?(this.Mc--,this.b.currentTime=0,this.b.play()):this.hk=!1};a.prototype.Db=function(a){b.prototype.Db.call(this,a);var c;if(c=a.getAttributeNode("poster"))this.poster=String(c.nodeValue);if(c=a.getAttributeNode("rotx"))this.wa=
Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Ea=Number(c.nodeValue);if(c=a.getAttributeNode("rotz"))this.lb=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Ac=Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.Rc=Number(c.nodeValue);this.hd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.Sa=Number(c.nodeValue);if(c=a.getAttributeNode("handcursor"))this.Bf=1==Number(c.nodeValue)};
a.prototype.addElement=function(){var a=this,c=this.h;try{a.b=document.createElement("video");a.b.setAttribute("class","ggmedia");a.b.crossOrigin=c.crossOrigin;a.b.hidden=!0;c.Je&&a.b.setAttribute("id",c.Je+a.id);if(c.ng)a.b.setAttribute("webkit-playsinline","webkit-playsinline"),a.b.setAttribute("style","display: none; max-width:none;");else if(a.b.setAttribute("style","max-width:none;pointer-events:none;"),a.b.setAttribute("webkit-playsinline","webkit-playsinline"),1==a.Sa||4==a.Sa)a.b.addEventListener(c.wl(),
function(){a.zf()},!1),a.b.addEventListener("transitionend",function(){a.zf()},!1);var b;for(b=0;b<a.url.length;b++){var f;f=document.createElement("source");f.crossOrigin=c.crossOrigin;f.setAttribute("src",c.Xb(a.url[b]));a.b.appendChild(f)}""!=a.poster&&(a.b.poster=c.Xb(a.poster),0>a.loop&&(a.b.a="none"));a.b.volume=a.level*c.V;1<=a.loop&&(a.Mc=a.loop-1);(1==a.mode||2==a.mode||3==a.mode||5==a.mode)&&0<=a.loop&&(a.b.autoplay=!0,a.hk=!0,a.autoplay=!0);c.J.push(this);c.ng?c.U.appendChild(a.b):(a.b.style.position=
"absolute",a.Ac&&(a.b.width=a.Ac),a.Rc&&(a.b.height=a.Rc),c.B.appendChild(a.b),a.Eh());a.b.onclick=function(){a.Sc()};a.b.addEventListener("ended",function(){a.Jo()},!1)}catch(l){c.O(l)}};a.prototype.registerElement=function(a,c){this.Xc=!0;this.b=c;this.id=a;this.level=1;this.h.J.push(this)};a.prototype.td=function(){var a=this.h;a.ng&&(a.H.deleteTexture(this.ic),this.ic=0,a.U.removeChild(this.b));a.rl&&a.B.removeChild(this.b);this.b=null};return a}(h);m.Rk=h;h=function(b){function a(a){b.call(this,
a);this.url="";this.lb=this.Ea=this.wa=0;this.f=50;this.Sa=0;this.Bf=!1;this.Rc=this.Ac=100;this.hd=1}__extends(a,b);a.prototype.Db=function(a){b.prototype.Db.call(this,a);var c;if(c=a.getAttributeNode("url"))this.url=c.nodeValue.toString();if(c=a.getAttributeNode("rotx"))this.wa=Number(c.nodeValue);if(c=a.getAttributeNode("roty"))this.Ea=Number(c.nodeValue);if(c=a.getAttributeNode("rotz"))this.lb=Number(c.nodeValue);if(c=a.getAttributeNode("fov"))this.f=Number(c.nodeValue);if(c=a.getAttributeNode("width"))this.Ac=
Number(c.nodeValue);if(c=a.getAttributeNode("height"))this.Rc=Number(c.nodeValue);this.hd=(c=a.getAttributeNode("stretch"))?Number(c.nodeValue):1;if(c=a.getAttributeNode("clickmode"))this.Sa=Number(c.nodeValue);if(c=a.getAttributeNode("handcursor"))this.Bf=1==Number(c.nodeValue);for(a=a.firstChild;a;)"source"==a.nodeName&&(c=a.getAttributeNode("url"))&&(this.url=c.nodeValue.toString()),a=a.nextSibling};a.prototype.zf=function(){this.xf=!1;this.b.style[this.h.Pc]="none"};a.prototype.Sc=function(){1!==
this.Sa&&4!==this.Sa||this.yf(!this.xb)};a.prototype.yf=function(a){var c=this.h;if(1===this.Sa||4===this.Sa)this.xb=a,this.h.vb?(a=this.h.ha)&&a.activateSound(this.id,this.xb?1:0):(this.b.style.zIndex=this.xb?(c.qg+8E4).toString():c.qg.toString(),this.b.style[c.Pc]="all 1s ease 0s",this.xf=!0,c.ll())};a.prototype.addElement=function(){var a=this,c=this.h;try{a.b=document.createElement("img");a.b.setAttribute("style","-webkit-user-drag:none; max-width:none; pointer-events:none;");a.b.setAttribute("class",
"ggmedia");a.b.hidden=!0;c.Je&&a.b.setAttribute("id",c.Je+a.id);a.b.ondragstart=function(){return!1};if(1===a.Sa||4===a.Sa)a.b.addEventListener(c.wl(),function(){a.zf()},!1),a.b.addEventListener("transitionend",function(){a.zf()},!1);a.b.setAttribute("src",c.Xb(a.url));a.Ac&&(a.b.width=a.Ac);a.Rc&&(a.b.height=a.Rc);c.Xa.push(a);a.b.style.position="absolute";a.Sc&&(a.b.onclick=function(){a.Sc()});c.B.appendChild(a.b)}catch(b){c.O("Error addimage:"+b)}};a.prototype.td=function(){this.h.B.removeChild(this.b);
this.b=null};return a}(g);m.Gl=h;g=function(b){function a(a){b.call(this,a);this.alpha=this.oj=50;this.type=0;this.color=16777215}__extends(a,b);a.prototype.Db=function(a){b.prototype.Db.call(this,a);var c;if(c=a.getAttributeNode("blinding"))this.oj=Number(c.nodeValue);if(c=a.getAttributeNode("alpha"))this.alpha=Number(c.nodeValue);if(c=a.getAttributeNode("type"))this.type=Number(c.nodeValue);if(c=a.getAttributeNode("color"))this.color=1*Number(c.nodeValue)};return a}(g);m.Hl=g;g=function(){function b(a){this.type=
"empty";this.Yk=this.id=this.target=this.description=this.title=this.url="";this.Bh=100;this.Og=20;this.Ch=!1;this.b=null;this.eb=this.oa=this.j=this.pan=0;this.Tb=a.w.Tb;this.Qb=a.w.Qb;this.Sb=a.w.Sb;this.Pb=a.w.Pb;this.Ie=a.w.Ie;this.og=[]}b.prototype.Fe=function(){this.id=this.id;this.pan=this.pan;this.tilt=this.j;this.url=this.url;this.target=this.target;this.title=this.title;this.description=this.description;this.skinid=this.Yk;this.obj=this.b};b.prototype.Db=function(a){var d;if(d=a.getAttributeNode("url"))this.url=
d.nodeValue.toString();if(d=a.getAttributeNode("target"))this.target=d.nodeValue.toString();if(d=a.getAttributeNode("title"))this.title=d.nodeValue.toString();if(d=a.getAttributeNode("description"))this.description=d.nodeValue.toString();if(d=a.getAttributeNode("id"))this.id=d.nodeValue.toString();if(d=a.getAttributeNode("skinid"))this.Yk=d.nodeValue.toString();if(d=a.getAttributeNode("width"))this.Bh=Number(d.nodeValue);if(d=a.getAttributeNode("height"))this.Og=Number(d.nodeValue);if(d=a.getAttributeNode("wordwrap"))this.Ch=
1==Number(d.nodeValue);d=a.getAttributeNode("pan");this.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");this.j=1*(d?Number(d.nodeValue):0);if(d=a.getAttributeNode("bordercolor"))this.Tb=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundcolor"))this.Qb=1*Number(d.nodeValue);if(d=a.getAttributeNode("borderalpha"))this.Sb=1*Number(d.nodeValue);if(d=a.getAttributeNode("backgroundalpha"))this.Pb=1*Number(d.nodeValue);if(d=a.getAttributeNode("handcursor"))this.Ie=1==Number(d.nodeValue);
for(a=a.firstChild;a;){if("vertex"==a.nodeName){var c={pan:0,j:0};d=a.getAttributeNode("pan");c.pan=1*(d?Number(d.nodeValue):0);d=a.getAttributeNode("tilt");c.j=1*(d?Number(d.nodeValue):0);this.og.push(c)}a=a.nextSibling}this.Fe()};return b}();m.Vg=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function h(b,a){this.x=b;this.y=a}h.prototype.Ya=function(b,a){this.x=b;this.y=a};h.prototype.kd=function(b,a,d){var c=a.y-b.y;this.x=b.x+(a.x-b.x)*d;this.y=b.y+c*d};h.prototype.Rl=function(b,a,d,c,e){var f;f=new h;f.kd(b,d,e);b=new h;b.kd(d,c,e);d=new h;d.kd(c,a,e);a=new h;a.kd(f,b,e);f=new h;f.kd(b,d,e);b=new h;b.kd(a,f,e);this.x=b.x;this.y=b.y};h.prototype.Ih=function(b,a,d,c,e){var f=new h,l=.5,k=.25;do{f.Rl(b,a,d,c,l);var w=f.x-e,l=0<w?l-k:l+k,k=k/2}while(.01<Math.abs(w));
this.x=f.x;this.y=f.y};return h}();m.lc=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function h(b,a,d,c,e){this.x=b;this.y=a;this.z=d;this.$c=c;this.Gb=e}h.prototype.Ya=function(b,a,d,c,e){this.x=b;this.y=a;this.z=d;this.$c=c;this.Gb=e};h.prototype.toString=function(){return"("+this.x+","+this.y+","+this.z+") - ("+this.$c+","+this.Gb+")"};h.prototype.wa=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.y,c=this.z;this.y=b*d-a*c;this.z=a*d+b*c};h.prototype.Fn=function(){var b=this.y;this.y=-this.z;this.z=b};h.prototype.En=function(){var b=this.y;
this.y=this.z;this.z=-b};h.prototype.Ea=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.z;this.x=b*d+a*c;this.z=-a*d+b*c};h.prototype.Gn=function(){var b=this.x;this.x=-this.z;this.z=b};h.prototype.lb=function(b){var a=Math.sin(b);b=Math.cos(b);var d=this.x,c=this.y;this.x=b*d-a*c;this.y=a*d+b*c};h.prototype.Pk=function(){var b=this.x;this.x=-this.y;this.y=b};h.prototype.le=function(b){return this.wa(b*Math.PI/180)};h.prototype.Vf=function(b){return this.Ea(b*Math.PI/180)};h.prototype.jh=
function(b){return this.lb(b*Math.PI/180)};h.prototype.clone=function(){return new h(this.x,this.y,this.z,this.$c,this.Gb)};h.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};h.prototype.normalize=function(){var b=this.length();0<b&&(b=1/b,this.x*=b,this.y*=b,this.z*=b)};h.prototype.fh=function(b){return this.x*b.x+this.y*b.y+this.z*b.z};h.prototype.Cj=function(b,a){var d;d=Math.cos(a*Math.PI/180);this.x=d*Math.sin(b*Math.PI/180);this.y=Math.sin(a*Math.PI/180);
this.z=d*Math.cos(b*Math.PI/180)};h.prototype.Nl=function(){return 180*Math.atan2(-this.x,-this.z)/Math.PI};h.prototype.Ol=function(){return 180*Math.asin(this.y/this.length())/Math.PI};h.prototype.kd=function(b,a,d){this.x=b.x*d+a.x*(1-d);this.y=b.y*d+a.y*(1-d);this.z=b.z*d+a.z*(1-d);this.$c=b.$c*d+a.$c*(1-d);this.Gb=b.Gb*d+a.Gb*(1-d)};return h}();m.sa=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function h(){this.Ln()}h.prototype.Ln=function(){this.Yb=1;this.ac=this.$b=this.Zb=0;this.bc=1;this.ec=this.dc=this.cc=0;this.fc=1};h.prototype.clone=function(b){this.Yb=b.Yb;this.Zb=b.Zb;this.$b=b.$b;this.ac=b.ac;this.bc=b.bc;this.cc=b.cc;this.dc=b.dc;this.ec=b.ec;this.fc=b.fc};h.prototype.Vn=function(b){var a=Math.cos(b);b=Math.sin(b);this.Yb=1;this.ac=this.$b=this.Zb=0;this.bc=a;this.cc=-b;this.dc=0;this.ec=b;this.fc=a};h.prototype.Wn=function(b){var a=Math.cos(b);
b=Math.sin(b);this.Yb=a;this.Zb=0;this.$b=b;this.ac=0;this.bc=1;this.cc=0;this.dc=-b;this.ec=0;this.fc=a};h.prototype.Xn=function(b){var a=Math.cos(b);b=Math.sin(b);this.Yb=a;this.Zb=-b;this.$b=0;this.ac=b;this.bc=a;this.ec=this.dc=this.cc=0;this.fc=1};h.prototype.Sn=function(b){this.Vn(b*Math.PI/180)};h.prototype.Tn=function(b){this.Wn(b*Math.PI/180)};h.prototype.Un=function(b){this.Xn(b*Math.PI/180)};h.prototype.le=function(b){var a,d;a=new h;d=new h;a.Sn(b);d.clone(this);this.multiply(a,d)};h.prototype.Vf=
function(b){var a,d;a=new h;d=new h;a.Tn(b);d.clone(this);this.multiply(a,d)};h.prototype.jh=function(b){var a,d;a=new h;d=new h;a.Un(b);d.clone(this);this.multiply(a,d)};h.prototype.multiply=function(b,a){this.Yb=b.Yb*a.Yb+b.Zb*a.ac+b.$b*a.dc;this.Zb=b.Yb*a.Zb+b.Zb*a.bc+b.$b*a.ec;this.$b=b.Yb*a.$b+b.Zb*a.cc+b.$b*a.fc;this.ac=b.ac*a.Yb+b.bc*a.ac+b.cc*a.dc;this.bc=b.ac*a.Zb+b.bc*a.bc+b.cc*a.ec;this.cc=b.ac*a.$b+b.bc*a.cc+b.cc*a.fc;this.dc=b.dc*a.Yb+b.ec*a.ac+b.fc*a.dc;this.ec=b.dc*a.Zb+b.ec*a.bc+b.fc*
a.ec;this.fc=b.dc*a.$b+b.ec*a.cc+b.fc*a.fc};h.prototype.gn=function(b){var a,d,c;a=b.x;d=b.y;c=b.z;b.x=a*this.Yb+d*this.Zb+c*this.$b;b.y=a*this.ac+d*this.bc+c*this.cc;b.z=a*this.dc+d*this.ec+c*this.fc};return h}();m.Bl=g})(ggP2VR||(ggP2VR={}));
(function(m){m.T={create:function(g){var h;"undefined"!=typeof Float32Array?h=new Float32Array(16):h=Array(16);g&&(h[0]=g[0],h[1]=g[1],h[2]=g[2],h[3]=g[3],h[4]=g[4],h[5]=g[5],h[6]=g[6],h[7]=g[7],h[8]=g[8],h[9]=g[9],h[10]=g[10],h[11]=g[11],h[12]=g[12],h[13]=g[13],h[14]=g[14],h[15]=g[15]);return h},set:function(g,h){h[0]=g[0];h[1]=g[1];h[2]=g[2];h[3]=g[3];h[4]=g[4];h[5]=g[5];h[6]=g[6];h[7]=g[7];h[8]=g[8];h[9]=g[9];h[10]=g[10];h[11]=g[11];h[12]=g[12];h[13]=g[13];h[14]=g[14];h[15]=g[15];return h},Gd:function(g){g[0]=
1;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=1;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=1;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;return g},multiply:function(g,h,b){b||(b=g);var a=g[0],d=g[1],c=g[2],e=g[3],f=g[4],l=g[5],k=g[6],w=g[7],B=g[8],n=g[9],m=g[10],p=g[11],u=g[12],t=g[13],v=g[14];g=g[15];var q=h[0],x=h[1],A=h[2],z=h[3],y=h[4],C=h[5],D=h[6],E=h[7],F=h[8],H=h[9],I=h[10],J=h[11],K=h[12],L=h[13],M=h[14];h=h[15];b[0]=q*a+x*f+A*B+z*u;b[1]=q*d+x*l+A*n+z*t;b[2]=q*c+x*k+A*m+z*v;b[3]=q*e+x*w+A*p+z*g;b[4]=y*a+C*f+D*B+
E*u;b[5]=y*d+C*l+D*n+E*t;b[6]=y*c+C*k+D*m+E*v;b[7]=y*e+C*w+D*p+E*g;b[8]=F*a+H*f+I*B+J*u;b[9]=F*d+H*l+I*n+J*t;b[10]=F*c+H*k+I*m+J*v;b[11]=F*e+H*w+I*p+J*g;b[12]=K*a+L*f+M*B+h*u;b[13]=K*d+L*l+M*n+h*t;b[14]=K*c+L*k+M*m+h*v;b[15]=K*e+L*w+M*p+h*g;return b},translate:function(g,h,b){var a=h[0],d=h[1];h=h[2];if(!b||g==b)return g[12]=g[0]*a+g[4]*d+g[8]*h+g[12],g[13]=g[1]*a+g[5]*d+g[9]*h+g[13],g[14]=g[2]*a+g[6]*d+g[10]*h+g[14],g[15]=g[3]*a+g[7]*d+g[11]*h+g[15],g;var c=g[0],e=g[1],f=g[2],l=g[3],k=g[4],w=g[5],
B=g[6],n=g[7],m=g[8],p=g[9],u=g[10],t=g[11];b[0]=c;b[1]=e;b[2]=f;b[3]=l;b[4]=k;b[5]=w;b[6]=B;b[7]=n;b[8]=m;b[9]=p;b[10]=u;b[11]=t;b[12]=c*a+k*d+m*h+g[12];b[13]=e*a+w*d+p*h+g[13];b[14]=f*a+B*d+u*h+g[14];b[15]=l*a+n*d+t*h+g[15];return b},scale:function(g,h,b){var a=h[0],d=h[1];h=h[2];if(!b||g==b)return g[0]*=a,g[1]*=a,g[2]*=a,g[3]*=a,g[4]*=d,g[5]*=d,g[6]*=d,g[7]*=d,g[8]*=h,g[9]*=h,g[10]*=h,g[11]*=h,g;b[0]=g[0]*a;b[1]=g[1]*a;b[2]=g[2]*a;b[3]=g[3]*a;b[4]=g[4]*d;b[5]=g[5]*d;b[6]=g[6]*d;b[7]=g[7]*d;b[8]=
g[8]*h;b[9]=g[9]*h;b[10]=g[10]*h;b[11]=g[11]*h;b[12]=g[12];b[13]=g[13];b[14]=g[14];b[15]=g[15];return b},rotate:function(g,h,b,a){var d=b[0],c=b[1];b=b[2];var e=Math.sqrt(d*d+c*c+b*b);if(!e)return null;1!=e&&(e=1/e,d*=e,c*=e,b*=e);var f=Math.sin(h),l=Math.cos(h),k=1-l;h=g[0];var e=g[1],w=g[2],B=g[3],n=g[4],m=g[5],p=g[6],u=g[7],t=g[8],v=g[9],q=g[10],x=g[11],A=d*d*k+l,z=c*d*k+b*f,y=b*d*k-c*f,C=d*c*k-b*f,D=c*c*k+l,E=b*c*k+d*f,F=d*b*k+c*f,d=c*b*k-d*f,c=b*b*k+l;a?g!=a&&(a[12]=g[12],a[13]=g[13],a[14]=g[14],
a[15]=g[15]):a=g;a[0]=h*A+n*z+t*y;a[1]=e*A+m*z+v*y;a[2]=w*A+p*z+q*y;a[3]=B*A+u*z+x*y;a[4]=h*C+n*D+t*E;a[5]=e*C+m*D+v*E;a[6]=w*C+p*D+q*E;a[7]=B*C+u*D+x*E;a[8]=h*F+n*d+t*c;a[9]=e*F+m*d+v*c;a[10]=w*F+p*d+q*c;a[11]=B*F+u*d+x*c;return a},lm:function(g,h,b,a,d,c,e){e||(e=m.T.create());var f=h-g,l=a-b,k=c-d;e[0]=2*d/f;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2*d/l;e[6]=0;e[7]=0;e[8]=(h+g)/f;e[9]=(a+b)/l;e[10]=-(c+d)/k;e[11]=-1;e[12]=0;e[13]=0;e[14]=-(c*d*2)/k;e[15]=0;return e},perspective:function(g,h,b,a,d){g=
b*Math.tan(g*Math.PI/360);h=g*h;return m.T.lm(-h,h,-g,g,b,a,d)},Wo:function(g,h,b,a,d,c,e){e||(e=m.T.create());var f=h-g,l=a-b,k=c-d;e[0]=2/f;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2/l;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=-2/k;e[11]=0;e[12]=-(g+h)/f;e[13]=-(a+b)/l;e[14]=-(c+d)/k;e[15]=1;return e}}})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function h(b){this.ca=m.T.create();this.ab=m.T.create();this.la=this.Tc=0;this.yd=5;this.Fb=0;this.Ua=[];this.Ff=!1;this.Vi=this.ci=this.Li=1;this.Ce=1E6;this.Ag=[!1,!1,!1,!1,!1,!1];this.oh=!1;this.ij=8;this.h=b;if(b.Hd||b.Qg)b.yd=2}h.prototype.Ef=function(){var b=this.h.H;if(b){var a=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tvoid main(void) {\n\t\t\t\t\t\tgl_FragColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n\t\t\t\t\t}");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(console&&console.log(b.getShaderInfoLog(a)),alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.VERTEX_SHADER);this.zc(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tattribute vec2 aTextureCoord;\n\t\t\t\tuniform mat4 uMVMatrix;\n\t\t\t\tuniform mat4 uPMatrix;\n\t\t\t\tuniform float uZoffset;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n\t\t\t\t\tgl_Position.z += uZoffset;\n\t\t\t\t\tvTextureCoord = aTextureCoord;\n\t\t\t\t}");
this.F=b.createProgram();this.Le(this.F,d,a);this.F.Z=b.getAttribLocation(this.F,"aVertexPosition");b.enableVertexAttribArray(this.F.Z);this.F.xa=b.getAttribLocation(this.F,"aTextureCoord");b.enableVertexAttribArray(this.F.xa);this.F.Kd=b.getUniformLocation(this.F,"uPMatrix");this.F.Qf=b.getUniformLocation(this.F,"uMVMatrix");this.F.Te=b.getUniformLocation(this.F,"uSampler");this.F.Dh=b.getUniformLocation(this.F,"uZoffset");a=b.createShader(b.VERTEX_SHADER);this.zc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n\t\t\t\t}");
d=b.createShader(b.FRAGMENT_SHADER);this.zc(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform vec3 uColor;\n\t\t\t\tuniform float uAlpha;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = vec4(uColor, uAlpha);\n\t\t\t\t}");this.rd=b.createProgram();this.Le(this.rd,a,d);this.rd.Z=b.getAttribLocation(this.rd,"aVertexPosition");b.enableVertexAttribArray(this.rd.Z);d=b.createShader(b.VERTEX_SHADER);this.zc(d,"precision highp float;\n\t\t\t\tattribute vec3 aVertexPosition;\n\t\t\t\tvarying vec2 vTextureCoord;\n\t\t\t\tuniform vec2 uCanvasDimensions;\n\t\t\t\tuniform vec4 uRect;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tvec2 pos = vec2(uRect.x + uRect.z*aVertexPosition.x,uRect.y + uRect.w*aVertexPosition.y);\n\t\t\t\t\tvec2 pointNorm = (pos / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n\t\t\t\t\tgl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 1.0, 1.0);\n\t\t\t\t\tvTextureCoord.s=aVertexPosition.x;\n\t\t\t\t\tvTextureCoord.t=1.0-aVertexPosition.y;\n\t\t\t\t}");
a=b.createShader(b.FRAGMENT_SHADER);this.zc(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tgl_FragColor = texture2D(uSampler,vTextureCoord);\n\t\t\t\t}");this.qf=b.createProgram();this.Le(this.qf,d,a)}};h.prototype.Pg=function(){var b=this.h,a=b.H,d,c;a?(d=a.createShader(a.FRAGMENT_SHADER),c=this.hi(13),this.zc(d,c),c=a.createShader(a.VERTEX_SHADER),
this.zc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Jk=a.createProgram(),this.Le(this.Jk,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.hi(4),this.zc(d,c),c=a.createShader(a.VERTEX_SHADER),this.zc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nuniform float zOffset;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, zOffset, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Kk=a.createProgram(),this.Le(this.Kk,c,d),d=a.createShader(a.FRAGMENT_SHADER),c=this.hi(b.o.format),this.zc(d,c),c=a.createShader(a.VERTEX_SHADER),this.zc(c,"precision highp float;\nattribute vec3 aVertexPosition;\nuniform vec2 uCanvasDimensions;\nvarying vec2 dst;\nuniform vec2 dstSize;\nvoid main(void) {\n vec2 pointNorm = (aVertexPosition.xy / uCanvasDimensions) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(pointNorm.x, pointNorm.y * -1.0, 0.0, 1.0);\n dst.x= -1.0 + 2.0*((aVertexPosition.x + 0.5) / uCanvasDimensions.x);\n dst.y= (-1.0 * uCanvasDimensions.y + 2.0*(aVertexPosition.y + 0.5)) / uCanvasDimensions.x;\n}\n"),
this.Lk=a.createProgram(),this.Le(this.Lk,c,d),this.hh||(this.hh=a.createBuffer())):this.h.O("No WebGL to initRemapShader!")};h.prototype.zc=function(b,a){var d=this.h.H;d.shaderSource(b,a);d.compileShader(b);d.getShaderParameter(b,d.COMPILE_STATUS)||(console&&console.log(d.getShaderInfoLog(b)),O&&alert(d.getShaderInfoLog(b)))};h.prototype.Le=function(b,a,d){var c=this.h.H;c.attachShader(b,a);c.attachShader(b,d);c.linkProgram(b);c.getProgramParameter(b,c.LINK_STATUS)||(alert("Could not initialise shader program"),
console&&console.log(c.getError()));c.useProgram(b)};h.prototype.hi=function(b){var a=this.h,d;d="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define M_PI 3.14159265358979323846\nvarying vec2 dst;\nuniform vec2 srcScale;\nuniform vec2 srcOffset;\nuniform float rectDstDistance;\nuniform float fisheyeDistance;\nuniform float stereoDistance;\nuniform float directionBlend;\nuniform mat4 matRotate; // = mat4( 1.0,0.0,0.0,0.0, 0.0,1.0,0.0,0.0, 0.0,0.0,1.0,0.0, 0.0,0.0,0.0,1.0 );\nconst float rectSrcDistance = 1.0;\nuniform vec2 tonemap;\n";
d=(13==b?d+"uniform samplerCube cubeTexture;":d+"uniform sampler2D tileTexture;\n")+"void main()\n{\n";d+="vec4 direction;\n";d+="vec2 src;\n";d+="vec2 srcCord;\n";d+="vec2 texc;\n";var c=this.Rj(a.za());a.za()!=a.gc&&0!=a.gc?(a=this.Rj(a.gc),d+="vec4 direction1,direction2;\n",d+=c.replace("direction=","direction1="),d+=a.replace("direction=","direction2="),d+="direction=normalize(mix(direction1, direction2,1.0-directionBlend));\n"):d+=c;d+="direction=direction*matRotate;\n";13==b&&(d+="direction.z=-direction.z;",
d+="gl_FragColor = textureCube(cubeTexture, direction.xyz);");4==b&&(d+="float iz=1.0/(direction.z * rectSrcDistance);\n",d+="src.x=-direction.x*iz;\n",d+="src.y= direction.y*iz;\n",d+="texc=src * srcScale + srcOffset;\n",d+="if (",d+="(direction.z<0.0) && ",d+="(texc.x>=0.0) && (texc.x<=1.0) && (texc.y>=0.0) && (texc.y<=1.0)) {\n",d+="  gl_FragColor = texture2D(tileTexture, texc);\n",d+="} else {\n",d+="  discard;\n",d+="}\n");1==b&&(d+="src.x=atan(float(-direction.x), float(-direction.z));",d+=
"src.y=asin(direction.y);\n",d+="texc=src * srcScale + srcOffset;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");14==b&&(d+="vec2 cf;\n",d+="if ((direction.z<0.0) && (direction.z<=-abs(direction.x)) && (direction.z<=-abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=+direction.y/direction.z;\n",d+="  cf.x=1.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x>=0.0) && (direction.x>=abs(direction.y)) && (direction.x>=abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",
d+="  src.y=-direction.y/direction.x;\n",d+="  cf.x=3.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.z>=0.0) && (direction.z>=abs(direction.x)) && (direction.z>=abs(direction.y))) {\n",d+="  src.x=-direction.x/direction.z;\n",d+="  src.y=-direction.y/direction.z;\n",d+="  cf.x=5.0;cf.y=3.0;\n",d+="}\n",d+="if ((direction.x<=0.0) && (direction.x<=-abs(direction.y)) && (direction.x<=-abs(direction.z))) {\n",d+="  src.x=+direction.z/direction.x;\n",d+="  src.y=+direction.y/direction.x;\n",d+="  cf.x=1.0;cf.y=1.0;\n",
d+="}\n",d+="if ((direction.y>=0.0) && (direction.y>=abs(direction.x)) && (direction.y>=abs(direction.z))) {\n",d+="  src.x=+direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=5.0;cf.y=1.0;\n",d+="}\n",d+="if ((direction.y<=0.0) && (direction.y<=-abs(direction.x)) && (direction.y<=-abs(direction.z))) {\n",d+="  src.x=-direction.x/direction.y;\n",d+="  src.y=-direction.z/direction.y;\n",d+="  cf.x=3.0;cf.y=1.0;\n",d+="}\n",d+="texc.x=(cf.x+src.x*srcScale.x) / 6.0;\n",d+=
"texc.y=(cf.y+src.y*srcScale.y) / 4.0;\n",d+="gl_FragColor = texture2D(tileTexture, texc);\n");return d+="}\n"};h.prototype.Rj=function(b){var a="";switch(b){case 4:a+="direction.x=dst.x*rectDstDistance;\ndirection.y=dst.y*rectDstDistance;\ndirection.z=-1.0;\n";break;case 12:a+="float r,ph,ro;\nr=length(dst.xy)*0.5;\nro=atan(float(dst.x),float(-dst.y));\nph=r / fisheyeDistance;\ndirection.x= sin(ph) * sin(ro);\ndirection.y=-sin(ph) * cos(ro);\ndirection.z=-cos(ph);\n";break;case 9:a+="float n;\nvec2 ind;\nind=dst*stereoDistance;\nn=1.0 + ind.x*ind.x + ind.y*ind.y;\ndirection.x=2.0*ind.x/n;\ndirection.y=2.0*ind.y/n;\ndirection.z=(n-2.0)/n;\n"}return a+
"direction.w=0.0;\ndirection=normalize(direction);\n"};h.prototype.$j=function(b){var a,d,c,e,f=this.h,l=this.h.H;this.Sh=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,this.Sh);var k=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];for(a=0;12>a;a++)2>a%3&&(k[a]*=b);l.bufferData(l.ARRAY_BUFFER,new Float32Array(k),l.STATIC_DRAW);this.Wd=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,this.Wd);var w=[1,0,0,0,0,1,1,1];l.bufferData(l.ARRAY_BUFFER,new Float32Array(w),l.STATIC_DRAW);this.Lc=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,
this.Lc);var h=[0,1,2,0,2,3];l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),l.STATIC_DRAW);var k=[],h=[],w=[],g=new m.sa;for(b=0;6>b;b++){c=b%3;e=3>b?1:0;for(d=0;4>d;d++){g.x=-1;g.y=-1;g.z=1;for(a=0;a<d;a++)g.Pk();w.push((0>g.x?.33:0)+.33*c,(0>g.y?0:.5)+.5*e);if(4>b)for(a=0;a<b;a++)g.Gn();else 5==b?g.Fn():g.En();k.push(g.x,g.y,g.z)}a=4*b;h.push(0+a,1+a,2+a,0+a,2+a,3+a)}f.o.fj=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,f.o.fj);l.bufferData(l.ARRAY_BUFFER,new Float32Array(k),l.STATIC_DRAW);
f.o.qh=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,f.o.qh);l.bufferData(l.ARRAY_BUFFER,new Float32Array(w),l.STATIC_DRAW);f.o.ni=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,f.o.ni);l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),l.STATIC_DRAW);this.Um=l.createBuffer();this.Tm=l.createBuffer()};h.prototype.ji=function(b){var a=this;return function(){try{if(b.kn)return;var d=a.h.H;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);var c=!1;null!=b.fe&&b.fe.complete?b.Vj||(d.bindTexture(d.TEXTURE_2D,
b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.fe),c=b.Vj=!0):null!=b.Oe&&b.Oe.complete&&(d.bindTexture(d.TEXTURE_2D,b),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b.Oe),c=!0);c&&(b.loaded=!0);d.bindTexture(d.TEXTURE_2D,null);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,0)}catch(e){a.h.O(e)}a.h.update()}};h.prototype.ak=function(){var b,a,d=this.h,c=d.H;if(this.Ua)for(;0<this.Ua.length;)c.deleteTexture(this.Ua.pop());this.Ua=[];for(var e=0;6>e;e++)a=c.createTexture(),this.Tc++,
a.Oe=null,a.fe=null,a.Vj=!1,c.bindTexture(c.TEXTURE_2D,a),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),d.De[e]&&(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.Xb(d.De[e]),a.Oe=b,b.addEventListener&&b.addEventListener("load",this.ji(a),!1),d.Hb.push(b)),this.Ua.push(a);for(e=0;6>e;e++)d.Bg[e]&&
(b=new Image,b.crossOrigin=d.crossOrigin,b.src=d.Xb(d.Bg[e]),b.addEventListener?b.addEventListener("load",this.ji(this.Ua[e]),!1):b.onload=this.ji(this.Ua[e]),this.Ua[e].fe=b,d.Hb.push(b));for(e=0;e<d.J.length;e++)d.J[e].Xc||(d.J[e].ic=c.createTexture(),d.Tc++,c.bindTexture(c.TEXTURE_2D,d.J[e].ic),c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE));d.o.ic=c.createTexture();d.Tc++;c.bindTexture(c.TEXTURE_2D,d.o.ic);c.texImage2D(c.TEXTURE_2D,0,c.RGB,1,1,0,c.RGB,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.bindTexture(c.TEXTURE_2D,null)};h.prototype.Po=function(){var b=this.h;if(b.m.width!=b.B.offsetWidth||b.m.height!=b.B.offsetHeight)b.m.width=b.B.offsetWidth,
b.m.height=b.B.offsetHeight;b.ae&&(b.Bc(0),b.ad());if(b.H){var a=b.H;this.wh();a.clear(a.DEPTH_BUFFER_BIT);a.useProgram(this.F);this.cg(0);a.uniform1i(this.F.Te,0);a.enableVertexAttribArray(this.F.Z);a.enableVertexAttribArray(this.F.xa);a.bindBuffer(a.ARRAY_BUFFER,this.Wd);a.vertexAttribPointer(this.F.xa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Lc);a.uniform1f(this.F.Dh,1E-4);a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0);m.T.Gd(this.ab);m.T.perspective(b.Kb(),
b.ib.width/b.ib.height,.1,100,this.ab);a.uniformMatrix4fv(this.F.Kd,!1,this.ab);for(b=0;6>b;b++)this.cg(b),a.bindBuffer(a.ARRAY_BUFFER,this.Sh),a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Wd),a.vertexAttribPointer(this.F.xa,2,a.FLOAT,!1,0,0),6<=this.Ua.length&&this.Ua[b].loaded&&(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.Ua[b]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Lc),a.uniform1i(this.F.Te,0),a.uniformMatrix4fv(this.F.Qf,!1,this.ca),a.uniformMatrix4fv(this.F.Kd,
!1,this.ab),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0))}};h.prototype.wh=function(){var b=this.h;if(b.g.Qe&&6<b.g.Qe.length){var a=parseInt(b.g.Qe);b.H.clearColor((a>>16&255)/255,(a>>8&255)/255,(a>>0&255)/255,1)}};h.prototype.cg=function(b){var a=this.h;m.T.Gd(this.ca);m.T.rotate(this.ca,-a.M.c*Math.PI/180,[0,0,1]);m.T.rotate(this.ca,-a.j.c*Math.PI/180,[1,0,0]);m.T.rotate(this.ca,(180-a.pan.c)*Math.PI/180,[0,1,0]);a.Da&&(m.T.rotate(this.ca,-a.Da.pitch*Math.PI/180,[1,0,0]),m.T.rotate(this.ca,
a.Da.M*Math.PI/180,[0,0,1]));4>b?m.T.rotate(this.ca,-Math.PI/2*b,[0,1,0]):m.T.rotate(this.ca,Math.PI/2*(5==b?1:-1),[1,0,0])};h.prototype.so=function(b){var a=this;return function(){a.h.ya=!0;a.h.Nc=!0;b.loaded=!0;b.Mi=0;b.Md=0;var d=a.h.H;a.la&&a.la--;0==a.la&&a.h.N&&a.h.N.ggLoadedLevels&&a.h.N.ggLoadedLevels();d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,1);if(null!=b.g&&b.g.complete){b.hb=d.createTexture();a.h.Tc++;d.bindTexture(d.TEXTURE_2D,b.hb);try{d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,
b.g)}catch(c){d.texImage2D(d.TEXTURE_2D,0,d.RGBA,1,1,0,d.RGBA,d.UNSIGNED_BYTE,new Uint8Array([128,128,128,250])),a.h.O(c)}}a.h.update()}};h.prototype.hn=function(b){var a=this;return function(){a.h.ya=!0;a.h.Nc=!0;var d=a.h.g;try{if(null!=b&&b.complete){var c=d.I[d.I.length-1],e=d.Ka;c.height=c.width=b.width-2*e;c.L=c.da=1;for(var f=0;6>f;f++){var l=new m.Fd;l.K=document.createElement("canvas");a.h.ea?(l.K.width=c.width+2*e,l.K.height=c.height+2*e):(l.K.width=d.G+2*e,l.K.height=d.G+2*e);l.Oa=l.K.getContext("2d");
l.K.style[a.h.Va+"Origin"]="0% 0%";l.K.style.overflow="hidden";l.K.style.position="absolute";l.g=b;var k=c.width+2*e,w=c.height+2*e;l.Oa&&l.Oa.drawImage(b,0,f*w,k,w,0,0,k,w);if(a.h.ea&&a.h.H){var g=a.h.H;g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,1);l.hb=g.createTexture();a.h.Tc++;g.bindTexture(g.TEXTURE_2D,l.hb);try{g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,l.K)}catch(h){a.h.O(h)}g.bindTexture(g.TEXTURE_2D,null);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,0)}a.h.Ec&&(l.K.Ed=-1,a.h.B.insertBefore(l.K,
a.h.B.firstChild));c.W[f]=l}c.loaded=!0}}catch(h){a.h.O(h)}a.h.update()}};h.prototype.hl=function(b){var a=this;return function(){a.h.ya=!0;a.h.Nc=!0;a.la&&a.la--;0==a.la&&a.h.N&&a.h.N.ggLoadedLevels&&a.h.N.ggLoadedLevels();b.g=null}};h.prototype.No=function(){var b=this.h,a=b.g,d=b.g.I;b.ae&&(b.Bc(0),b.ad());if(b.H){var c=b.H;c.useProgram(this.F);this.wh();c.clear(c.DEPTH_BUFFER_BIT);c.enable(c.DEPTH_TEST);m.T.Gd(this.ab);m.T.perspective(b.Kb(),b.ib.width/b.ib.height,.1,100,this.ab);c.uniformMatrix4fv(this.F.Kd,
!1,this.ab);this.Fb=0;b.nl();b.vi();var e=b.$h(),f;for(f=d.length-1;f>=e;){var l=d[f],k=1;f==d.length-1&&0==a.Ka&&(k=a.G/(a.G-.5));for(var w=0;6>w;w++){var g;g=this.h.fb.$a[w];var h=g.Me;if(g.rc&&0<h.bf&&0<h.pg&&0<h.scale||l.cache){g.ya=!1;var r;g.xe[f]||(g.xe[f]={Wa:0,rb:0,sb:0,tb:0});r=g.xe[f];l.cache?(r.Wa=0,r.rb=0,r.sb=l.L-1,r.tb=l.da-1):b.Sj(l,h,r);for(var h=!0,p=r.rb;p<=r.tb;p++)for(var u=r.Wa;u<=r.sb;u++){var t=u+p*l.L+w*l.L*l.da,v=l.W[t];v||(v=l.W[t]=new m.Fd);this.la<this.yd?v.g||(v.Md?v.Md--:
(this.Yg(v,l,b.oe(w,f,u,p)),b.ya=!0)):this.Fb++;if(v.hb){if(!v.Af){t=.5*f+1;v.Af=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,v.Af);var q=[-1,-1,1,1,-1,1,1,1,1,-1,1,1];q[3]=u*a.G-a.Ka;q[0]=Math.min((u+1)*a.G,l.width)+a.Ka;q[7]=p*a.G-a.Ka;q[1]=Math.min((p+1)*a.G,l.height)+a.Ka;q[4]=q[1];q[6]=q[3];q[9]=q[0];q[10]=q[7];for(var x=0;12>x;x++)q[x]=0==x%3?k*t*(-2*q[x]/l.width+1):1==x%3?k*t*(-2*q[x]/l.height+1):t;c.bufferData(c.ARRAY_BUFFER,new Float32Array(q),c.STATIC_DRAW)}}else h=!1;v.visible=g.rc}r.si=
h}}f--}for(w=0;6>w;w++)if(g=b.fb.$a[w],g.rc)for(h=g.Me,this.cg(w),c.uniform1i(this.F.Te,0),c.uniformMatrix4fv(this.F.Kd,!1,this.ab),c.uniformMatrix4fv(this.F.Qf,!1,this.ca),c.enableVertexAttribArray(this.F.Z),c.enableVertexAttribArray(this.F.xa),c.bindBuffer(c.ARRAY_BUFFER,this.Wd),c.vertexAttribPointer(this.F.xa,2,c.FLOAT,!1,0,0),c.activeTexture(c.TEXTURE0),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.Lc),c.useProgram(this.F),f=e;f<=d.length-1;){l=d[f];if(g.rc&&0<h.bf&&g.xe[f]&&0<=g.xe[f].Wa){r=g.xe[f];
for(p=r.rb;p<=r.tb;p++)for(u=r.Wa;u<=r.sb;u++)t=u+p*l.L+w*l.L*l.da,(v=l.W[t])&&v.hb&&(c.uniform1f(this.F.Dh,1E-4*(u%2+p%2*2)),c.bindBuffer(c.ARRAY_BUFFER,v.Af),c.vertexAttribPointer(this.F.Z,3,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,v.hb),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.drawElements(c.TRIANGLES,
6,c.UNSIGNED_SHORT,0)),v.visible=g.rc;r.si&&(f=d.length)}f++}this.Ni();b.Nc=!1}};h.prototype.Yg=function(b,a,d){var c=this.h;c.mi++;b.g=new Image;b.Mi++;b.Md=1<<b.Mi;b.g.onload=this.so(b);b.g.onerror=this.hl(b);b.g.onabort=this.hl(b);b.g.crossOrigin=c.crossOrigin;b.g.setAttribute("src",d);a.cache&&c.Hb.push(b.g);0==this.la&&c.N&&c.N.ggReLoadedLevels&&c.N.ggReLoadedLevels();this.la++};h.prototype.vl=function(){var b=this.h,a=b.g;b.ae&&(b.Bc(0),b.ad());if(b.H){var d=b.H;this.wh();O&&d.clearColor(.2,
0,0,1);d.clear(d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.bindBuffer(d.ARRAY_BUFFER,this.hh);var c=[0,0];c[2]=b.m.width;c[3]=0;c[4]=b.m.width;c[5]=b.m.height;c[6]=0;c[7]=b.m.height;d.bufferData(d.ARRAY_BUFFER,new Float32Array(c),d.STATIC_DRAW);this.Fb=0;if(!this.sc||this.Ff)0<a.I.length?this.dm():this.em();b.o.nd?this.qn():(d.enable(d.DEPTH_TEST),d.depthRange(0,1),d.depthFunc(d.LESS),this.oh=!1,0<a.I.length&&this.Oo(),this.sc&&!this.oh&&this.pn())}};h.prototype.co=function(b,
a,d,c,e,f,l){var k=this.h,g=k.g,h=k.m,n=d*g.G/a.width,r=(d+1)*g.G/a.width;d=c*g.G/a.height;a=(c+1)*g.G/a.height;1<r&&(e*=2,r=1);1<a&&(e*=2,a=1);e=Math.min(this.ij,e);var r=(r-n)/e,p=(a-d)/e;c=a=0;var u,t,g={x:0,y:0},v={x:0,y:0},q=0;b.Ng=0;var x=k.Rf,A=new m.sa,z=new m.Bl;4>f?z.Vf(-90*f):z.le(5==f?90:-90);k.Da&&(z.jh(k.Da.M),z.le(-k.Da.pitch));z.Vf(-k.pan.c);z.le(k.j.c);z.jh(k.M.c);for(f=0;f<=e;f++)for(var y=0;y<=e;y++)u=2*(n+y*r)-1,t=2*(d+f*p)-1,A.x=1*u,A.y=1*t,A.z=-1,A.normalize(),z.gn(A),u=this.Pj(A,
g,k.za()),0!=k.gc&&1>x&&(u=u&&this.Pj(A,v,k.gc),g.x=g.x*x+v.x*(1-x),g.y=g.y*x+v.y*(1-x)),u?-1E10<g.x&&1E10>g.x&&-1E10<g.y&&1E10>g.y?-2<g.x&&2>g.x&&-2<g.y&&2>g.y&&(a+=g.x,c+=g.y,q++):g.x=NaN:g.x=NaN,b.Uc[b.Ng++]=g.x,b.Uc[b.Ng++]=g.y;0<q?(a/=q,c/=q):l=0;for(d=0;d<b.Ng;d+=2)g.x=b.Uc[d],g.y=b.Uc[d+1],k=g.x-a,n=g.y-c,g.x+=k*l,g.y+=n*l,b.Uc[d]=h.width/2+g.x*h.width/2,b.Uc[d+1]=h.height/2-g.y*h.width/2;this.eo(b,e)};h.prototype.Pj=function(b,a,d){var c=!0;switch(d){case 0:case 4:d=1/(b.z*this.Li);a.x=-b.x*
d;a.y=b.y*d;0<b.z&&(c=!1);break;case 9:1==b.z&&(c=!1);d=1/((1-b.z)*this.Vi);a.x=b.x*d;a.y=-b.y*d;break;case 12:if(d=Math.sqrt(b.x*b.x+b.y*b.y),0==d)a.x=0,a.y=0;else{var e=2*this.ci*Math.acos(-b.z)/d;if(2<d)return!1;a.x=e*b.x;a.y=-e*b.y}}return c};h.prototype.eo=function(b,a){for(var d=this.h,c=[],e,f=b.jd=0;f<a;f++)for(var l=0;l<a;l++){c[0]=f+l*(a+1);c[1]=f+1+l*(a+1);c[2]=f+(l+1)*(a+1);c[3]=f+1+(l+1)*(a+1);e=!0;for(var k=0;4>k;k++)isNaN(b.Uc[2*c[0]])&&(e=!1);if(e){for(var g=!1,h=!1,n=!1,m=!1,k=0;4>
k;k++){var p=b.Uc[2*c[k]];p<d.m.width&&(h=!0);0<=p&&(g=!0);p=b.Uc[2*c[k]+1];p<d.m.height&&(n=!0);0<=p&&(m=!0)}if(e=e&&h&&g&&n&&m)b.de[b.jd++]=c[0],b.de[b.jd++]=c[3],b.de[b.jd++]=c[2],b.de[b.jd++]=c[0],b.de[b.jd++]=c[1],b.de[b.jd++]=c[3]}}};h.prototype.Oo=function(){var b=this.h,a=b.g,d=b.g.I;b.ae&&(b.Bc(0),b.ad());if(b.H){var c=b.H,e=this.Kk;c.useProgram(e);this.aj(e);c.enable(c.CULL_FACE);c.cullFace(c.FRONT);c.enable(c.DEPTH_TEST);m.T.Gd(this.ab);m.T.perspective(b.Kb(),b.ib.width/b.ib.height,.1,
100,this.ab);c.uniformMatrix4fv(c.getUniformLocation(e,"uPMatrix"),!1,this.ab);this.Fb=0;b.vi();var f=b.$h(),l,k=0;l=d.length-1;for(var g={},h=d[l];h.Pe&&0<l;)l--,h=d[l];for(var n=l,r=n,p=0;6>p;p++)for(var u=0;u<h.da;u++)for(var t=0;t<h.L;t++){var v=t+u*h.L+p*h.L*h.da;g[v]=1}for(;l>=f;){var q={},h=d[l],x=null;0<l&&(x=d[l-1]);var A;A=!0;for(var z in g)if(g.hasOwnProperty(z)){var v=Number(z),y=h.W[v],p=Number(Math.floor(v/(h.L*h.da))),u=Math.floor((v-p*h.L*h.da)/h.L),t=Math.floor(v-(u*h.L+p*h.L*h.da)),
C;if(6<=p)console.log("Grrr...");else if(C=this.h.fb.$a[p],C.ya=!1,y||(y=h.W[v]=new m.Fd),this.co(y,h,t,u,Math.max(1,this.ij>>n-l),p,-(0!=b.gc)?.3:.1),y.visible=0<y.jd||h.cache,y.visible&&!y.hb&&(A=!1,this.la<this.yd?y.g||(y.Md?y.Md--:(this.Yg(y,h,b.oe(p,l,t,u)),b.ya=!0)):this.Fb++),x&&(y.visible||x.cache)){var y=(t*a.G+1)/h.width,t=Math.min(1,(t+1)*a.G-1/h.width),D=(u*a.G+1)/h.height,u=Math.min(1,(u+1)*a.G-1/h.height),v=a.G/x.width;C=a.G/x.height;var E=D,D=Math.floor(D*x.height/a.G);do{var F=y,H=
Math.floor(y*x.width/a.G);do{var I=H+D*x.L+p*x.L*x.da;H<x.L&&D<x.da?q[I]=1:console.log("Grrrr");H++;F+=v}while(F<t);D++;E+=C}while(E<u)}}A&&(r=l,20>b.f.c&&l<this.Ce&&(this.oh=!0));g=q;l--}this.Ni();c.uniform1i(c.getUniformLocation(e,"tileTexture"),0);c.activeTexture(c.TEXTURE0);l=f;for(f=-1;l<=Math.min(r,this.Ce-1);){h=d[l];for(z in h.W)if(h.W.hasOwnProperty(z)){g=Number(z);y=h.W[g];p=Math.floor(g/(h.L*h.da));u=Math.floor((g-p*h.L*h.da)/h.L);t=Math.floor(g-(u*h.L+p*h.L*h.da));f!=p&&(f=p,this.xh(p,
e));if(200<k){this.oh=!1;break}y.hb&&(g=p=a.G,t==h.L-1&&(p=h.width-a.G*t),u==h.da-1&&(g=h.height-a.G*u),p=(p+2*a.Ka)/a.G,g=(g+2*a.Ka)/a.G,c.bindTexture(c.TEXTURE_2D,y.hb),c.uniform2f(c.getUniformLocation(e,"uCanvasDimensions"),b.m.width,b.m.height),n=c.getUniformLocation(e,"srcScale"),c.uniform2f(n,.5*h.width/a.G/p,.5*h.height/a.G/g),n=c.getUniformLocation(e,"srcOffset"),c.uniform2f(n,(.5*h.width+a.Ka-a.G*t)/a.G/p,-(.5*h.height+a.Ka-a.G*u)/a.G/g+1),n=c.getUniformLocation(e,"zOffset"),c.uniform1f(n,
(l+1)/(d.length+5)),p=c.getAttribLocation(e,"aVertexPosition"),c.disableVertexAttribArray(0),c.disableVertexAttribArray(1),c.disableVertexAttribArray(2),c.enableVertexAttribArray(p),c.activeTexture(c.TEXTURE0),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindBuffer(c.ARRAY_BUFFER,this.Um),c.vertexAttribPointer(p,
2,c.FLOAT,!1,0,0),c.bufferData(c.ARRAY_BUFFER,new Float32Array(y.Uc),c.DYNAMIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.Tm),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(y.de),c.DYNAMIC_DRAW),c.drawElements(c.TRIANGLES,y.jd,c.UNSIGNED_SHORT,0),k++)}l++}c.disable(c.CULL_FACE);c.cullFace(c.FRONT_AND_BACK);b.Nc=!1}};h.prototype.xh=function(b,a){var d=this.h,c=d.H;m.T.Gd(this.ab);m.T.Gd(this.ca);m.T.rotate(this.ca,d.M.c*Math.PI/180,[0,0,1]);m.T.rotate(this.ca,d.j.c*Math.PI/180,[1,0,0]);m.T.rotate(this.ca,
-d.pan.c*Math.PI/180,[0,1,0]);d.Da&&(m.T.rotate(this.ca,-d.Da.pitch*Math.PI/180,[1,0,0]),m.T.rotate(this.ca,d.Da.M*Math.PI/180,[0,0,1]));4>b?m.T.rotate(this.ca,-Math.PI/2*b,[0,1,0]):m.T.rotate(this.ca,Math.PI/2*(5==b?1:-1),[1,0,0]);c.uniformMatrix4fv(c.getUniformLocation(a,"matRotate"),!1,this.ca)};h.prototype.qn=function(){var b=this.h;if(b.H){var a=b.H,d,c=this.Lk;a.useProgram(c);this.xh(0,c);a.uniform2f(a.getUniformLocation(c,"uCanvasDimensions"),b.m.width,b.m.height);1==b.o.format&&(d=a.getUniformLocation(c,
"srcScale"),a.uniform2f(d,-.5/Math.PI,(b.o.ei?-1:1)/Math.PI));14==b.o.format&&(d=a.getUniformLocation(c,"srcScale"),a.uniform2f(d,1-2*b.o.ve/(b.o.width/3),1-2*b.o.ve/(b.o.height/2)));d=a.getUniformLocation(c,"srcOffset");a.uniform2f(d,.5,.5);this.aj(c);d=a.getUniformLocation(c,"cubeTexture");a.uniform1i(d,0);d=a.getAttribLocation(c,"aVertexPosition");a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.hh);
a.vertexAttribPointer(d,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,b.o.ic);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Lc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}};h.prototype.aj=function(b){var a=this.h,d=a.H,c=this.h.m,
e=c.width/c.height;switch(a.f.mode){case 1:e=1;break;case 2:e=c.width/Math.sqrt(c.width*c.width+c.height*c.height);break;case 3:4*c.height/3<c.width&&(e=4/3)}c=d.getUniformLocation(b,"rectDstDistance");this.Li=Math.tan(Math.min(a.f.c,179)/2*Math.PI/180)*e;d.uniform1f(c,this.Li);c=d.getUniformLocation(b,"fisheyeDistance");this.ci=180/(a.f.c*Math.PI*e);d.uniform1f(c,this.ci);c=d.getUniformLocation(b,"stereoDistance");this.Vi=Math.tan(Math.min(a.f.c,359)/4*Math.PI/180)*e;d.uniform1f(c,this.Vi);c=d.getUniformLocation(b,
"directionBlend");d.uniform1f(c,a.Rf)};h.prototype.pn=function(){var b=this.h,a=b.H,d=this.Jk;a.useProgram(d);a.enable(a.DEPTH_TEST);this.xh(0,d);a.uniform2f(a.getUniformLocation(d,"uCanvasDimensions"),b.m.width,b.m.height);b=a.getUniformLocation(d,"srcScale");a.uniform2f(b,1,1);b=a.getUniformLocation(d,"srcOffset");a.uniform2f(b,0,0);b=a.getUniformLocation(d,"zOffset");a.uniform1f(b,.9999);this.aj(d);this.xh(0,d);b=a.getUniformLocation(d,"cubeTexture");a.uniform1i(b,0);d=a.getAttribLocation(d,"aVertexPosition");
a.disableVertexAttribArray(0);a.disableVertexAttribArray(1);a.disableVertexAttribArray(2);a.enableVertexAttribArray(d);a.bindBuffer(a.ARRAY_BUFFER,this.hh);a.vertexAttribPointer(d,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_CUBE_MAP,this.sc);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_CUBE_MAP,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Lc);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)};h.prototype.em=function(){for(var b=this.h,a=b.H,d=[1,3,5,4,0,2],c=!0,e=!0,f=!1,l=0;6>l;l++)this.Ua[l].fe.complete?this.Ag[l]||(f=!0):c=!1,this.Ua[l].Oe.complete||(e=!1);if(e||c)if(!e||c||!this.sc||f){l=Math.round(b.jc/b.Xe);e=(b.jc-l)/2;b.O("paint cube single - isMain: "+c+" overlap: "+e);this.Ce=0;this.sc||(this.sc=a.createTexture());b.Tc++;a.bindTexture(a.TEXTURE_CUBE_MAP,
this.sc);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);f=document.createElement("canvas");f.width=l;f.height=l;for(var k=f.getContext("2d"),l=0;6>l;l++){var g=d[l];this.Ua[g].fe.complete?this.Ag[g]||(k.drawImage(this.Ua[g].fe,-e,-e),a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f),this.Ag[g]=!0):(k.drawImage(this.Ua[g].Oe,-e,-e,b.jc,b.jc),
a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f))}this.Ff=!c}};h.prototype.dm=function(){var b=this.h,a=this.h.g,d=b.g.I,c=b.H,e,f;e=d.length-1;if(!(0>e)){d[e].Pe&&e--;var l=512;b.Ug&&(l=256);!b.Uf&&2<=b.devicePixelRatio&&(l=512);for((f=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE))&&f<l&&(l=f);0<e&&d[e-1].width<=l;)e--;var k,l=d[e];if(0!=l.L&&(f=e,k=this.am(e),this.Ff&&k&&(this.Ff=!1),k||(e=d.length-1,l=d[e],k||(l.Pe?(k=l.loaded,this.ti(e-1)&&(--e,k=!0)):k=this.ti(e)),
this.Ff=!0),this.ti(f),k&&this.Ce>e)){l=d[e];b.O("paint cube level "+e);this.Ce=e;d=b.g.Ka;e=0<d||1<l.L||1<l.da;var g;if(e){var h=document.createElement("canvas");h.width=l.width;h.height=l.height;2048>l.width&&(1500<l.width?(h.width=2048,h.height=2048):700<l.width?(h.width=1024,h.height=1024):(h.width=512,h.height=512));g=h.getContext("2d")}this.sc=c.createTexture();b.Tc++;c.bindTexture(c.TEXTURE_CUBE_MAP,this.sc);c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_CUBE_MAP,
c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);f=[1,3,5,4,0,2];k=h.width/l.width;for(var a=a.G,n=0;6>n;n++){for(var m=0;m<l.da;m++)for(var p=0;p<l.L;p++){var u=p+m*l.L+f[n]*l.L*l.da,t=l.W[u],v=t.g;t.K&&(v=t.K);v?e?g.drawImage(v,k*(p*a-d),k*(m*a-d),k*v.width,k*v.height):c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,v):(b.O("WTF?!"),b.O(u),b.O(t))}e&&c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,h)}}}};h.prototype.ti=
function(b){var a=this.h,d=a.g.I[b];if(0==d.L)return!1;var c=!0;d.cache=!0;for(var e=0;6>e;e++)for(var f=0;f<d.da;f++)for(var l=0;l<d.L;l++){var k=l+f*d.L+e*d.L*d.da,g=d.W[k];g||(g=d.W[k]=new m.Fd);this.la<this.yd?g.g||(g.Md?g.Md--:(this.Yg(g,d,a.oe(e,b,l,f)),a.ya=!0)):this.Fb++;g.hb||(c=!1,a.ya=!0)}c&&(d.loaded=!0);return c};h.prototype.am=function(b){b=this.h.g.I[b];if(0==b.L)return!1;for(var a=0;6>a;a++)for(var d=0;d<b.da;d++)for(var c=0;c<b.L;c++){var e=b.W[c+d*b.L+a*b.L*b.da];if(!e||!e.hb)return!1}return b.loaded=
!0};h.prototype.ready=function(){return null!=this.sc};h.prototype.Ni=function(){for(var b=this.h,a=b.g.I,d=b.H,c=0;c<a.length;c++){var e=a[c];if(!e.cache)for(var f in e.W)if(e.W.hasOwnProperty(f)){var l=e.W[f];l.visible||(l.hb&&(d.deleteTexture(l.hb),b.Tc--),l.g=null,l.Af&&d.deleteBuffer(l.Af),delete e.W[f])}}};h.prototype.Ho=function(){var b=this.h;if(b.H){var a=this.h.H;a.disable(a.DEPTH_TEST);var d;for(d=0;d<b.J.length;d++){var c=b.J[d];if(!c.Xc){m.T.Gd(this.ca);m.T.rotate(this.ca,-b.M.c*Math.PI/
180,[0,0,1]);m.T.rotate(this.ca,-b.j.c*Math.PI/180,[1,0,0]);m.T.rotate(this.ca,(180-b.pan.c)*Math.PI/180,[0,1,0]);m.T.rotate(this.ca,c.pan*Math.PI/180,[0,1,0]);m.T.rotate(this.ca,-c.j*Math.PI/180,[1,0,0]);m.T.translate(this.ca,[0,0,1]);m.T.rotate(this.ca,c.lb*Math.PI/180,[0,0,1]);m.T.rotate(this.ca,-c.Ea*Math.PI/180,[0,1,0]);m.T.rotate(this.ca,c.wa*Math.PI/180,[1,0,0]);var e=Math.tan(c.f/2*Math.PI/180),f=c.Rd;f||(f=16/9);m.T.scale(this.ca,[e,e/f,1]);m.T.translate(this.ca,[0,0,-1]);a.bindBuffer(a.ARRAY_BUFFER,
this.Sh);a.vertexAttribPointer(this.F.Z,3,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.Wd);a.vertexAttribPointer(this.F.xa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,c.ic);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Lc);a.uniform1i(this.F.Te,
0);a.uniformMatrix4fv(this.F.Qf,!1,this.ca);a.uniformMatrix4fv(this.F.Kd,!1,this.ab);a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)}}a.enable(a.DEPTH_TEST)}};h.prototype.Go=function(){var b=this.h,a;if(b.m.width!=b.B.offsetWidth||b.m.height!=b.B.offsetHeight)b.m.width=b.B.offsetWidth,b.m.height=b.B.offsetHeight;b.ae&&(b.Bc(0),b.ad());if(b.H){var d=b.H;d.useProgram(this.F);m.T.Gd(this.ab);m.T.perspective(b.Kb(),b.ib.width/b.ib.height,.1,100,this.ab);d.uniformMatrix4fv(this.F.Kd,!1,this.ab);this.cg(0);
d.uniform1i(this.F.Te,0);d.uniformMatrix4fv(this.F.Kd,!1,this.ab);d.uniformMatrix4fv(this.F.Qf,!1,this.ca);d.enableVertexAttribArray(this.F.Z);d.enableVertexAttribArray(this.F.xa);d.bindBuffer(d.ARRAY_BUFFER,this.Wd);d.vertexAttribPointer(this.F.xa,2,d.FLOAT,!1,0,0);d.activeTexture(d.TEXTURE0);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Lc);d.uniform1f(this.F.Dh,1E-4);d.vertexAttribPointer(this.F.Z,3,d.FLOAT,!1,0,0);d.bindTexture(d.TEXTURE_2D,b.o.ic);for(a=0;1>a;a++)this.cg(0),d.bindBuffer(d.ARRAY_BUFFER,
b.o.fj),d.vertexAttribPointer(this.F.Z,3,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,b.o.qh),d.vertexAttribPointer(this.F.xa,2,d.FLOAT,!1,0,0),d.activeTexture(d.TEXTURE0),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.o.ni),d.uniform1i(this.F.Te,0),d.uniformMatrix4fv(this.F.Qf,!1,this.ca),d.uniformMatrix4fv(this.F.Kd,!1,this.ab),d.drawElements(d.TRIANGLES,36,d.UNSIGNED_SHORT,0)}};h.prototype.Fo=function(){var b=this.h,a=b.H,d=b.o;if(0<b.J.length)for(var c=0;c<b.J.length;c++){var e=b.J[c];if(!e.Xc&&e.hk&&e.Mg!=
e.b.currentTime&&(e.Mg=e.b.currentTime,!e.Rd&&0<e.b.videoHeight&&(e.Rd=e.b.videoWidth/e.b.videoHeight),b.ng))try{e.ic&&(a.bindTexture(a.TEXTURE_2D,e.ic),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,a.UNSIGNED_BYTE,e.b),b.update())}catch(f){b.O(f)}}if(d.b&&(c=Number(d.b.currentTime),d.Mg!=c)){d.Mg=c;try{d.ic&&d.Tg&&0<d.b.readyState&&(d.nd=!0,d.width=d.b.videoWidth,d.height=d.b.videoHeight,a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,b.o.ei),a.bindTexture(a.TEXTURE_2D,d.ic),a.texImage2D(a.TEXTURE_2D,0,a.RGB,a.RGB,
a.UNSIGNED_BYTE,d.b),d.fl=!0,b.update())}catch(f){b.O(f)}}};h.prototype.Bk=function(){var b,a,d=this.h,c=this.h.H;d.ta.style.visibility="hidden";d.w.If!=d.w.mode&&(d.w.If=d.w.mode);if((0<=d.w.mode||0<d.w.cb.length)&&!d.C.ig){var e=1;0>=d.w.mode&&(e=0);3==d.w.mode&&(e=d.w.oa);for(b=0;b<d.P.length;b++){var f=d.P[b];if("poly"==f.type){var l=f.Ld,k=e;2==d.w.mode&&(k=f.oa);var g=d.w.cb.indexOf(f.id);-1!=g&&(k=d.w.Eb[g]);if(0<l.length){g=[];for(a=0;a<l.length;a++)g.push(l[a].hc),g.push(l[a].Cb),g.push(0);
c.useProgram(this.rd);c.enable(c.BLEND);c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.SRC_ALPHA,c.ONE);c.disable(c.DEPTH_TEST);l=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,l);c.bufferData(c.ARRAY_BUFFER,new Float32Array(g),c.STATIC_DRAW);c.uniform2f(c.getUniformLocation(this.rd,"uCanvasDimensions"),d.m.width,d.m.height);l=c.getUniformLocation(this.rd,"uColor");a=f.Tb;c.uniform3f(l,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);var h=c.getUniformLocation(this.rd,"uAlpha");c.uniform1f(h,f.Sb*
k);c.vertexAttribPointer(this.rd.Z,3,c.FLOAT,!1,0,0);c.drawArrays(c.LINE_LOOP,0,g.length/3);a=f.Qb;c.uniform3f(l,(a>>16&255)/255,(a>>8&255)/255,(a&255)/255);c.uniform1f(h,f.Pb*k);c.enable(c.STENCIL_TEST);c.clearStencil(0);c.clear(c.STENCIL_BUFFER_BIT);c.colorMask(!1,!1,!1,!1);c.stencilFunc(c.ALWAYS,1,1);c.stencilOp(c.INCR,c.INCR,c.INCR);c.drawArrays(c.TRIANGLE_FAN,0,g.length/3);c.colorMask(!0,!0,!0,!0);c.stencilFunc(c.EQUAL,1,1);c.stencilOp(c.ZERO,c.ZERO,c.ZERO);c.drawArrays(c.TRIANGLE_FAN,0,g.length/
3);c.disable(c.BLEND);c.enable(c.DEPTH_TEST);c.disable(c.STENCIL_TEST);c.useProgram(this.F)}}}}};h.prototype.$i=function(){var b=this.h,a=b.g;if(b.m.width!=b.B.offsetWidth||b.m.height!=b.B.offsetHeight)b.m.width=b.B.offsetWidth,b.m.height=b.B.offsetHeight;b.ae&&(b.Bc(0),b.ad());if(b.H){var d=b.H;this.wh();d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT);d.disable(d.DEPTH_TEST);d.disable(d.CULL_FACE);d.useProgram(this.qf);var c=d.getUniformLocation(this.qf,"uRect");d.uniform2f(d.getUniformLocation(this.qf,
"uCanvasDimensions"),b.m.width,b.m.height);d.activeTexture(d.TEXTURE0);var e;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.Lc);e=d.getAttribLocation(this.qf,"aVertexPosition");d.disableVertexAttribArray(0);d.disableVertexAttribArray(1);d.disableVertexAttribArray(2);d.enableVertexAttribArray(e);d.bindBuffer(d.ARRAY_BUFFER,this.Wd);d.vertexAttribPointer(e,2,d.FLOAT,!1,0,0);b.Fb=0;var f,l;l=100/b.f.c;f=a.width/a.height;e=b.m.height*l*f;l*=b.m.height;f=(b.pan.c/100/f-.5)*e+b.m.width/2;for(var k=(b.j.c/100-
.5)*l+b.m.height/2,g,h,n,r=0;a.I.length>=r+2&&a.I[r+1].width>e;)r++;var p,u;u=[];for(p=a.I.length-1;p>=r;){var t=a.I[p],v;t.cache?(v={Wa:0,rb:0},v.sb=t.L-1,v.tb=t.da-1):(v={},g=-k/l*(t.height/b.g.G),h=(-f+b.m.width)/e*(t.width/b.g.G),n=(-k+b.m.height)/l*(t.height/b.g.G),v.Wa=Math.min(Math.max(0,Math.floor(-f/e*(t.width/b.g.G))),t.L-1),v.rb=Math.min(Math.max(0,Math.floor(g)),t.da-1),v.sb=Math.min(Math.max(0,Math.floor(h)),t.L-1),v.tb=Math.min(Math.max(0,Math.floor(n)),t.da-1));u[p]=v;var q=!0;for(h=
v.rb;h<=v.tb;h++)for(g=v.Wa;g<=v.sb;g++){n=g+h*t.L;var x=t.W[n];x||(x=new m.Fd,t.W[n]=x);this.la<this.yd?x.g||(this.Yg(x,t,b.oe(0,p,g,h)),b.ya=!0):this.Fb++;x.g&&x.g.complete||(q=!1);x.visible=!0}v.si=q;p--}for(p=a.I.length-1;p>=r;){t=a.I[p];if(u[p]&&0<=u[p].Wa)for(v=u[p],h=v.rb;h<=v.tb;h++)for(g=v.Wa;g<=v.sb;g++)n=g+h*t.L,(x=t.W[n])&&x.g&&x.g.complete&&(d.uniform4f(c,f+(-a.Ka+a.G*g)*e/t.width,k+(-a.Ka+a.G*h)*l/t.height,x.g.width*e/t.width,x.g.height*l/t.height),x&&x.hb&&(d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,
this.Lc),d.bindTexture(d.TEXTURE_2D,x.hb),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0)));p--}this.Ni()}};h.prototype.ih=function(){var b=this.h.H;if(b&&this.Ua)for(;0<this.Ua.length;){var a=this.Ua.pop();a.kn=!0;b.deleteTexture(a)}this.sc&&(b.deleteTexture(this.sc),
this.sc=null);this.Ce=1E6;this.Ag=[!1,!1,!1,!1,!1,!1]};return h}();m.Jl=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){return function(){this.Me={rf:1,sf:1,Mf:0,Nf:0,bf:0,pg:0,scale:1};this.rc=!0;this.xe=[]}}(),h=function(){function b(){var a;this.$a=Array(6);for(a=0;6>a;a++)this.$a[a]=new g}b.prototype.bm=function(a,d,c,b){for(var f=0;6>f;f++){var l;if(l=this.$a[f]){var k;k=[];k.push(new m.sa(-1,-1,-1,0,0));k.push(new m.sa(1,-1,-1,1,0));k.push(new m.sa(1,1,-1,1,1));k.push(new m.sa(-1,1,-1,0,1));for(var g=0;g<k.length;g++)4>f?k[g].Ea(-Math.PI/2*f):k[g].wa(Math.PI/2*(4===f?-1:1)),b&&(k[g].lb(b.M*
Math.PI/180),k[g].wa(-b.pitch*Math.PI/180)),k[g].Ea(-a*Math.PI/180),k[g].wa(d*Math.PI/180),k[g].lb(c*Math.PI/180);l.rc=0<k.length}}};return b}();m.Fl=h})(ggP2VR||(ggP2VR={}));
(function(m){m.El=function(){return function(){this.I=[];this.Qe="0x000000";this.Fk=!1;this.rk=this.qk=.4;this.G=512;this.Ka=1;this.ri=0;this.sk="";this.Nk=this.height=this.width=0}}();m.Ak=function(){return function(){this.height=this.width=0;this.Pe=this.cache=!1;this.da=this.L=0;this.loaded=!1;this.W=[]}}();m.Fd=function(){return function(){this.loaded=this.visible=!1;this.Md=this.Mi=0;this.Uc=[];this.Ng=0;this.de=[];this.jd=0}}()})(ggP2VR||(ggP2VR={}));
(function(m){m.zl=function(){return function(g,h){this.h=g;this.Aa=h;var b,a,d=this.__div=document.createElement("div");b=document.createElement("img");b.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNqclmlIVFEUx997TjrplFQW2WKBBSYtRFlpWUILSSsRZRQIBdGHCFqIoKIvQRsUFRJC9LEgaSFbMMpcWi1pLzOLsjItKms0U5t5/c/wH7nc5o2jF374xrv87z33nHOPaRsRtbFgDpgJxoD+wATfwDNQDK6CyrCr5OcbhgiGIRsUAZt4QTWoIFXgp9JfAhY7rgdBl8NeBoLDYBloA+dBOagFTcDHcVEgDgwBGWA+OAcugvXgvb5wKMGJoAAMp9BpUA96EBf/Btsf8BI8AWfAErAcpHHDZeriliY2AVwDg8AucAQ0Ag+I4XhTm2Oxz8PT46KMbTx5EZjuJDgAnAVusJUm9DhYwalFcc59sIXXIaceFkowDySBPTRPL20xm+b7zYXa+N3CPrWJ6GuwGySA40HLBHc/GywFhbS5R1lEBrZy7FQwiSaX9pmnqeAYt+KUcew7BVZw/QKTq0ocpYPVvDOXItZCk2xgDIZqL8BR8Ab0VDbr4yZOgLeIwzQx6WiQxcCt1+6sld66L4yYtFSwF4yg2dU7/cEwGW9YVkAwmycp1dzdpvgm0DcCh4kHmxWzBls0uBX4qqmZJ4KzePm1IeJLgjmlC16aDKZpp5Q168B3o6wsSwTHgU+MIUs74RSj6y1d+212HKimJlUE+tFRfJpYtOKNXWmJTASqWf2Bu/R6+4TKHOrOzG4IhptjWgHbGkZvepQ6SQK7oRuCXzjX1DJavBEX1ygfT8FgBqpfm1zRDcEKbR2bsZlkJCdXieB1ZhZ5YtqVgXIPN+m9kbY6hpdb+d9fPncJRmZmqQheZkemJmgxyxykl3XWJEkcAl7N21s7PDcl5ZJ0PAa3wVwmWtVbZafPwQ7wLozYB7ATPNJO56d/LAikP9u+66KNJS1d4IOZp7wU0hfLukUyzgwm70T2N/DOxIy/eFdqawa5DL2NEGwP5k15Ja4woz9glvcomd9NzyvkFcQo5gomaLfm5c0svnKZ2k7q7+FauvR2MJKZR3+sY5WgtvkdG6JyELGhNHMTXyGfLviRJ5Tcd4Dlhle7086Sgp8CqVxDkn4OqHaqacr5ekjy3Q/W0FRNNGmoMtamdzdxsytZC0lqXKhEgWPVVgImg2NgFT1MHOoOk3yLEtgWN5TEOYvoIFI1rGM19//2wpAD7imF7lfwENwAxaASNCj90pcLLKdC2Iyw1M9gnEplMEp5kOU1f8WwKGJm8oUr9f8JMAAVMDM6HSDa9QAAAABJRU5ErkJggg%3D%3D");
b.setAttribute("style","position: absolute;width: 28px; height: 28px;top: -14px;left: -14px; "+g.Ja+"user-select: none;");b.ondragstart=function(){return!1};d.appendChild(b);b="position:absolute;"+(g.Ja+"user-select: none;");b+=g.Ja+"touch-callout: none;";b+=g.Ja+"tap-highlight-color: rgba(0,0,0,0);";g.Id&&!g.ea&&(b+=g.Ja+"transform: translateZ(9999999px);");d.setAttribute("style",b);d.onclick=function(){g.Ue(h);g.Di(h.url,h.target)};var c=g.w.Yi;c.enabled&&(a=document.createElement("div"),b="position:absolute;top:\t 20px;",
b=c.Ch?b+"white-space: pre-wrap;":b+"white-space: nowrap;",b+=g.Ja+"transform-origin: 50% 50%;",a.setAttribute("style",b+"visibility: hidden;overflow: hidden;padding: 0px 1px 0px 1px;font-size: 13px;"),a.style.color=this.h.fa(c.Zi,c.Xi),c.background?a.style.backgroundColor=this.h.fa(c.Qb,c.Pb):a.style.backgroundColor="transparent",a.style.border="solid "+this.h.fa(c.Tb,c.Sb)+" "+c.Kh+"px",a.style.borderRadius=c.Jh+"px",a.style.textAlign="center",0<c.width?(a.style.left=-c.width/2+"px",a.style.width=
c.width+"px"):a.style.width="auto",a.style.height=0<c.height?c.height+"px":"auto",a.style.overflow="hidden",a.innerHTML=h.title,d.onmouseover=function(){0==c.width&&(a.style.left=-a.offsetWidth/2+"px");a.style.visibility="inherit"},d.onmouseout=function(){a.style.visibility="hidden"},d.appendChild(a))}}()})(ggP2VR||(ggP2VR={}));
(function(m){m.yc=function(){return function(){this.Vd=this.Ud=this.Hc=this.Td=this.ub=this.type=this.mb=this.value=this.time=0}}();m.tk=function(){return function(){this.zo=this.Ml=this.length=0}}();m.ik=function(){return function(){}}()})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function g(b){this.h=b;this.enabled=!1;this.ug=1;this.we=0;this.type="crossdissolve";this.Ob=this.Na=this.uc=0;this.cf=5;this.Qd=1;this.df=!1;this.ne=this.me=this.Ui=0;this.xd=70;this.yl=0;this.nb=this.xl=1;this.sg=this.rg=.5;this.Sd=this.hj=this.yi=this.oi=!1;this.Vh=1}g.prototype.Ef=function(){var b=this.h.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nvarying vec2 vTextureCoord;\nuniform bool uZoomIn;\nuniform float uZoomFactor;\nuniform vec2 uZoomCenter;\nvoid main(void) {\n\t gl_Position = vec4(aVertexPosition, 1.0);\n\t if(!uZoomIn) {\n\t \n\t   vTextureCoord = aTextureCoord;\n\t }\n\t else {\n\t   vTextureCoord = (aTextureCoord - vec2(0.5, 0.5)) * (1.0/uZoomFactor) + uZoomCenter;\n\t }\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uAlpha;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.na=b.createProgram();b.attachShader(this.na,a);b.attachShader(this.na,d);b.linkProgram(this.na);b.getProgramParameter(this.na,b.LINK_STATUS)||alert("Could not initialise shaders");this.na.Z=b.getAttribLocation(this.na,"aVertexPosition");b.enableVertexAttribArray(this.na.Z);this.na.xa=b.getAttribLocation(this.na,"aTextureCoord");b.enableVertexAttribArray(this.na.xa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uColorPercent;\nuniform float uAlpha;\nuniform vec3 uDipColor;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n gl_FragColor = vec4(textureColor.x * (1.0 - uColorPercent) + uDipColor.x * uColorPercent, textureColor.y * (1.0 - uColorPercent) + uDipColor.y * uColorPercent, textureColor.z * (1.0 - uColorPercent) + uDipColor.z * uColorPercent, uAlpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ra=b.createProgram();b.attachShader(this.Ra,a);b.attachShader(this.Ra,d);b.linkProgram(this.Ra);b.getProgramParameter(this.Ra,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ra.Z=b.getAttribLocation(this.Ra,"aVertexPosition");b.enableVertexAttribArray(this.Ra.Z);this.Ra.xa=b.getAttribLocation(this.Ra,"aTextureCoord");b.enableVertexAttribArray(this.Ra.xa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform bool uRound;\nuniform float uRadius;\nuniform vec2 uRectDim;\nuniform vec2 uIrisCenter;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n float alpha = 0.0;\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n if (uRound) {\n\t  vec2 diff = uIrisCenter - gl_FragCoord.xy;\n\t   float distFromCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n\t   if (distFromCenter > uRadius) {\n      alpha = 1.0;\n    } else {\n      alpha = 1.0 - ((uRadius - distFromCenter) / uSoftEdge);\n    };\n }\n else {\n    float alphaFromLeft = 1.0 - ((gl_FragCoord.x -(uIrisCenter.x - uRectDim.x)) / uSoftEdge);\n    float alphaFromRight = 1.0 - (((uIrisCenter.x + uRectDim.x) - gl_FragCoord.x) / uSoftEdge);\n    float alphaFromTop = 1.0 - ((gl_FragCoord.y -(uIrisCenter.y - uRectDim.y)) / uSoftEdge);\n    float alphaFromBottom = 1.0 - (((uIrisCenter.y + uRectDim.y) - gl_FragCoord.y) / uSoftEdge);\n    alpha = max(max(alphaFromLeft, alphaFromRight), max(alphaFromTop, alphaFromBottom));\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ga=b.createProgram();b.attachShader(this.Ga,a);b.attachShader(this.Ga,d);b.linkProgram(this.Ga);b.getProgramParameter(this.Ga,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ga.Z=b.getAttribLocation(this.Ga,"aVertexPosition");b.enableVertexAttribArray(this.Ga.Z);this.Ga.xa=b.getAttribLocation(this.Ga,"aTextureCoord");b.enableVertexAttribArray(this.Ga.xa);d=b.createShader(b.FRAGMENT_SHADER);
b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform float uPercent;\nuniform int uDirection;\nuniform vec2 uCanvasDimensions;\nuniform float uSoftEdge;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));\n float alpha = 0.0;\n if (uDirection == 1) {\n\t if (gl_FragCoord.x > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.x) / uSoftEdge);\n  }\n }\n if (uDirection == 2) {\n\t if (gl_FragCoord.x < uCanvasDimensions.x - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.x - (uCanvasDimensions.x - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 3) {\n\t if (gl_FragCoord.y < uCanvasDimensions.y - uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((gl_FragCoord.y - (uCanvasDimensions.y - uPercent)) / uSoftEdge);\n  }\n }\n if (uDirection == 4) {\n\t if (gl_FragCoord.y > uPercent) {\n    alpha = 1.0; \n  } else {\n    alpha = 1.0 - ((uPercent - gl_FragCoord.y) / uSoftEdge);\n  }\n }\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, alpha);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Ma=b.createProgram();b.attachShader(this.Ma,a);b.attachShader(this.Ma,d);b.linkProgram(this.Ma);b.getProgramParameter(this.Ma,b.LINK_STATUS)||alert("Could not initialise shaders");this.Ma.Z=b.getAttribLocation(this.Ma,"aVertexPosition");b.enableVertexAttribArray(this.Ma.Z);this.Ma.xa=b.getAttribLocation(this.Ma,"aTextureCoord");b.enableVertexAttribArray(this.Ma.xa)};g.prototype.Bc=function(){var b=
this.h.H;if(!b)return!1;if(this.Nb=b.createFramebuffer()){b.bindFramebuffer(b.FRAMEBUFFER,this.Nb);this.Nb.width=1024;this.Nb.height=1024;this.re=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.re);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.Nb.width,this.Nb.height,0,b.RGBA,b.UNSIGNED_BYTE,null);var a=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,a);b.renderbufferStorage(b.RENDERBUFFER,
b.DEPTH_COMPONENT16,this.Nb.width,this.Nb.height);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.re,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,a);b.bindTexture(b.TEXTURE_2D,null);b.bindRenderbuffer(b.RENDERBUFFER,null);b.bindFramebuffer(b.FRAMEBUFFER,null);this.bb=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.bb);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),b.STATIC_DRAW);this.bb.Cc=3;this.bb.Jd=4;this.Re=
b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.Re);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),b.STATIC_DRAW);return!0}return!1};g.prototype.Ck=function(b){var a=this.h.H,d=this.h.ib;if(this.zd){a.useProgram(this.na);a.bindBuffer(a.ARRAY_BUFFER,this.bb);a.vertexAttribPointer(this.na.Z,this.bb.Cc,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.Re);a.vertexAttribPointer(this.na.xa,2,a.FLOAT,!1,0,0);a.enableVertexAttribArray(this.na.Z);a.enableVertexAttribArray(this.na.xa);a.activeTexture(a.TEXTURE0);
a.bindTexture(a.TEXTURE_2D,this.re);var d=1+(this.nb-1)*b,c=a.getUniformLocation(this.na,"uAlpha");a.uniform1f(c,1);c=a.getUniformLocation(this.na,"uZoomIn");a.uniform1i(c,1);var c=a.getUniformLocation(this.na,"uZoomCenter"),e=.5+(this.rg-.5)*Math.sqrt(b),f=.5+(this.sg-.5)*Math.sqrt(b);0>e-.5/d&&(e=.5/d);0>f-.5/d&&(f=.5/d);1<e+.5/d&&(e=1-.5/d);1<f+.5/d&&(f=1-.5/d);a.uniform2f(c,e,f);e=a.getUniformLocation(this.na,"uZoomFactor");a.uniform1f(e,d);a.uniform1i(a.getUniformLocation(this.na,"uSampler"),
0);a.drawArrays(a.TRIANGLE_STRIP,0,this.bb.Jd);a.useProgram(this.h.ma.F)}else{this.h.lg();a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.SRC_ALPHA,a.ONE);a.enable(a.BLEND);a.disable(a.DEPTH_TEST);e=.5+(this.rg-.5);f=.5+(this.sg-.5);0>e-.5/this.nb&&(e=.5/this.nb);0>f-.5/this.nb&&(f=.5/this.nb);1<e+.5/this.nb&&(e=1-.5/this.nb);1<f+.5/this.nb&&(f=1-.5/this.nb);if("crossdissolve"==this.type)a.useProgram(this.na),a.bindBuffer(a.ARRAY_BUFFER,this.bb),a.vertexAttribPointer(this.na.Z,this.bb.Cc,
a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Re),a.vertexAttribPointer(this.na.xa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.re),c=a.getUniformLocation(this.na,"uAlpha"),a.uniform1f(c,1-b),c=a.getUniformLocation(this.na,"uZoomIn"),a.uniform1i(c,1==this.Na||2==this.Na?1:0),c=a.getUniformLocation(this.na,"uZoomCenter"),a.uniform2f(c,e,f),e=a.getUniformLocation(this.na,"uZoomFactor"),a.uniform1f(e,this.nb),a.uniform1i(a.getUniformLocation(this.na,"uSampler"),0);
else if("diptocolor"==this.type)a.useProgram(this.Ra),a.bindBuffer(a.ARRAY_BUFFER,this.bb),a.vertexAttribPointer(this.Ra.Z,this.bb.Cc,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Re),a.vertexAttribPointer(this.Ra.xa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.re),a.uniform1f(a.getUniformLocation(this.Ra,"uColorPercent"),Math.min(2*b,1)),c=a.getUniformLocation(this.Ra,"uAlpha"),a.uniform1f(c,1-Math.max(2*(b-.5),0)),a.uniform3f(a.getUniformLocation(this.Ra,"uDipColor"),
(this.we>>16&255)/255,(this.we>>8&255)/255,(this.we&255)/255),c=a.getUniformLocation(this.Ra,"uZoomIn"),a.uniform1i(c,1==this.Na||2==this.Na?1:0),c=a.getUniformLocation(this.Ra,"uZoomCenter"),a.uniform2f(c,e,f),e=a.getUniformLocation(this.Ra,"uZoomFactor"),a.uniform1f(e,this.nb),a.uniform1i(a.getUniformLocation(this.Ra,"uSampler"),0);else if("irisround"==this.type||"irisrectangular"==this.type){a.useProgram(this.Ga);a.bindBuffer(a.ARRAY_BUFFER,this.bb);a.vertexAttribPointer(this.Ga.Z,this.bb.Cc,a.FLOAT,
!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.Re);a.vertexAttribPointer(this.Ga.xa,2,a.FLOAT,!1,0,0);a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,this.re);var l;1==this.Na||2==this.Na?l=c=.5:(c=this.rg,l=this.sg);var k=c*d.width,g=l*d.height,k=Math.max(k,d.width-k),g=Math.max(g,d.height-g);"irisround"==this.type?a.uniform1f(a.getUniformLocation(this.Ga,"uRadius"),(Math.sqrt(k*k+g*g)+this.uc)*b):(k>g?(g=d.height/d.width*k+this.uc,k+=this.uc):(k=d.width/d.height*g+this.uc,g+=this.uc),a.uniform2f(a.getUniformLocation(this.Ga,
"uRectDim"),k*b,g*b));b=a.getUniformLocation(this.Ga,"uSoftEdge");a.uniform1f(b,this.uc);a.uniform1i(a.getUniformLocation(this.Ga,"uRound"),"irisround"==this.type?1:0);a.uniform2f(a.getUniformLocation(this.Ga,"uIrisCenter"),c*d.width,l*d.height);c=a.getUniformLocation(this.Ga,"uZoomIn");a.uniform1i(c,1==this.Na||2==this.Na?1:0);c=a.getUniformLocation(this.Ga,"uZoomCenter");a.uniform2f(c,e,f);e=a.getUniformLocation(this.Ga,"uZoomFactor");a.uniform1f(e,this.nb);a.uniform1i(a.getUniformLocation(this.Ga,
"uSampler"),0)}else if("wipeleftright"==this.type||"wiperightleft"==this.type||"wipetopbottom"==this.type||"wipebottomtop"==this.type||"wiperandom"==this.type)a.useProgram(this.Ma),a.bindBuffer(a.ARRAY_BUFFER,this.bb),a.vertexAttribPointer(this.Ma.Z,this.bb.Cc,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.Re),a.vertexAttribPointer(this.Ma.xa,2,a.FLOAT,!1,0,0),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.re),a.uniform1f(a.getUniformLocation(this.Ma,"uPercent"),3>this.Vh?b*(d.width+
this.uc):b*(d.height+this.uc)),b=a.getUniformLocation(this.Ma,"uSoftEdge"),a.uniform1f(b,this.uc),a.uniform1i(a.getUniformLocation(this.Ma,"uDirection"),this.Vh),a.uniform2f(a.getUniformLocation(this.Ma,"uCanvasDimensions"),d.width,d.height),c=a.getUniformLocation(this.Ma,"uZoomIn"),a.uniform1i(c,1==this.Na||2==this.Na?1:0),c=a.getUniformLocation(this.Ma,"uZoomCenter"),a.uniform2f(c,e,f),e=a.getUniformLocation(this.Ma,"uZoomFactor"),a.uniform1f(e,this.nb),a.uniform1i(a.getUniformLocation(this.Ma,
"uSampler"),0);a.drawArrays(a.TRIANGLE_STRIP,0,this.bb.Jd);a.useProgram(this.h.ma.F);a.disable(a.BLEND);a.enable(a.DEPTH_TEST)}};return g}();m.Cl=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function g(b){this.jg=[];this.h=b;this.enabled=!1;this.mb=2;this.uj=!1}g.prototype.Zh=function(b){if(2==b.mode||3==b.mode||5==b.mode){var a=this.h.Ha.currentTime,d=b.qc.gain.value,c=b.oc.gain.value,e=b.pc.gain.value;b.nc.gain.linearRampToValueAtTime(b.nc.gain.value,a);b.nc.gain.linearRampToValueAtTime(0,a+this.mb);b.qc.gain.linearRampToValueAtTime(d,a);b.qc.gain.linearRampToValueAtTime(0,a+this.mb);b.oc.gain.linearRampToValueAtTime(c,a);b.oc.gain.linearRampToValueAtTime(0,
a+this.mb);b.pc.gain.linearRampToValueAtTime(e,a);b.pc.gain.linearRampToValueAtTime(0,a+this.mb)}else a=this.h.Ha.currentTime,b.Qc.gain.linearRampToValueAtTime(b.Qc.gain.value,a),b.Qc.gain.linearRampToValueAtTime(0,a+this.mb);b.Hg=!0;setTimeout(function(){b.td()},1E3*this.mb+5)};g.prototype.oo=function(){for(var b=0;b<this.h.S.length;b++){var a=this.h.S[b];this.h.Vc(a.id)||4==a.mode||6==a.mode||(a.ia?a.Jc():(a.b.play(),a.b.currentTime=0))}};g.prototype.im=function(){for(var b=(this.h.Ha.currentTime-
this.lo)/this.mb,b=Math.min(1,b),a=0;a<this.h.S.length;a++){var d=this.h.S[a];this.h.Vc(d.id)&&1>d.ka&&(d.ka=b)}1==b&&clearInterval(this.ko)};return g}();m.Dl=g})(ggP2VR||(ggP2VR={}));
(function(m){var g=function(){function g(b){this.Kf=[];this.Kc=null;this.Lb=[];this.Ib=[];this.Mb=[];this.Si=!0;this.h=b;this.cm()}g.prototype.Ef=function(){var b=this.h.H,a=b.createShader(b.VERTEX_SHADER);b.shaderSource(a,"attribute vec3 aVertexPosition;\nvoid main(void) {\n gl_Position = vec4(aVertexPosition, 1.0);\n}\n");b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),a=null);var d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCanvasDimensions;\nuniform vec2 uFlareCenterPosition;\nuniform float uBlindingValue;\nuniform float uAspectRatio;\nvoid main(void) {\n float canvasDiag = sqrt( (uCanvasDimensions.x * uCanvasDimensions.x) + (uCanvasDimensions.y * uCanvasDimensions.y) );\n vec2 diff = uFlareCenterPosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromFlarePoint = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = (distFromFlarePoint / canvasDiag) / 10.0;\n gl_FragColor = vec4(1.0, 1.0, 1.0, pow(((1.0 - factor) * 0.8) * uBlindingValue, 2.0));\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.Rb=b.createProgram();b.attachShader(this.Rb,a);b.attachShader(this.Rb,d);b.linkProgram(this.Rb);b.getProgramParameter(this.Rb,b.LINK_STATUS)||alert("Could not initialise shaders");this.Rb.Z=b.getAttribLocation(this.Rb,"aVertexPosition");b.enableVertexAttribArray(this.Rb.Z);d=b.createShader(b.VERTEX_SHADER);a=b.createShader(b.VERTEX_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);b.shaderSource(a,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nattribute vec3 aVertexPosition;\nvarying vec4 vColor;\nuniform vec2 uCirclePosition;\nuniform float uCircleRadius;\nuniform vec2 uCanvasDimensions2;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 circleOnScreen = aVertexPosition.xy * uCircleRadius + uCirclePosition;\n circleOnScreen.y = circleOnScreen.y / uAspectRatio;\n vec2 circleNorm = (circleOnScreen / uCanvasDimensions2) * 2.0 - vec2(1.0, 1.0);\n gl_Position = vec4(circleNorm.x, circleNorm.y, 0.0, 1.0);\n}\n");
b.compileShader(a);b.getShaderParameter(a,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(a)),d=null);var c=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(c,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uCircleTexturePosition;\nuniform vec3 uCircleColor;\nuniform float uCircleRadius;\nuniform float uCircleAlpha;\nuniform float uCircleSoftness;\nuniform float uAspectRatio;\nvoid main(void) {\n vec2 diff = uCircleTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromCircleCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float softnessDistance = uCircleRadius * (1.0 - uCircleSoftness);\n if (distFromCircleCenter > uCircleRadius)\n {\n\t  gl_FragColor = vec4(uCircleColor, 0.0);\n }\n else if (distFromCircleCenter <= (softnessDistance))\n {\n\t  float factor = distFromCircleCenter / softnessDistance;\n\t  gl_FragColor = vec4(uCircleColor, pow((1.0 - (0.2 * factor)) * uCircleAlpha, 1.8));\n }\n else\n {\n\t  float factor = (distFromCircleCenter - softnessDistance) / (uCircleRadius - softnessDistance);\n\t  gl_FragColor = vec4(uCircleColor, pow((0.8 - (0.8 * factor)) * uCircleAlpha, 1.8));\n }\n}\n");
b.compileShader(c);b.getShaderParameter(c,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(c)),c=null);this.pa=b.createProgram();b.attachShader(this.pa,d);b.attachShader(this.pa,c);b.linkProgram(this.pa);b.getProgramParameter(this.pa,b.LINK_STATUS)||alert("Could not initialise shaders");this.pa.Z=b.getAttribLocation(this.pa,"aVertexPosition");b.enableVertexAttribArray(this.pa.Z);d=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(d,"#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nvarying vec4 vColor;\nuniform vec2 uRingTexturePosition;\nuniform float uRingRadius;\nuniform float uRingAlpha;\nuniform float uAspectRatio;\nuniform sampler2D uSampler;\nvoid main(void) {\n vec2 diff = uRingTexturePosition - gl_FragCoord.xy;\n diff.y = diff.y * uAspectRatio;\n float distFromRingCenter = sqrt( (diff.x * diff.x) + (diff.y * diff.y) );\n float factor = distFromRingCenter / uRingRadius;\n if (distFromRingCenter > uRingRadius)\n {\n\t gl_FragColor = vec4(1.0, 1.0, 1.0, 0.0);\n }\n else\n {\n vec4 textureColor = texture2D(uSampler, vec2(factor / uAspectRatio, 0.5));\n gl_FragColor = vec4(textureColor.x, textureColor.y, textureColor.z, uRingAlpha);\n }\n}\n");
b.compileShader(d);b.getShaderParameter(d,b.COMPILE_STATUS)||(alert(b.getShaderInfoLog(d)),d=null);this.kb=b.createProgram();b.attachShader(this.kb,a);b.attachShader(this.kb,d);b.linkProgram(this.kb);b.getProgramParameter(this.kb,b.LINK_STATUS)||alert("Could not initialise shaders");this.kb.Z=b.getAttribLocation(this.kb,"aVertexPosition")};g.prototype.Bc=function(){var b=this.h.H;this.gd=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.gd);b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,
-1,0,1,1,0,-1,1,0]),b.STATIC_DRAW);this.gd.Cc=3;this.gd.Jd=4;this.Ge=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.Ge);for(var a=[0,0,0],d=2*Math.PI/6,c=Math.PI/180*35,e=1,f=c;f<=c+2*Math.PI;f+=d)a.push(Math.sin(f)),a.push(-Math.cos(f)),a.push(0),e++;b.bufferData(b.ARRAY_BUFFER,new Float32Array(a),b.STATIC_DRAW);this.Ge.Cc=3;this.Ge.Jd=e;this.Ok=b.createTexture();b.bindTexture(b.TEXTURE_2D,this.Ok);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,
b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);a=document.createElement("canvas");a.width=100;a.height=1;d=a.getContext("2d");d.width=100;d.height=1;c=d.createLinearGradient(0,0,100,0);c.addColorStop(0,this.h.fa(16777215,0));c.addColorStop(.88,this.h.fa(0,0));c.addColorStop(.9,this.h.fa(16654848,1));c.addColorStop(.92,this.h.fa(16776448,1));c.addColorStop(.94,this.h.fa(4849466,1));c.addColorStop(.96,this.h.fa(131071,
1));c.addColorStop(.98,this.h.fa(8190,1));c.addColorStop(1,this.h.fa(0,0));d.fillStyle=c;d.fillRect(0,0,100,1);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a)};g.prototype.Cn=function(){for(;0<this.Kf.length;)this.Kf.pop()};g.prototype.cm=function(){var b=[],a=[],d=[],c={l:14,alpha:.2,color:11390415,i:.27};b.push(c);c={l:20,alpha:.25,color:11390415,i:.4};b.push(c);c={l:10,alpha:.2,color:12442332,i:.6};b.push(c);c={l:15,alpha:.2,color:11390415,i:.8};b.push(c);c={l:10,alpha:.2,color:12442332,
i:1.5};b.push(c);c={l:15,alpha:.2,color:11390415,i:1.8};b.push(c);c={l:8,alpha:.2,color:12575203,u:.8,i:.7};a.push(c);c={l:7,alpha:.4,color:12575203,u:.5,i:1.6};a.push(c);c={l:5,alpha:.4,color:12575203,u:.6,i:.9};a.push(c);c={l:8,alpha:.3,color:12575203,u:.4,i:1.1};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:30,alpha:.3,color:11390415,i:.5};b.push(c);c={l:10,alpha:.3,color:11390415,i:1};b.push(c);c={l:20,alpha:.3,color:11390415,i:1.3};b.push(c);c={l:10,alpha:.3,color:11390415,
i:1.5};b.push(c);c={l:15,alpha:.3,color:11390415,i:1.8};b.push(c);c={l:10,alpha:.3,color:15506856,u:.8,i:.7};a.push(c);c={l:20,alpha:.5,color:15506856,u:.5,i:1.6};a.push(c);c={l:5,alpha:.5,color:15506856,u:.6,i:.9};a.push(c);c={l:60,alpha:.4,color:15506856,u:.2,i:1.1};a.push(c);d.push({l:220,alpha:.035,i:2});this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:30,alpha:.5,color:15465727,i:.5};b.push(c);c={l:40,alpha:.28,color:15726842,i:.8};b.push(c);c={l:25,alpha:.32,color:15726842,
i:1.1};b.push(c);c={l:15,alpha:.25,color:15726842,i:1.35};b.push(c);c={l:10,alpha:.28,color:15465727,i:1.65};b.push(c);c={l:10,alpha:.45,color:15465727,u:.8,i:.7};a.push(c);c={l:7,alpha:.5,color:15465727,u:.4,i:.9};a.push(c);c={l:40,alpha:.4,color:15465727,u:.3,i:.38};a.push(c);c={l:50,alpha:.4,color:15465727,u:.5,i:1.25};a.push(c);c={l:18,alpha:.2,color:15465727,u:.5,i:1.25};a.push(c);c={l:10,alpha:.34,color:15726842,u:.8,i:1.5};a.push(c);c={l:38,alpha:.37,color:15465727,u:.3,i:-.5};a.push(c);this.Lb.push(b);
this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:16,alpha:.5,color:16363159,i:.1};b.push(c);c={l:26,alpha:.3,color:16091819,i:.32};b.push(c);c={l:29,alpha:.2,color:16091819,i:1.32};b.push(c);c={l:20,alpha:.18,color:16363159,i:1.53};b.push(c);c={l:27,alpha:.13,color:16425092,i:1.6};b.push(c);c={l:20,alpha:.1,color:16091819,i:1.75};b.push(c);c={l:12,alpha:.45,color:16312238,u:.45,i:.2};a.push(c);c={l:8,alpha:.25,color:16434209,u:.7,i:.33};a.push(c);c={l:9,alpha:.25,color:16091819,u:.4,i:.7};a.push(c);
c={l:7,alpha:.2,color:16091819,u:.4,i:.85};a.push(c);c={l:60,alpha:.23,color:16091819,u:.55,i:1.05};a.push(c);c={l:37,alpha:.1,color:16091819,u:.55,i:1.22};a.push(c);c={l:10,alpha:.25,color:16363159,u:.65,i:1.38};a.push(c);c={l:7,alpha:.2,color:16434209,u:.5,i:1.45};a.push(c);c={l:3,alpha:.2,color:16416033,u:.5,i:1.78};a.push(c);c={l:6,alpha:.18,color:16434209,u:.45,i:1.9};a.push(c);c={l:4,alpha:.14,color:16766514,u:.45,i:2.04};a.push(c);c={l:30,alpha:.14,color:16766514,u:.8,i:.04};a.push(c);this.Lb.push(b);
this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:9,alpha:.3,color:14346999,u:.3,i:.3};a.push(c);c={l:5,alpha:.5,color:14148072,u:.8,i:.6};a.push(c);c={l:3,alpha:.37,color:14346999,u:.66,i:.8};a.push(c);c={l:45,alpha:.2,color:14346999,u:.36,i:1.2};a.push(c);c={l:13,alpha:.2,color:14346999,u:.36,i:1.23};a.push(c);c={l:11,alpha:.2,color:14148072,u:.36,i:1.28};a.push(c);c={l:27,alpha:.16,color:14346999,u:.36,i:1.55};a.push(c);c={l:6,alpha:.36,color:14148072,u:.8,i:1.7};a.push(c);this.Lb.push(b);this.Ib.push(a);
this.Mb.push(d);b=[];a=[];d=[];c={l:24,alpha:.2,color:15186464,i:.2};b.push(c);c={l:7,alpha:.26,color:15186464,i:.35};b.push(c);c={l:23,alpha:.18,color:15186464,i:.65};b.push(c);c={l:13,alpha:.2,color:15186464,i:.8};b.push(c);c={l:11,alpha:.15,color:15186464,i:1.4};b.push(c);c={l:15,alpha:.11,color:15451904,i:1.6};b.push(c);c={l:6,alpha:.45,color:15579138,u:.45,i:.22};a.push(c);c={l:3,alpha:.3,color:15451904,u:.25,i:.4};a.push(c);c={l:4,alpha:.2,color:15451904,u:.25,i:.45};a.push(c);c={l:65,alpha:.17,
color:15186464,u:.25,i:.5};a.push(c);c={l:5,alpha:.45,color:15579138,u:.45,i:.88};a.push(c);c={l:140,alpha:.18,color:15579138,u:.32,i:.95};a.push(c);c={l:12,alpha:.22,color:15579138,u:.32,i:1.1};a.push(c);c={l:8,alpha:.32,color:15451904,u:.72,i:1.2};a.push(c);c={l:55,alpha:.2,color:15451904,u:.45,i:1.33};a.push(c);c={l:4,alpha:.3,color:15451904,u:.25,i:1.42};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:10933495,i:.32};b.push(c);c={l:14,alpha:.3,color:11007484,
i:.36};b.push(c);c={l:10,alpha:.3,color:4037331,i:.58};b.push(c);c={l:14,alpha:.22,color:8835068,i:.68};b.push(c);c={l:10,alpha:.27,color:11007484,i:.82};b.push(c);c={l:11,alpha:.27,color:10867450,i:1};b.push(c);c={l:9,alpha:.2,color:6158332,i:1.05};b.push(c);c={l:10,alpha:.17,color:10867450,i:1.78};b.push(c);c={l:10,alpha:.3,color:4037331,i:-.23};b.push(c);c={l:8,alpha:.45,color:8835068,u:.45,i:.175};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:.46};a.push(c);c={l:3,alpha:.3,color:10867450,u:.35,
i:.5};a.push(c);c={l:60,alpha:.37,color:4031699,u:.75,i:.75};a.push(c);c={l:3,alpha:.25,color:4031699,u:.25,i:.75};a.push(c);c={l:3,alpha:.2,color:6158332,u:.25,i:.9};a.push(c);c={l:7,alpha:.45,color:8835068,u:.45,i:1.3};a.push(c);c={l:32,alpha:.22,color:8835068,u:.75,i:1.62};a.push(c);c={l:9,alpha:.45,color:4031699,u:.65,i:1.6};a.push(c);c={l:8,alpha:.25,color:4031699,u:.65,i:1.83};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:-.18};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=
[];a=[];d=[];c={l:16,alpha:.4,color:16389120,i:.32};b.push(c);c={l:26,alpha:.22,color:16389120,i:.4};b.push(c);c={l:26,alpha:.25,color:16389120,i:.65};b.push(c);c={l:18,alpha:.3,color:16389120,i:1.23};b.push(c);c={l:14,alpha:.26,color:16389120,i:1.33};b.push(c);c={l:17,alpha:.18,color:16389120,i:1.7};b.push(c);c={l:30,alpha:.16,color:16389120,i:2.15};b.push(c);c={l:100,alpha:.25,color:16389120,u:.22,i:1.45};a.push(c);c={l:7,alpha:.5,color:15628151,u:.3,i:1.5};a.push(c);c={l:3,alpha:.5,color:15628151,
u:.3,i:1.52};a.push(c);c={l:4,alpha:.5,color:16389120,u:.3,i:1.745};a.push(c);c={l:9,alpha:.22,color:16389120,u:.3,i:1.8};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:10933495,i:.32};b.push(c);c={l:14,alpha:.3,color:11007484,i:.36};b.push(c);c={l:10,alpha:.3,color:4037331,i:.58};b.push(c);c={l:14,alpha:.22,color:8835068,i:.68};b.push(c);c={l:10,alpha:.27,color:11007484,i:.82};b.push(c);c={l:11,alpha:.27,color:10867450,i:1};b.push(c);c={l:9,alpha:.2,
color:6158332,i:1.05};b.push(c);c={l:10,alpha:.17,color:10867450,i:1.78};b.push(c);c={l:10,alpha:.3,color:4037331,i:-.23};b.push(c);c={l:8,alpha:.45,color:8835068,u:.45,i:.175};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:.46};a.push(c);c={l:3,alpha:.3,color:10867450,u:.35,i:.5};a.push(c);c={l:60,alpha:.37,color:4031699,u:.75,i:.75};a.push(c);c={l:3,alpha:.25,color:4031699,u:.25,i:.75};a.push(c);c={l:3,alpha:.2,color:6158332,u:.25,i:.9};a.push(c);c={l:7,alpha:.45,color:8835068,u:.45,i:1.3};a.push(c);
c={l:32,alpha:.22,color:8835068,u:.75,i:1.62};a.push(c);c={l:9,alpha:.45,color:4031699,u:.65,i:1.6};a.push(c);c={l:8,alpha:.25,color:4031699,u:.65,i:1.83};a.push(c);c={l:7,alpha:.4,color:12574715,u:.55,i:-.18};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:16,alpha:.4,color:16389120,i:.32};b.push(c);c={l:26,alpha:.22,color:16389120,i:.4};b.push(c);c={l:26,alpha:.25,color:16389120,i:.65};b.push(c);c={l:18,alpha:.3,color:16389120,i:1.23};b.push(c);c={l:14,alpha:.26,color:16389120,
i:1.33};b.push(c);c={l:17,alpha:.18,color:16389120,i:1.7};b.push(c);c={l:30,alpha:.16,color:16389120,i:2.15};b.push(c);c={l:100,alpha:.25,color:16389120,u:.22,i:1.45};a.push(c);c={l:7,alpha:.5,color:15628151,u:.3,i:1.5};a.push(c);c={l:3,alpha:.5,color:15628151,u:.3,i:1.52};a.push(c);c={l:4,alpha:.5,color:16389120,u:.3,i:1.745};a.push(c);c={l:9,alpha:.22,color:16389120,u:.3,i:1.8};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d);b=[];a=[];d=[];c={l:24,alpha:.2,color:15186464,i:.2};b.push(c);
c={l:7,alpha:.26,color:15186464,i:.35};b.push(c);c={l:23,alpha:.18,color:15186464,i:.65};b.push(c);c={l:13,alpha:.2,color:15186464,i:.8};b.push(c);c={l:11,alpha:.15,color:15186464,i:1.4};b.push(c);c={l:15,alpha:.11,color:15451904,i:1.6};b.push(c);c={l:6,alpha:.45,color:15579138,u:.45,i:.22};a.push(c);c={l:3,alpha:.3,color:15451904,u:.25,i:.4};a.push(c);c={l:4,alpha:.2,color:15451904,u:.25,i:.45};a.push(c);c={l:65,alpha:.17,color:15186464,u:.25,i:.5};a.push(c);c={l:5,alpha:.45,color:15579138,u:.45,
i:.88};a.push(c);c={l:140,alpha:.18,color:15579138,u:.32,i:.95};a.push(c);c={l:12,alpha:.22,color:15579138,u:.32,i:1.1};a.push(c);c={l:8,alpha:.32,color:15451904,u:.72,i:1.2};a.push(c);c={l:55,alpha:.2,color:15451904,u:.45,i:1.33};a.push(c);c={l:4,alpha:.3,color:15451904,u:.25,i:1.42};a.push(c);this.Lb.push(b);this.Ib.push(a);this.Mb.push(d)};g.prototype.nn=function(){if(this.Si){var b=this.h.H,a,d,c,e=new m.sa(0,0,-100),f=this.h.ed(),l,k;if(this.h.ea)l=this.h.ib.width,k=this.h.ib.height,this.h.C.ig&&
(l=this.h.C.Nb.width,k=this.h.C.Nb.height);else{this.R||(this.R=this.Kc.getContext("2d"));if(this.R.width!==this.h.m.width||this.R.height!==this.h.m.height)this.R.width=this.h.m.width,this.R.height=this.h.m.height;this.R.clear?this.R.clear():this.R.clearRect(0,0,this.Kc.width,this.Kc.height);l=this.R.width;k=this.R.height}var g=Math.sqrt(l*l+k*k),h=g/800;for(d=0;d<this.Kf.length;d++){var n=this.Kf[d];e.Ya(0,0,-100);e.wa(-n.j*Math.PI/180);e.Ea(n.pan*Math.PI/180);e.Ea(-this.h.pan.c*Math.PI/180);e.wa(this.h.j.c*
Math.PI/180);e.lb(this.h.M.c*Math.PI/180);var r=!1;if(-.01>e.z){var p,u;u=-f/e.z;p=e.x*u;u*=e.y;Math.abs(p)<l/2+100&&Math.abs(u)<k/2+100&&(r=!0,p+=l/2,u+=k/2)}if(r){this.h.ea&&(b.blendFunc(b.SRC_ALPHA,b.DST_ALPHA),b.enable(b.BLEND),b.disable(b.DEPTH_TEST));var r=l/2,t=k/2;c=Math.sqrt((r-p)*(r-p)+(t-u)*(t-u));var v=g/2,t=l>k?l:k,r=n.oj/100*((v-c)/v);0>r&&(r=0);if(this.h.ea){b.useProgram(this.Rb);b.bindBuffer(b.ARRAY_BUFFER,this.h.C.bb);b.vertexAttribPointer(this.Rb.Z,this.h.C.bb.Cc,b.FLOAT,!1,0,0);
var q=b.getUniformLocation(this.Rb,"uCanvasDimensions");b.uniform2f(q,b.drawingBufferWidth,b.drawingBufferHeight);b.uniform2f(b.getUniformLocation(this.Rb,"uFlareCenterPosition"),b.drawingBufferWidth/l*p,k-b.drawingBufferHeight/k*u);b.uniform1f(b.getUniformLocation(this.Rb,"uBlindingValue"),r);q=b.getUniformLocation(this.Rb,"uAspectRatio");b.uniform1f(q,this.h.C.ig?b.drawingBufferWidth/b.drawingBufferHeight:b.drawingBufferWidth/b.drawingBufferHeight/(l/k));b.drawArrays(b.TRIANGLE_STRIP,0,this.h.C.bb.Jd)}else q=
this.R.createRadialGradient(p,u,1,p,u,t),q.addColorStop(0,"rgba(255, 255, 255, "+r+")"),q.addColorStop(.5,"rgba(255, 255, 255, "+.8*r+")"),q.addColorStop(1,"rgba(255, 255, 255, "+.6*r+")"),this.R.fillStyle=q,this.R.fillRect(0,0,this.R.width,this.R.height);if(0!=Number(n.type)&&!this.h.C.ig){var r=l/2-p,t=k/2-u,x=1,A=Number(n.type)-1;c<.35*v&&(x=c/(.35*v),x*=x);c>.7*v&&(x=(v-c)/(.3*v));x*=n.alpha/100;if(0<this.Lb[A].length)for(c=0;c<this.Lb[A].length;c++){var z=this.Lb[A][c],v=z.l*h;a=z.alpha*x;0>
a&&(a=0);var y=z.color;if(8==A||9==A||10==A)y=n.color;if(this.h.ea)b.useProgram(this.pa),b.bindBuffer(b.ARRAY_BUFFER,this.Ge),b.vertexAttribPointer(this.pa.Z,this.Ge.Cc,b.FLOAT,!1,0,0),q=b.getUniformLocation(this.pa,"uCanvasDimensions2"),b.uniform2f(q,b.drawingBufferWidth,b.drawingBufferHeight),b.uniform2f(b.getUniformLocation(this.pa,"uCirclePosition"),b.drawingBufferWidth/l*(p+r*z.i),b.drawingBufferWidth/l*(k-(u+t*z.i))),b.uniform2f(b.getUniformLocation(this.pa,"uCircleTexturePosition"),b.drawingBufferWidth/
l*(p+r*z.i),k-(u+t*z.i)),b.uniform1f(b.getUniformLocation(this.pa,"uCircleRadius"),v),b.uniform3f(b.getUniformLocation(this.pa,"uCircleColor"),(y>>16&255)/255,(y>>8&255)/255,(y&255)/255),b.uniform1f(b.getUniformLocation(this.pa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.pa,"uCircleSoftness"),.1),q=b.getUniformLocation(this.pa,"uAspectRatio"),b.uniform1f(q,b.drawingBufferWidth/b.drawingBufferHeight/(l/k)),b.drawArrays(b.TRIANGLE_FAN,0,this.Ge.Jd);else{this.R.save();this.R.translate(p+
r*z.i,u+t*z.i);q=this.R.createRadialGradient(0,0,1,0,0,1.1*v);q.addColorStop(0,this.h.fa(y,a));q.addColorStop(.65,this.h.fa(y,.9*a));q.addColorStop(.8,this.h.fa(y,.7*a));q.addColorStop(1,this.h.fa(y,.2*a));this.R.beginPath();var y=2*Math.PI/6,z=Math.PI/180*35,C=!0;for(a=z;a<=z+2*Math.PI;a+=y)C?(this.R.moveTo(v*Math.sin(a),v*Math.cos(a)),C=!1):this.R.lineTo(v*Math.sin(a),v*Math.cos(a));this.R.closePath();this.R.fillStyle=q;this.R.fill();this.R.restore()}}if(0<this.Ib[A].length)for(c=0;c<this.Ib[A].length;c++){z=
this.Ib[A][c];v=z.l*h;a=z.alpha*x;0>a&&(a=0);y=z.color;if(8==A||9==A||10==A)y=n.color;this.h.ea?(b.useProgram(this.pa),b.bindBuffer(b.ARRAY_BUFFER,this.gd),b.vertexAttribPointer(this.pa.Z,this.gd.Cc,b.FLOAT,!1,0,0),q=b.getUniformLocation(this.pa,"uCanvasDimensions2"),b.uniform2f(q,b.drawingBufferWidth,b.drawingBufferHeight),q=b.getUniformLocation(this.pa,"uCirclePosition"),b.uniform2f(q,b.drawingBufferWidth/l*(p+r*z.i),b.drawingBufferWidth/l*(k-(u+t*z.i))),q=b.getUniformLocation(this.pa,"uCircleTexturePosition"),
b.uniform2f(q,b.drawingBufferWidth/l*(p+r*z.i),k-(u+t*z.i)),q=b.getUniformLocation(this.pa,"uCircleRadius"),b.uniform1f(q,v),b.uniform3f(b.getUniformLocation(this.pa,"uCircleColor"),(y>>16&255)/255,(y>>8&255)/255,(y&255)/255),b.uniform1f(b.getUniformLocation(this.pa,"uCircleAlpha"),a),b.uniform1f(b.getUniformLocation(this.pa,"uCircleSoftness"),z.u),q=b.getUniformLocation(this.pa,"uAspectRatio"),b.uniform1f(q,b.drawingBufferWidth/b.drawingBufferHeight/(l/k)),b.drawArrays(b.TRIANGLE_FAN,0,this.gd.Jd)):
(this.R.save(),this.R.translate(p+r*z.i,u+t*z.i),q=this.R.createRadialGradient(0,0,1,0,0,v),q.addColorStop(0,this.h.fa(y,a)),q.addColorStop(1-z.u,this.h.fa(y,.8*a)),q.addColorStop(1,this.h.fa(y,0)),this.R.beginPath(),this.R.arc(0,0,v,0,2*Math.PI,!1),this.R.closePath(),this.R.fillStyle=q,this.R.fill(),this.R.restore())}if(0<this.Mb[A].length)for(c=0;c<this.Mb[A].length;c++)n=this.Mb[A][c],v=n.l*h,a=n.alpha*x,0>a&&(a=0),this.h.ea?(b.useProgram(this.kb),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,
this.Ok),b.bindBuffer(b.ARRAY_BUFFER,this.gd),b.vertexAttribPointer(this.kb.Z,this.gd.Cc,b.FLOAT,!1,0,0),q=b.getUniformLocation(this.kb,"uCanvasDimensions2"),b.uniform2f(q,l,k),q=b.getUniformLocation(this.kb,"uCirclePosition"),b.uniform2f(q,p+r*n.i,k-(u+t*n.i)),q=b.getUniformLocation(this.kb,"uRingTexturePosition"),b.uniform2f(q,b.drawingBufferWidth/l*(p+r*n.i),k-(u+t*n.i)),q=b.getUniformLocation(this.kb,"uCircleRadius"),b.uniform1f(q,v),b.uniform2f(b.getUniformLocation(this.kb,"uRingPosition"),p+
r*n.i,k-(u+t*n.i)),b.uniform1f(b.getUniformLocation(this.kb,"uRingRadius"),v),b.uniform1f(b.getUniformLocation(this.kb,"uRingAlpha"),a),q=b.getUniformLocation(this.kb,"uAspectRatio"),b.uniform1f(q,b.drawingBufferWidth/b.drawingBufferHeight/(l/k)),b.uniform1i(b.getUniformLocation(this.kb,"uSampler"),0),b.drawArrays(b.TRIANGLE_FAN,0,this.gd.Jd)):(this.R.save(),this.R.translate(p+r*n.i,u+t*n.i),q=this.R.createRadialGradient(0,0,0,0,0,v),q.addColorStop(0,this.h.fa(16777215,0)),q.addColorStop(.88,this.h.fa(0,
0)),q.addColorStop(.9,this.h.fa(16654848,a)),q.addColorStop(.92,this.h.fa(16776448,a)),q.addColorStop(.94,this.h.fa(4849466,a)),q.addColorStop(.96,this.h.fa(131071,a)),q.addColorStop(.98,this.h.fa(8190,a)),q.addColorStop(1,this.h.fa(0,0)),this.R.beginPath(),this.R.arc(0,0,v,0,2*Math.PI,!1),this.R.closePath(),this.R.fillStyle=q,this.R.fill(),this.R.restore())}this.h.ea&&(b.useProgram(this.h.ma.F),b.disable(b.BLEND),b.enable(b.DEPTH_TEST))}}}};return g}();m.Al=g})(ggP2VR||(ggP2VR={}));var O=!1;
(function(m){var g=function(){return function(){this.f=this.j=this.pan=0}}(),h=function(){function b(a,d){this.pan={c:0,Pa:0,min:0,max:360,d:0,Ci:0,dd:0};this.j={c:0,Pa:0,min:-90,max:90,d:0,dd:0};this.M={c:0,Pa:0,min:-180,max:180,d:0};this.mc={pan:0,j:-90,M:0,f:170,Bb:9};this.f={c:70,Pa:70,min:1,Pf:0,max:170,wi:360,xi:270,Ne:0,d:0,mode:0,bl:0,wj:0};this.Da={M:0,pitch:0};this.m={width:10,height:10};this.jb=0;this.Th=new m.sa;this.crossOrigin="anonymous";this.Za=this.dh=4;this.Tc=this.qg=this.Rf=this.gc=
0;this.Y={start:{x:0,y:0},ba:{x:0,y:0},pd:{x:0,y:0},c:{x:0,y:0},aa:{x:0,y:0}};this.X={gb:!1,Bj:0,startTime:0,start:{x:0,y:0},ba:{x:0,y:0},pd:{x:0,y:0},c:{x:0,y:0},aa:{x:0,y:0}};this.bi=!0;this.va={enabled:!0,ba:{x:0,y:0},aa:{x:0,y:0},Oi:0,f:{active:!1,Wb:0}};this.o={src:[],ve:4,width:640,height:480,nd:!1,Tg:!1,cl:!1,Zd:"loop",b:HTMLVideoElement=null,fl:!1,ic:WebGLTexture=null,fj:WebGLBuffer=null,qh:WebGLBuffer=null,ni:WebGLBuffer=null,format:1,Mg:0,ei:1};this.ee=0;this.ha=this.ta=this.Ba=this.U=this.Ub=
this.ob=this.B=null;this.be="pano";this.di="flashcontainer";this.Uh="";this.control=null;this.Hb=[];this.ya=!1;this.Fg=1;this.N=null;this.Ad=this.gf=this.Cf=!1;this.ef=0;this.cd=.02;this.Gh=0;this.Hh=!1;this.Fh=this.tg=this.ff=this.ue=this.mj=0;this.zb="";this.Se=this.tc=!1;this.eh=0;this.Bg=[];this.De=[];this.Xe=this.jc=1;this.jf=1024;this.Uf=!1;this.uk=200;this.la=0;this.yd=5;this.mi=this.gl=this.Fb=0;this.s={enabled:!1,timeout:5,active:!1,hg:!1,speed:.4,sh:0,ah:0,Bi:!0,dj:!1,bd:!1,nj:!1,zi:!1,
Wi:!1,startTime:0,od:0,Ig:!1,Cg:!1,Xg:0};this.v={active:!1,te:!1,speed:.1,pan:0,j:0,M:0,f:70,xd:70,mk:0,pk:0,nk:0,lk:0,Bb:0,Tf:0,pi:0,cj:!1,Ai:!1,lj:0,kj:0};this.Qa=null;this.af={};this.ej={};this.Dg=[];this.w={mode:1,If:-1,oa:0,eb:0,Ic:.05,Tb:255,Sb:1,Qb:255,Pb:.3,Ie:!0,Yi:{enabled:!0,width:180,height:20,Zi:0,Xi:1,background:!0,Qb:16777215,Pb:1,Tb:0,Sb:1,Jh:3,Kh:1,Ch:!0},cb:[],Eb:[],Dc:[],nh:[]};this.ua=null;this.P=[];this.S=[];this.J=[];this.Xa=[];this.pe=[];this.La=[];this.Ia=[];this.V=1;this.ma=
this.Cd=this.Be=null;this.pf={};this.addListener=function(a,d){(this.pf[a]=this.pf[a]||[]).push(d)};this.il=function(a,d){var b=this.pf[a],l,k;if(b)for(k=0,l=b.length;k<l;k++)b[k].apply(null,d)};this.removeEventListener=function(a,d){var b=this.pf[a];if(b){var l,k;k=0;for(l=b.length;k<l;k++)if(b[k]===d){1===l?delete this.pf[a]:b.splice(k,1);break}}};this.g=new m.El;this.mn={target:0,current:0,Ic:.01,fm:2,Xh:0,Eg:!1,Ql:!1};this.margin={left:0,top:0,right:0,bottom:0};this.A={Lf:!1,ui:!1,yb:!1,qd:!1,
ld:!0,bk:!1,$k:1,Qk:!1,Wh:!0,nf:!0,zg:!1,Df:!1,Sk:!0,sensitivity:8};this.Of=[];this.Nc=!0;this.ra={x:0,y:0};this.ng=this.vb=this.mg=this.Ec=this.ea=!1;this.zh=this.rl=!0;this.li=!1;this.ae=!0;this.ki=!1;this.Ja=this.Bd="";this.Pc="transition";this.Va="transform";this.fd="perspective";this.zj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYBgeACDAAADIAAE3iTbkAAAAAElFTkSuQmCC";this.ib={width:0,height:0};this.Fj=new m.sa;
this.Ej=new m.sa;this.Gj=new m.sa;this.Hj=new m.sa;this.Dj=new m.sa;this.Gf=!1;this.kk=this.Vb="";this.gj=[];this.vh=[];this.Ug=this.fk=this.Qg=this.gk=this.Hd=this.dk=this.Pi=this.Id=this.Rg=this.ek=!1;this.Ah=!0;this.ck=!1;this.Yj=[];this.devicePixelRatio=1;this.ga=this.C=null;this.xg=!1;this.Fa=null;this.qb={enabled:!1,speed:1,ud:!1,ai:!0};this.zk=!1;this.fb=new m.Fl;this.bj=!1;this.mf=function(a,d){if(0==a.length)return a;var b,l,k,g,h,n,r,p;p=[];b=d.fh(a[0])-0;for(g=0;g<a.length;g++){n=g;r=g+
1;r==a.length&&(r=0);l=d.fh(a[r])-0;if(0<=b&&0<=l)p.push(a[n]);else if(0<=b||0<=l)k=l/(l-b),0>k&&(k=0),1<k&&(k=1),h=new m.sa,h.kd(a[n],a[r],k),0>b||p.push(a[n]),p.push(h);b=l}return p};this.Ti=0;this.Wg=-1;this.wf=function(a){return a?a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:a.clientX||a.clientY?{x:a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,y:a.clientY+document.body.scrollTop+document.documentElement.scrollTop}:a.touches&&a.touches[0]?{x:a.touches[0].pageX,y:a.touches[0].pageY}:
{x:0,y:0}:{x:0,y:0}};this.$g=1;this.jm=this.Jg=this.jk=this.Yh=this.Ki=this.gh=0;this.$d=!0;this.pb=new m.Vg(this);this.pb.Ie=!1;this.yj();this.Ue(this.pb);this.checkLoaded=this.Hb;this.isLoaded=!1;d&&d.hasOwnProperty("useFlash")&&d.useFlash&&(this.vb=!0,this.ea=this.Ec=!1,d.hasOwnProperty("flashPlayerId")?this.be=d.flashPlayerId:this.be="pano",d.hasOwnProperty("flashContainerId")?this.di=d.flashContainerId:this.di=a+"flash");this.qa();this.vb||(this.Ca=new m.Al(this));this.tj(a);this.Pl();this.userdata=
this.af=this.Gg();this.emptyHotspot=this.pb;this.mouse=this.ra;this.Dn();this.C=new m.Cl(this);this.Fa=new m.Dl(this);this.ma=new m.Jl(this)}b.prototype.Rh=function(){this.C.enabled=this.ga.enabled;this.C.type=this.ga.type;this.C.Na=this.ga.zoomin;this.C.Ob=this.ga.zoomout;this.C.ug=this.ga.blendtime;this.C.df=this.ga.zoomoutpause;this.C.cf=this.ga.zoomfov;this.C.Qd=this.ga.zoomspeed;this.C.we=this.ga.blendcolor;this.C.uc=this.ga.softedge;this.ga=null};b.prototype.Zn=function(a){this.ga={};this.ga.enabled=
!0;this.ga.type=this.C.type;this.ga.zoomin=this.C.Na;this.ga.zoomout=this.C.Ob;this.ga.blendtime=this.C.ug;this.ga.zoomoutpause=this.C.df;this.ga.zoomfov=this.C.cf;this.ga.zoomspeed=this.C.Qd;this.ga.blendcolor=this.C.we;this.ga.softedge=this.C.uc;if(a.hasOwnProperty("type")){var d=a.type;if("cut"==d||"crossdissolve"==d||"diptocolor"==d||"irisround"==d||"irisrectangular"==d||"wipeleftright"==d||"wiperightleft"==d||"wipetopbottom"==d||"wipebottomtop"==d||"wiperandom"==d)this.ga.type=d}a.hasOwnProperty("before")&&
(d=Number(a.before),0==d||2==d)&&(this.ga.zoomin=d);a.hasOwnProperty("after")&&(d=Number(a.after),0==d||2==d||3==d||4==d)&&(this.ga.zoomout=d);a.hasOwnProperty("transitiontime")&&(d=Number(a.transitiontime),0<=d&&50>=d&&(this.ga.blendtime=d));a.hasOwnProperty("waitfortransition")&&(this.ga.zoomoutpause=1==a.waitfortransition);a.hasOwnProperty("zoomedfov")&&(d=Number(a.zoomedfov),.01<=d&&50>=d&&(this.ga.zoomfov=d));a.hasOwnProperty("zoomspeed")&&(d=Number(a.zoomspeed),.01<=d&&99>=d&&(this.ga.zoomspeed=
d));a.hasOwnProperty("dipcolor")&&(this.ga.blendcolor=a.dipcolor);a.hasOwnProperty("softedge")&&(a=Number(a.softedge),0<=a&&1E3>=a&&(this.ga.softedge=a));this.xg||this.Rh()};b.prototype.Yc=function(a,d,c){var b=d?Number(d):0;if(0!=a&&4!=a&&12!=a&&9!=a)this.Wc("Unsupported projection type: "+a);else if(d&&0!==b&&4!==b&&12!==b&&9!==b)this.Wc("Unsupported projection2 type: "+b);else if(a==b&&(b=0),this.Rf=c?Number(c):1,this.Za!=a||this.gc!=b)this.Za=a,this.gc=b,this.ma.Pg()};b.prototype.za=function(){return 0==
this.Za?4:this.Za};b.prototype.Nh=function(a,d){if(0!=a&&4!=a&&12!=a&&9!=a)this.Wc("Unsupported projection type: "+a);else if(this.ea||0==a||4==a||this.Wc("Projection changes require WebGL!"),this.za()!=a){var c={};c.pan=this.pan.c;c.tilt=this.j.c;c.fov=this.f.c;c.projection=a;c.timingFunction=3;c.speed=d;var b=this.vf(a);c.fov=Math.min(b,c.fov);this.Zg(c)}};b.prototype.yj=function(){var a;this.devicePixelRatio=window.devicePixelRatio||1;this.ek=navigator.userAgent.match(/(MSIE)/g)?!0:!1;this.Rg=
navigator.userAgent.match(/(Firefox)/g)?!0:!1;if(this.Id=navigator.userAgent.match(/(Safari)/g)?!0:!1)a=navigator.userAgent.indexOf("Safari"),this.vd=navigator.userAgent.substring(a+7),a=navigator.userAgent.indexOf("Version"),-1!=a&&(this.vd=navigator.userAgent.substring(a+8)),this.vd=this.vd.substring(0,this.vd.indexOf(" ")),this.vd=this.vd.substring(0,this.vd.indexOf(".")),this.Pi=!0;if(this.dk=navigator.userAgent.match(/(Chrome)/g)?!0:!1)this.Id=!1;this.Hd=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?
!0:!1;this.gk=navigator.userAgent.match(/(iPhone|iPod)/g)?!0:!1;this.Qg=navigator.userAgent.match(/(android)/i)?!0:!1;this.fk=navigator.userAgent.match(/(IEMobile)/i)?!0:!1;this.Ug=this.Hd||this.Qg||this.fk;/iP(hone|od|ad)/.test(navigator.platform)&&(a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),this.Yj=[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||"0",10)]);a=["Webkit","Moz","O","ms","Ms"];var d;this.Ja="";this.Pc="transition";this.Va="transform";this.fd="perspective";for(d=0;d<a.length;d++)"undefined"!==
typeof document.documentElement.style[a[d]+"Transform"]&&(this.Ja="-"+a[d].toLowerCase()+"-",this.Pc=a[d]+"Transition",this.Va=a[d]+"Transform",this.fd=a[d]+"Perspective");this.li=G();this.ea=N();this.Ec=this.li;this.ea&&(this.Ec=!1);this.tc=!0;this.Se=!1;if(this.Hd||this.Qg)this.Tk(80),this.yd=2;this.Wc("Pano2VR player - Prefix:"+this.Ja+", "+(this.li?"CSS 3D available":"CSS 3D not available")+", "+(this.ea?"WebGL available":"WebGL not available"));try{window.AudioContext=window.AudioContext||window.webkitAudioContext,
this.Ha=new AudioContext}catch(c){this.Ha=null}this.Id&&(!this.Pi||9>Number(this.vd))&&(this.Ha=null);this.Ah=this.gk?this.Id&&this.Pi&&10<=Number(this.vd)?!0:!1:!0};b.prototype.O=function(a){if(O){var d=document.getElementById("debug");d&&(d.innerHTML=a.toString()+"<br />");window.console&&window.console.log(a)}};b.prototype.Wc=function(a){var d=document.getElementById("debug");d&&(d.innerHTML=a+"<br />");window.console&&window.console.log(a)};b.prototype.Dn=function(){this.requestAnimationFrame=
function(){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;return a?a:function(a){window.setTimeout(a,10)}}()};b.prototype.Tk=function(a){this.uk=a};b.prototype.In=function(a){this.crossOrigin=a};b.prototype.Kn=function(a){this.Je=a};b.prototype.Fm=function(){return this.eh};b.prototype.Hn=function(a){this.Bd=a};b.prototype.nm=function(){return this.Bd};b.prototype.um=function(){return this.Ug};
b.prototype.sm=function(){return this.s.active};b.prototype.Mn=function(a){this.Ug=!!a};b.prototype.Kg=function(){return this.isLoaded};b.prototype.ed=function(){return 1*this.m.height/(2*Math.tan(Math.PI/180*(this.Kb()/2)))};b.prototype.Vk=function(a,d){this.isFullscreen&&(a=window.innerWidth,d=window.innerHeight);var c=a-this.margin.left-this.margin.right,b=d-this.margin.top-this.margin.bottom;if(!(10>c||10>b)){var f=window.devicePixelRatio||1;this.Uf&&(f=1);this.B.style.width=c+"px";this.B.style.height=
b+"px";this.B.style.left=this.margin.left+"px";this.B.style.top=this.margin.top+"px";if(this.ea)try{this.ob&&(this.ob.style.position="absolute",this.ob.style.display="inline",this.ob.style.width=c+"px",this.ob.style.height=b+"px",this.ob.width=c*f,this.ob.height=b*f),this.H&&(this.ib.width=c*f,this.ib.height=b*f,this.H.viewport(0,0,this.H.drawingBufferWidth,this.H.drawingBufferHeight))}catch(l){alert(l)}this.Ub&&(this.Ub.style.width=a+"px",this.Ub.style.height=d+"px",this.Ub.width=a,this.Ub.height=
d);this.Ba&&(this.Ba.style.width=a+"px",this.Ba.style.height=d+"px",this.ta.style.width=a+"px",this.ta.style.height=d+"px",this.ta.width=a,this.ta.height=d,this.ta.style.left=this.margin.left+"px",this.ta.style.top=this.margin.top+"px",this.N&&this.N!=this.Ba&&(this.N.style.width=a+"px",this.N.style.height=d+"px"));this.Ca&&(c=this.Ca.Kc,c.style.width=a+"px",c.style.height=d+"px",c.width=a,c.height=d,c.style.left=this.margin.left+"px",c.style.top=this.margin.top+"px");this.Cf&&(this.ya=!0);c=this.B.offsetWidth;
b=this.B.offsetHeight;if(this.m.width!=c||this.m.height!=b)this.m.width=c,this.m.height=b;this.Io();this.N&&this.N.ggUpdateSize&&this.N.ggUpdateSize(a,d)}};b.prototype.se=function(){this.bj=!0};b.prototype.ad=function(){this.Vk(this.Be.offsetWidth,this.Be.offsetHeight)};b.prototype.Rm=function(){var a={width:0,height:0};a.width=this.m.width;a.height=this.m.height;return a};b.prototype.ce=function(){var a={x:0,y:0},d=this.B;if(d.offsetParent){do a.x+=d.offsetLeft,a.y+=d.offsetTop,d=d.offsetParent;
while(d)}return a};b.prototype.Yn=function(a){this.Qa=a};b.prototype.On=function(a,d,c,b){this.margin.left=a;this.margin.top=d;this.margin.right=c;this.margin.bottom=b;this.Qa=this.skinObj;this.se()};b.prototype.Yl=function(a){0==a&&(this.A.ld=!1);1==a&&(this.A.ld=!0);2==a&&(this.A.ld=this.A.ld?!1:!0)};b.prototype.Pm=function(){return 1==this.A.ld?1:0};b.prototype.qj=function(a,d){this.w.mode=1==d&&0<this.w.mode?0:Math.round(a);this.update();this.ha&&(this.ha.changePolygonMode(a,d),this.ha.update())};
b.prototype.Xk=function(a){var d=this.w.cb.indexOf(a);-1==d?(this.w.cb.push(a),this.w.Eb.push(0),this.w.Dc.push(1)):this.w.Dc[d]=1;this.update()};b.prototype.Wj=function(a){var d=this.w.cb.indexOf(a);-1!=d&&(this.w.Dc[d]=0,this.w.nh.push(a),this.update())};b.prototype.uo=function(a){var d=this.w.cb.indexOf(a);-1==d||-1!=d&&0==this.w.Dc[d]?this.Xk(a):this.Wj(a);this.update()};b.prototype.Wl=function(a,d,c,b,f){for(var l=0;l<this.P.length;l++){var k=this.P[l];"poly"!=k.type||k.id!=a&&""!=a||(k.Qb=d,
k.Pb=c,k.Tb=b,k.Sb=f)}""==a&&(this.w.Qb=d,this.w.Pb=c,this.w.Tb=b,this.w.Sb=f);this.update()};b.prototype.Ul=function(a){this.Ca&&(this.Ca.Si=0==a?!0:1==a?!1:!this.Ca.Si,this.update())};b.prototype.Hm=function(){return this.w.mode};b.prototype.Zl=function(){};b.prototype.Qm=function(){return 0};b.prototype.Zj=function(a,d,c){a=Math.atan2(a+1,c);var b=Math.atan2(d+1,c);d=Math.sin(a);c=Math.sin(b);a=Math.cos(a);b=Math.cos(b);this.Fj.Ya(0,0,-1);this.Ej.Ya(a,0,-d);this.Gj.Ya(-a,0,-d);this.Hj.Ya(0,b,-c);
this.Dj.Ya(0,-b,-c)};b.prototype.Qh=function(a){a=this.mf(a,this.Fj);a=this.mf(a,this.Ej);a=this.mf(a,this.Gj);a=this.mf(a,this.Hj);return a=this.mf(a,this.Dj)};b.prototype.kl=function(a){if(!this.tc&&this.$m!=a){this.$m=a;var d;d=this.margin.left+this.m.width/2+"px ";d+=this.margin.top+this.m.height/2+"px ";this.Ba.style[this.fd]=a+"px";this.Ba.style[this.fd+"Origin"]=d;this.B.style[this.fd]=a+"px";this.B.style[this.fd+"Origin"]=d}};b.prototype.ho=function(){return this.C.qe||this.C.zd||this.ea&&
(4!=this.Za||0!=this.gc)?!1:!0};b.prototype.kg=function(){var a,d=new m.sa(0,0,-100),c=this.ed(),b,f,l;f=100/this.f.c;l=this.g.width/this.g.height;b=this.m.height*f*l;f*=this.m.height;for(var k=this.ho(),g=0;g<this.P.length;g++){var h=this.P[g],n,r;"point"==h.type&&(r=!1,2==this.jb?(a=(this.pan.c-h.pan)/100/l*b,n=(this.j.c-h.j)/100*f,Math.abs(a)<this.m.width/2+500&&Math.abs(n)<this.m.height/2+500&&(r=!0)):(d.Ya(0,0,-100),d.wa(-h.j*Math.PI/180),d.Ea(h.pan*Math.PI/180),d.Ea(-this.pan.c*Math.PI/180),
d.wa(this.j.c*Math.PI/180),d.lb(this.M.c*Math.PI/180),.01>d.z?(n=-c/d.z,a=d.x*n,n*=d.y,Math.abs(a)<this.m.width/2+500&&Math.abs(n)<this.m.height/2+500&&(r=!0)):n=a=0),h.hc=a+this.m.width/2,h.Cb=n+this.m.height/2,h.b&&h.b.__div&&("none"!=h.b.__div.style[this.Pc]&&(h.b.__div.style[this.Pc]="none"),h.b.ggUse3d?(this.tc||this.kl(c),h.b.__div.style.width="1px",h.b.__div.style.height="1px",a="",this.tc&&(a+="perspective("+c+"px) "),a+="translate3d(0px,0px,"+c+"px) ",a+="rotateZ("+this.M.c.toFixed(10)+"deg) ",
a+="rotateX("+this.j.c.toFixed(10)+"deg) ",a+="rotateY("+(-this.pan.c).toFixed(10)+"deg) ",a+="rotateY("+h.pan.toFixed(10)+"deg) ",a+="rotateX("+(-h.j).toFixed(10)+"deg) ",a+="translate3d(0px,0px,"+(-1*h.b.gg3dDistance).toFixed(10)+"px) ",h.b.__div.style[this.Va+"Origin"]="0% 0%",h.b.__div.style[this.Va]=a,h.b.__div.style.left=this.margin.left+this.m.width/2+"px",h.b.__div.style.top=this.margin.top+this.m.height/2+"px"):r&&k?(h.b.__div.style.left=this.margin.left+a+this.m.width/2+"px",h.b.__div.style.top=
this.margin.top+n+this.m.height/2+"px"):(h.b.__div.style.left="-1000px",h.b.__div.style.top="-1000px")));if("poly"==h.type){var p=[];if(2==this.jb)for(h.Ld=[],r=0;r<h.og.length;r++)n=h.og[r],a=(this.pan.c-n.pan)/100/l*b,n=(this.j.c-n.j)/100*f,a+=this.margin.left+this.m.width/2,n+=this.margin.top+this.m.height/2,h.Ld.push({hc:a,Cb:n});else{for(r=0;r<h.og.length;r++)n=h.og[r],d.Ya(0,0,-100),d.wa(-n.j*Math.PI/180),d.Ea(n.pan*Math.PI/180),d.Ea(-this.pan.c*Math.PI/180),d.wa(this.j.c*Math.PI/180),d.lb(this.M.c*
Math.PI/180),p.push(d.clone());p=this.Qh(p);if(0<p.length)for(r=0;r<p.length;r++)d=p[r],.1>d.z?(n=-c/d.z,a=this.m.width/2+d.x*n,n=this.m.height/2+d.y*n):n=a=0,d.hc=a,d.Cb=n;h.Ld=p}}}};b.prototype.om=function(){for(var a=[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&c.b&&c.b.__div&&a.push(c.b.__div)}return a};b.prototype.fa=function(a,d){a=Number(a);isNaN(d)&&(d=0);0>d&&(d=0);1<d&&(d=1);return"rgba("+(a>>16&255)+","+(a>>8&255)+","+(a&255)+","+d+")"};b.prototype.on=function(){var a,d;
if(this.ta&&(this.w.If!=this.w.mode&&(this.w.If=this.w.mode,this.ta.style.visibility=0<this.w.mode?"inherit":"hidden"),0<=this.w.mode||0<this.w.cb.length)){this.$||(this.$=this.ta.getContext("2d"));if(this.$.width!=this.m.width||this.$.height!=this.m.height)this.$.width=this.m.width,this.$.height=this.m.height;this.$.clear?this.$.clear():this.$.clearRect(0,0,this.ta.width,this.ta.height);var c=1;0>=this.w.mode&&(c=0);3==this.w.mode&&(c=this.w.oa);for(a=0;a<this.P.length;a++){d=this.P[a];var b=c;if("poly"==
d.type){var f=d.Ld;2==this.w.mode&&(b=d.oa);var l=this.w.cb.indexOf(d.id);-1!=l&&(b=this.w.Eb[l]);this.$.fillStyle=this.fa(d.Qb,d.Pb*b);this.$.strokeStyle=this.fa(d.Tb,d.Sb*b);if(0<f.length){this.$.beginPath();for(d=0;d<f.length;d++)b=f[d],0==d?this.$.moveTo(b.hc,b.Cb):this.$.lineTo(b.hc,b.Cb);this.$.closePath();this.$.stroke();this.$.fill()}}}}};b.prototype.Xj=function(a,d,c){var b,f,l=!1;b=0;for(f=a.length-1;b<a.length;f=b++){var k=a[b];f=a[f];k.Cb>c!=f.Cb>c&&d<(f.hc-k.hc)*(c-k.Cb)/(f.Cb-k.Cb)+
k.hc&&(l=!l)}return l};b.prototype.Ph=function(a,d){var c=-1;if((0<=this.w.mode||0<this.w.cb.length)&&this.Wm())for(var b=0;b<this.P.length;b++){var f=this.P[b];"poly"==f.type&&f.Ld&&0<f.Ld.length&&(-1!=this.w.mode||-1!=this.w.cb.indexOf(f.id))&&this.Xj(f.Ld,a,d)&&(c=b,f.hc=a,f.Cb=d)}return 0<=c?this.P[c]:!1};b.prototype.Wm=function(){return 4==this.za()&&0==this.gc};b.prototype.Kb=function(){var a=0,d=this.za(),c=this.m;switch(this.f.mode){case 0:a=this.f.c/2;break;case 1:a=4==d?180*Math.atan(c.height/
c.width*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/c.width*this.f.c/2;break;case 2:a=Math.sqrt(c.width*c.width+c.height*c.height);a=4==d?180*Math.atan(c.height/a*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:c.height/a*this.f.c/2;break;case 3:a=4*c.height/3>c.width?this.f.c/2:4==d?180*Math.atan(4*c.height/(3*c.width)*Math.tan(this.f.c/2*Math.PI/180))/Math.PI:4*c.height/(3*c.width)*(this.f.c/2)}return 2*a};b.prototype.qm=function(a,d){a||(a=this.Kb());d||(d=this.za());return 4==d?180*Math.atan(this.Rd()*
Math.tan(a/2*Math.PI/180))/Math.PI:a*this.Rd()};b.prototype.Rd=function(){return this.m.width/this.m.height};b.prototype.bg=function(a){a/=2;var d,c=this.za();switch(this.f.mode){case 0:this.f.c=2*a;break;case 1:a=4==c?180*Math.atan(this.m.width/this.m.height*Math.tan(a*Math.PI/180))/Math.PI:this.m.width/this.m.height*a;this.f.c=2*a;break;case 2:d=Math.sqrt(this.m.width*this.m.width+this.m.height*this.m.height);a=4==c?180*Math.atan(d/this.m.height*Math.tan(a*Math.PI/180))/Math.PI:d/this.m.height*
a;this.f.c=2*a;break;case 3:4*this.m.height/3>this.m.width||(d=3*this.m.width/(4*this.m.height),a=4==c?180*Math.atan(d*Math.tan(a*Math.PI/180))/Math.PI:d*a),this.f.c=2*a}};b.prototype.yg=function(){var a=new g;a.pan=this.pan.c;a.j=this.j.c;a.f=this.f.c;this.Ae(a);this.Ae(a);this.Ae(a);this.pan.c=a.pan;this.j.c=a.j;this.f.c=a.f};b.prototype.Ae=function(a){var d,c,b=this.m.width/this.m.height;if(2==this.jb){0<this.f.Pf&&(d=this.jc,this.g.I&&0<this.g.I.length&&(d=this.g.I[0].height),this.f.min=100*this.m.height/
(d*this.f.Pf));c=a.f/2;d=c*b;var f=this.g.width/this.g.height*50,b=this.A.Sk?2*Math.min(50,f/b):2*Math.max(50,f/b);a.f<this.f.min&&(a.f=this.f.min);a.f>b&&(a.f=b);50<c?a.j=0:(50<a.j+c&&(a.j=50-c),-50>a.j-c&&(a.j=-50+c));d>f?a.pan=0:(a.pan+d>f&&(a.pan=f-d,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0)),a.pan-d<-f&&(a.pan=-f+d,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0)))}else{0<this.f.Pf&&(d=this.jc,this.g.I&&0<this.g.I.length&&(d=this.g.I[0].height),this.f.min=360*Math.atan2(this.m.height/
2,d/2*this.f.Pf)/Math.PI);a.f<this.f.min&&(a.f=this.f.min);var f=this.f.max,l=179;c=this.Kb()/2;d=b*c;4==this.za()?d=180*Math.atan(b*Math.tan(c*Math.PI/180))/Math.PI:9==this.za()?(f=this.f.xi,l=355):12==this.za()&&(f=this.f.wi,l=360);this.ea||(f=Math.max(160,f));a.f>f&&(a.f=f);12==this.za()&&(2*d>l&&(a.f=l/b),c=this.Kb()/2,2*c>l&&(a.f=l),c=this.Kb()/2,d=b*c);2*c>this.j.max-this.j.min&&180>this.j.max-this.j.min&&(c=(this.j.max-this.j.min)/2,this.bg(2*c));90>this.j.max?a.j+c>this.j.max&&(a.j=this.j.max-
c):a.j>this.j.max&&(a.j=this.j.max);-90<this.j.min?a.j-c<this.j.min&&(a.j=this.j.min+c):a.j<this.j.min&&(a.j=this.j.min);b=this.pan.max-this.pan.min;if(359.99>b){var f=90,l=Math.tan(c*Math.PI/180),k=Math.tan((Math.abs(a.j)+c)*Math.PI/180),k=Math.sqrt(k*k+1)/Math.sqrt(l*l+1);c=180*Math.atan(k*Math.tan(d*Math.PI/180))/Math.PI;2*c>b&&(k=Math.tan(b*Math.PI/360)/Math.tan(d*Math.PI/180),b=k*Math.sqrt(l*l+1),k=Math.sqrt(b*b-1),f=180/Math.PI*Math.atan(k));a.pan+c>this.pan.max&&(a.pan=this.pan.max-c,this.s.active&&
(this.s.speed=-this.s.speed,this.pan.d=0));a.pan-c<this.pan.min&&(a.pan=this.pan.min+c,this.s.active&&(this.s.speed=-this.s.speed,this.pan.d=0));a.j+d>f&&(a.j=f-d);a.j-d<-f&&(a.j=-f+d)}}};b.prototype.update=function(a){void 0===a&&(a=0);this.ya=!0;a&&(this.Fg=a)};b.prototype.vm=function(){return this.ha?!!this.ha.isTileLoading:0<this.la||0<this.Fb||0<this.ma.la||0<this.ma.Fb};b.prototype.lg=function(){var a=Date.now(),d;this.vb?this.ha&&(this.Bo(),2===this.jb?(this.yg(),this.kg()):0===this.jb&&(d=
this.ed(),this.Zj(this.m.width/2,this.m.height/2,d),this.kg())):2===this.jb?(this.kg(),this.ea?(this.ma.$i(),this.ma.Bk()):this.$i()):0===this.jb&&(!this.ea||4==this.Za&&0==this.gc?(d=this.ed(),this.Zj(this.m.width/2,this.m.height/2,d),this.kg(),this.ng?this.ma.Ho():this.rl&&this.ql(),this.ll(),this.ea?(this.o.nd?14==this.o.format?this.ma.Go():this.ma.vl():0<this.g.I.length?this.ma.No():this.ma.Po(),this.ma.Bk()):(this.Ec?0<this.g.I.length?this.Eo():this.Do():this.mg&&this.Ao(),this.on()),this.Ca&&
this.Ca.nn()):(this.ma.vl(),this.kg(),this.Vm()));d=Date.now();50<d-a?(this.O("Time between frames: "+(d-a)),this.Uf||(2<this.Ti?(this.Uf=!0,this.O("disabling HighDPI rendering"),this.ad()):this.Ti++)):this.Ti=0;this.Cf&&this.g.Nk++};b.prototype.Do=function(){var a=!1;if(this.m.width!=this.B.offsetWidth||this.m.height!=this.B.offsetHeight)this.m.width=this.B.offsetWidth,this.m.height=this.B.offsetHeight,this.B.style[this.Va+"OriginX"]=this.m.width/2+"px",this.B.style[this.Va+"OriginY"]=this.m.height/
2+"px",a=!0;var d=Math.round(this.ed());this.Jf==d&&!a||this.tc||(this.Jf=d,this.B.style[this.fd]=d+"px");this.fb.bm(this.pan.c,this.j.c,this.M.c,this.Da);for(a=0;6>a;a++){var c,b;if(c=this.fb.$a[a])b="",this.tc?(b+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,0px) ",b+="perspective("+d+"px) ",b+="translate3d(0px,0px,"+d+"px) "):b+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,"+d+"px) ",b+="rotateZ("+Number(this.M.c).toFixed(10)+"deg) ",b+="rotateX("+Number(this.j.c).toFixed(10)+
"deg) ",b+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ",c.Tj&&(b+=c.Tj,c.rc||(b="translate3d(-10px,-10px,0px) scale(0.001,0.001)"),c.K.style[this.Va]=b)}};b.prototype.Ao=function(){this.yg();var a;this.Ub&&(a=this.Ub.getContext("2d"));if(this.m.width!==this.B.offsetWidth||this.m.height!==this.B.offsetHeight)this.m.width=this.B.offsetWidth,this.m.height=this.B.offsetHeight;if(a){var d=a.canvas.width/2,c=a.canvas.height/2,b=a.createRadialGradient(d,c,5,d,c,Math.max(d,c));b.addColorStop(0,"#333");
b.addColorStop(1,"#fff");a.rect(0,0,a.canvas.width,a.canvas.height);a.fillStyle=b;a.fill();a.fillStyle="#f00";a.font="20px Helvetica";a.textAlign="center";a.fillText("Pan: "+this.pan.c.toFixed(1),d,c-60);a.fillText("Tilt: "+this.j.c.toFixed(1),d,c-30);a.fillText("Fov: "+this.f.c.toFixed(1),d,c+0);a.fillText("Node: "+this.Lj(),d,c+30);a.fillText("Title: "+this.af.title,d,c+60)}};b.prototype.Bo=function(){this.yg();if(this.m.width!==this.B.offsetWidth||this.m.height!==this.B.offsetHeight)this.m.width=
this.B.offsetWidth,this.m.height=this.B.offsetHeight;this.ha&&this.ha.setPan&&(this.ha.setPan(this.pan.c),this.ha.setTilt(this.j.c),this.ha.setFov(this.f.c))};b.prototype.$i=function(){this.ta.style.visibility="inherit";this.$||(this.$=this.ta.getContext("2d"));if(this.$.width!=this.m.width||this.$.height!=this.m.height)this.$.width=this.m.width,this.$.height=this.m.height;this.$.clear?this.$.clear():this.$.clearRect(0,0,this.ta.width,this.ta.height);this.Fb=0;var a,d,c;d=100/this.f.c;c=this.g.width/
this.g.height;var b=this.m.height*d*c;d*=this.m.height;a=(this.pan.c/100/c-.5)*b+this.m.width/2;for(var f=(this.j.c/100-.5)*d+this.m.height/2,l,k,g,h,n=0;this.g.I.length>=n+2&&this.g.I[n+1].width>b;)n++;var r,p;p=[];for(r=this.g.I.length-1;r>=n;){c=this.g.I[r];var u;if(c.cache)u={Wa:0,rb:0},u.sb=c.L-1,u.tb=c.da-1;else{u={};var t=-f/d*(c.height/this.g.G);l=(-a+this.m.width)/b*(c.width/this.g.G);k=(-f+this.m.height)/d*(c.height/this.g.G);u.Wa=Math.min(Math.max(0,Math.floor(-a/b*(c.width/this.g.G))),
c.L-1);u.rb=Math.min(Math.max(0,Math.floor(t)),c.da-1);u.sb=Math.min(Math.max(0,Math.floor(l)),c.L-1);u.tb=Math.min(Math.max(0,Math.floor(k)),c.da-1)}p[r]=u;var v=!0;for(k=u.rb;k<=u.tb;k++)for(l=u.Wa;l<=u.sb;l++)h=l+k*c.L,t=c.W[h],t||(t=new m.Fd,c.W[h]=t),this.la<this.yd?t.g||(this.mi++,t.g=new Image,t.g.onload=this.ro(),t.g.onerror=this.rh(t),t.g.onabort=this.rh(t),t.g.crossOrigin=this.crossOrigin,t.g.setAttribute("src",this.oe(0,r,l,k)),c.cache&&this.Hb.push(t.g),0==this.la&&this.N&&this.N.ggReLoadedLevels&&
this.N.ggReLoadedLevels(),this.la++,this.ya=!0):this.Fb++,t.g&&t.g.complete||(v=!1),t.visible=!0;u.si=v;r--}for(r=this.g.I.length-1;r>=n;){c=this.g.I[r];if(p[r]&&0<=p[r].Wa)for(u=p[r],k=u.rb;k<=u.tb;k++)for(l=u.Wa;l<=u.sb;l++)h=l+k*c.L,(t=c.W[h])||(t=c.W[h]=new m.Fd),t.g&&t.g.complete&&this.$.drawImage(t.g,a+(-this.g.Ka+this.g.G*l)*b/c.width,f+(-this.g.Ka+this.g.G*k)*d/c.height,t.g.width*b/c.width,t.g.height*d/c.height),t.visible=!0;r--}for(b=0;b<this.g.I.length;b++)if(c=this.g.I[b],!c.cache)for(g in c.W)c.W.hasOwnProperty(g)&&
(t=c.W[g],t.visible||(t.g=null,delete c.W[g]));if(0<=this.w.mode||0<this.w.cb.length)for(b=1,0>=this.w.mode&&(b=0),3==this.w.mode&&(b=this.w.oa),g=0;g<this.P.length;g++)if(c=this.P[g],a=b,"poly"==c.type&&(d=c.Ld,2==this.w.mode&&(a=c.oa),f=this.w.cb.indexOf(c.id),-1!=f&&(a=this.w.Eb[f]),0<d.length)){this.$.fillStyle=this.fa(c.Qb,c.Pb*a);this.$.strokeStyle=this.fa(c.Tb,c.Sb*a);this.$.beginPath();for(c=0;c<d.length;c++)a=d[c],0==c?this.$.moveTo(a.hc,a.Cb):this.$.lineTo(a.hc,a.Cb);this.$.closePath();
this.$.stroke();this.$.fill()}this.Nc=!1};b.prototype.qo=function(a){var d=this;return function(){d.ya=!0;d.Nc=!0;a.loaded=!0;a.g&&!a.K&&d.B.appendChild(a.g);d.la&&d.la--;0==d.la&&d.N&&d.N.ggLoadedLevels&&d.N.ggLoadedLevels();a.g&&a.Oa&&(a.Oa.drawImage(a.g,0,0),a.g=null)}};b.prototype.ro=function(){var a=this;return function(){a.ya=!0;a.Nc=!0;a.la&&a.la--;0==a.la&&a.N&&a.N.ggLoadedLevels&&a.N.ggLoadedLevels()}};b.prototype.rh=function(a){var d=this;return function(){d.ya=!0;d.Nc=!0;d.la&&d.la--;0==
d.la&&d.N&&d.N.ggLoadedLevels&&d.N.ggLoadedLevels();a.g=null}};b.prototype.Sj=function(a,d,c){c.Wa=a.width/this.g.G*d.rf;c.rb=a.height/this.g.G*d.sf;c.sb=a.width/this.g.G*d.Mf;c.tb=a.height/this.g.G*d.Nf;c.Wa=Math.min(Math.max(0,Math.floor(c.Wa)),a.L-1);c.rb=Math.min(Math.max(0,Math.floor(c.rb)),a.da-1);c.sb=Math.min(Math.max(0,Math.floor(c.sb)),a.L-1);c.tb=Math.min(Math.max(0,Math.floor(c.tb)),a.da-1)};b.prototype.Qn=function(a){a=Math.round(a);this.tc=0<(a&1);this.Se=0<(a&2);this.zh=0<(a&4);this.Uf=
0<(a&8);4096<=a&&(this.Ec=0<(a&4096),this.ea=0<(a&8192),this.mg=0<(a&32768))};b.prototype.Km=function(){var a=0;this.tc&&(a|=1);this.Se&&(a|=2);this.zh&&(a|=4);this.Ec&&(a|=4096);this.ea&&(a|=8192);this.mg&&(a|=32768);return a};b.prototype.nl=function(){if(!(6>this.fb.$a.length))for(var a=0;6>a;a++){var d;d=this.fb.$a[a];var c;c=[];c.push(new m.sa(-1,-1,-1,0,0));c.push(new m.sa(1,-1,-1,1,0));c.push(new m.sa(1,1,-1,1,1));c.push(new m.sa(-1,1,-1,0,1));for(var b=0;4>b;b++)4>a?c[b].Ea(-Math.PI/2*a):c[b].wa(Math.PI/
2*(4==a?-1:1)),this.Da&&(c[b].lb(this.Da.M*Math.PI/180),c[b].wa(-this.Da.pitch*Math.PI/180)),c[b].Ea(-this.pan.c*Math.PI/180),c[b].wa(this.j.c*Math.PI/180),c[b].lb(this.M.c*Math.PI/180);c=this.Qh(c);d.rc=0<c.length;if(d.rc){d=d.Me;d.rf=c[0].$c;d.Mf=c[0].$c;d.sf=c[0].Gb;d.Nf=c[0].Gb;for(b=1;b<c.length;b++)d.rf=Math.min(d.rf,c[b].$c),d.Mf=Math.max(d.Mf,c[b].$c),d.sf=Math.min(d.sf,c[b].Gb),d.Nf=Math.max(d.Nf,c[b].Gb);d.bf=d.Mf-d.rf;d.pg=d.Nf-d.sf;d.scale=Math.max(d.bf,d.pg)}else d.Me.bf=-1,d.Me.pg=-1}};
b.prototype.vi=function(){for(var a=0;a<this.g.I.length;a++){var d=this.g.I[a],c;for(c in d.W)d.W.hasOwnProperty(c)&&(d.W[c].visible=!1)}};b.prototype.$h=function(){for(var a=0,d=Math.tan(Math.min(this.Kb(),175)*Math.PI/360),c=this.m.height/(2*d),c=c*(1+this.m.width/this.m.height*d/2),c=c*Math.pow(2,1<this.devicePixelRatio?this.g.rk:this.g.qk);this.g.I.length>=a+2&&!this.g.I[a+1].Pe&&this.g.I[a+1].width>c;)a++;return a};b.prototype.Eo=function(){var a=!1,d,c,b;if(this.m.width!==this.B.offsetWidth||
this.m.height!==this.B.offsetHeight)this.m.width=this.B.offsetWidth,this.m.height=this.B.offsetHeight,this.B.style[this.Va+"OriginX"]=this.m.width/2+"px",this.B.style[this.Va+"OriginY"]=this.m.height/2+"px",a=!0;var f=Math.round(this.ed());if(this.Jf!=f||a)this.Jf=f,this.tc||(this.B.style[this.fd]=f+"px",this.B.style[this.fd+"Origin"]="50% 50%");this.Fb=0;if(0<this.g.I.length){this.nl();this.vi();var l;l="";for(d=0;6>d;d++){var k;k=this.fb.$a[d];k.rc&&(l=l+d+",")}l=this.$h();var g;for(g=this.g.I.length-
1;g>=l;){var a=this.g.I[g],h=1;g==this.g.I.length-1&&0==this.g.Ka&&(h=this.g.G/(this.g.G-2));for(d=0;6>d;d++){k=this.fb.$a[d];var n=k.Me;if(k.rc&&0<n.bf&&0<n.pg&&0<n.scale||a.cache){k.ya=!1;var r;r={};a.cache?(r.Wa=0,r.rb=0,r.sb=a.L-1,r.tb=a.da-1):this.Sj(a,n,r);for(b=r.rb;b<=r.tb;b++)for(c=r.Wa;c<=r.sb;c++){var p=c+b*a.L+d*a.L*a.da;(n=a.W[p])||(n=a.W[p]=new m.Fd);if(!n.K&&this.la<this.yd){if(0<this.vh.length){n.K=this.vh.shift();for(p=this.B.firstChild;p&&p.Ed&&(-1==p.Ed||p.Ed>=g);)p=p.nextSibling;
this.B.insertBefore(n.K,p);n.Oa=n.K.getContext("2d")}else if(this.gl<this.uk){this.gl++;n.K=document.createElement("canvas");n.K.width=this.g.G+2*this.g.Ka;n.K.height=this.g.G+2*this.g.Ka;n.Oa=n.K.getContext("2d");n.K.style[this.Va+"Origin"]="0% 0%";n.K.style.overflow="hidden";n.K.style.position="absolute";for(p=this.B.firstChild;p&&p.Ed&&(-1==p.Ed||p.Ed>=g);)p=p.nextSibling;this.B.insertBefore(n.K,p)}n.K&&(this.mi++,n.g=new Image,n.g.crossOrigin=this.crossOrigin,n.g.style[this.Va+"Origin"]="0% 0%",
n.g.style.position="absolute",n.g.style.overflow="hidden",n.K.Ed=g,n.g.onload=this.qo(n),n.g.onerror=this.rh(n),n.g.onabort=this.rh(n),n.g.setAttribute("src",this.oe(d,g,c,b)),a.cache&&this.Hb.push(n.g),0==this.la&&this.N&&this.N.ggReLoadedLevels&&this.N.ggReLoadedLevels(),this.la++,this.ya=!0)}else this.Fb++;if(n.K){p="";this.tc?(p+="translate3d("+this.m.width/2+"px,"+this.m.height/2+"px,0px) ",p+=" perspective("+f+"px) ",p+="translate3d(0px,0px,"+f+"px) "):p+="translate3d("+this.m.width/2+"px,"+
this.m.height/2+"px,"+f+"px) ";p+="rotateZ("+Number(this.M.c).toFixed(10)+"deg) ";p+="rotateX("+Number(this.j.c).toFixed(10)+"deg) ";p+="rotateY("+Number(-this.pan.c).toFixed(10)+"deg) ";this.Da&&(p+="rotateX("+Number(-this.Da.pitch).toFixed(10)+"deg) ",p+="rotateZ("+Number(this.Da.M).toFixed(10)+"deg) ");var p=4>d?p+("rotateY("+-90*d+"deg) "):p+("rotateX("+(4==d?-90:90)+"deg) "),u;this.Se?(u=this.jf/this.g.G*(this.g.G/a.width)*(2*g+1),u=this.Id?2/Math.tan(this.f.c*Math.PI/360)*u:2*u,p+=" scale("+
u*h*h+")"):u=1/(h*h);p+=" translate3d("+(1/h*c*this.g.G-this.g.Ka-a.width/2)+"px,";p+=1/h*b*this.g.G-this.g.Ka-a.width/2+"px,";p+=-a.width*u/2+"px)";k.rc&&(n.visible=!0,n.K?n.K.style[this.Va]=p:n.g&&(n.g.style[this.Va]=p))}}}}g--}for(f=0;f<this.g.I.length;f++){var a=this.g.I[f],t;for(t in a.W)a.W.hasOwnProperty(t)&&(n=a.W[t],!n.visible&&n.K&&(a.cache?(l="translate3d(-10px,-10px,0px) scale(0.001,0.001)",n.K?n.K.style[this.Va]=l:n.g&&(n.g.style[this.Va]="")):(n.Oa&&n.Oa.clearRect(0,0,n.Oa.canvas.width,
n.Oa.canvas.height),this.vh.push(n.K),n.K?(l="translate3d(-10px,-10px,0px) scale(0.001,0.001)",n.K.style[this.Va]=l,n.K.Ed=-1):n.loaded&&this.B.removeChild(n.g),n.K=null,n.g=null,n.Oa=null,delete a.W[t])))}this.Nc=!1}};b.prototype.ll=function(){var a=Math.round(this.ed());this.tc||this.kl(a);for(var d=0;d<this.Xa.length;d++){var c;c=this.Xa[d];c.pl(a);c.b.hidden=!1}};b.prototype.ql=function(){for(var a=Math.round(this.ed()),d=0;d<this.J.length;d++){var c;c=this.J[d];c.Xc||(c.pl(a),c.b.hidden=!1)}};
b.prototype.Vm=function(){for(var a=0;a<this.Xa.length;a++){var d;d=this.Xa[a];d.Wk()}for(a=0;a<this.J.length;a++)d=this.J[a],d.Xc||d.Wk()};b.prototype.Io=function(){for(var a=0;a<this.J.length;a++){var d;d=this.J[a];d.Xc||d.se()}for(a=0;a<this.Xa.length;a++)d=this.Xa[a],d.se()};b.prototype.Bc=function(a){this.ae=!1;try{if(a?this.ob=a:this.ob=document.createElement("canvas"),this.ob.width=100,this.ob.height=100,this.ob.style.display="none",this.ob.style.Xo="none",this.B.insertBefore(this.ob,this.B.firstChild),
a={stencil:!0,depth:!0,alpha:!1},this.Hd&&10<=this.Yj[0]&&(a.antialias=!1),this.H=this.ob.getContext("webgl",a),this.H||(this.H=this.ob.getContext("experimental-webgl",a)),this.H){var d=this.H;this.ib.width=500;this.ib.height=500;d.clearColor(0,0,0,0);d.enable(this.H.DEPTH_TEST);d.viewport(0,0,500,500);d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT);this.ma.Ef();this.ma.Pg();this.ma.$j(this.Xe);this.ma.ak();this.C&&(this.C.Ef(),this.C.Bc());this.Ca&&(this.Ca.Ef(),this.Ca.Bc())}}catch(c){this.O(c)}this.H?
this.ea=!0:alert("Could not initialise WebGL!")};b.prototype.Xb=function(a){return a?"{"==a.charAt(0)||"/"==a.charAt(0)||0<a.indexOf("://")||0==a.indexOf("javascript:")?a:this.Bd+a:this.Bd};b.prototype.Nd=function(a,d,c){var b=(new RegExp("%0*"+d,"i")).exec(a.toString());if(b){var b=b.toString(),f=c.toString();for(b.charAt(b.length-1)!=d&&(f=(1+c).toString());f.length<b.length-1;)f="0"+f;a=a.replace(b,f)}return a};b.prototype.oe=function(a,d,c,b){var f=this.g.ri-1-d,l=this.g.sk,k="x";switch(a){case 0:k=
"f";break;case 1:k="r";break;case 2:k="b";break;case 3:k="l";break;case 4:k="u";break;case 5:k="d"}for(var g=0;3>g;g++)l=this.Nd(l,"c",a),l=this.Nd(l,"s",k),l=this.Nd(l,"r",d),l=this.Nd(l,"l",f),l=this.Nd(l,"x",c),l=this.Nd(l,"y",b),l=this.Nd(l,"v",b),l=this.Nd(l,"h",c);return this.Xb(l)};b.prototype.gi=function(){return this.pan.c};b.prototype.Dm=function(){return this.v.pan};b.prototype.Em=function(){for(var a=this.pan.c;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.Lg=function(){for(var a=
this.pan.c-this.pan.Ci;-180>a;)a+=360;for(;180<a;)a-=360;return a};b.prototype.lh=function(a){this.qa();isNaN(a)||(this.pan.c=Number(a));this.update()};b.prototype.Qi=function(a){this.qa();isNaN(a)||(this.pan.c=Number(a)+this.pan.Ci);this.update()};b.prototype.vg=function(a,d){isNaN(a)||(this.lh(this.gi()+a),d&&(this.pan.d=a))};b.prototype.Vl=function(a,d){this.vg(a*this.Dd(),d)};b.prototype.ii=function(){return this.j.c};b.prototype.Mm=function(){return this.v.j};b.prototype.mh=function(a){this.qa();
isNaN(a)||(this.j.c=Number(a));this.update()};b.prototype.wg=function(a,d){this.mh(this.ii()+a);d&&(this.j.d=a)};b.prototype.Xl=function(a,d){this.wg(a*this.Dd(),d)};b.prototype.Rn=function(a){this.qa();isNaN(a)||(this.M.c=Number(a));this.update()};b.prototype.Lm=function(){return this.M.c};b.prototype.uf=function(){return this.f.c};b.prototype.pm=function(){return this.v.xd};b.prototype.Wf=function(a){this.qa();var d;switch(this.za()){case 4:d=170;break;case 12:d=360;break;case 9:d=355;break;default:d=
170}2==this.jb&&(d=9999999999);!isNaN(a)&&0<a&&a<d&&(d=this.f.c,this.f.c=Number(a),d!=this.f.c&&this.update())};b.prototype.pj=function(a,d){this.Wf(this.uf()+a);d&&(this.f.d=a)};b.prototype.kf=function(a,d){if(!isNaN(a)){var c;c=a/90*Math.cos(Math.min(this.f.c,90)*Math.PI/360);c=this.f.c*Math.exp(c);this.Wf(c);d&&(this.f.d=a)}};b.prototype.Pn=function(a,d){this.qa();isNaN(a)||(this.pan.c=a);isNaN(d)||(this.j.c=d);this.update()};b.prototype.$f=function(a,d,c){this.qa();isNaN(a)||(this.pan.c=a);isNaN(d)||
(this.j.c=d);isNaN(c)||this.Wf(c);this.update()};b.prototype.Jn=function(){this.$f(this.pan.Pa,this.j.Pa,this.f.Pa)};b.prototype.Nn=function(a){this.Yf(a);this.Zf(a);this.Xf(a)};b.prototype.Yf=function(a){this.A.yb=a};b.prototype.Xf=function(a){this.A.Lf=a};b.prototype.Zf=function(a){this.A.qd=a};b.prototype.moveTo=function(a,d,c,b,f,l){this.qa();if("_blank"!==a&&""!==a){this.v.active=!0;this.v.te=!1;this.v.cj=!1;var k=a.toString().split("/");1<k.length&&(a=Number(k[0]),b=Number(d),d=Number(k[1]),
2<k.length&&(c=Number(k[2])));isNaN(a)?this.v.pan=this.pan.c:this.v.pan=Number(a);isNaN(d)?this.v.j=this.j.c:this.v.j=Number(d);!isNaN(c)&&0<c&&180>c?this.v.f=Number(c):this.v.f=this.f.c;this.v.speed=!isNaN(b)&&0<b?Number(b):1;isNaN(f)?this.v.M=this.M.c:this.v.M=Number(f);void 0!==l?!a||4!=l&&12!=l&&9!=l||(this.v.Bb=l):this.v.Bb=this.Za}};b.prototype.Zg=function(a){this.qa();var d=0,c=0,b=70,f=4,l=0,k=1;a.hasOwnProperty("pan")&&(d=Number(a.pan),this.v.pan=d);a.hasOwnProperty("tilt")&&(c=Number(a.tilt),
this.v.j=c);a.hasOwnProperty("fov")&&(b=Number(a.fov),this.v.f=b);a.hasOwnProperty("projection")&&(f=Number(a.projection),this.v.Bb=f);a.hasOwnProperty("timingFunction")&&(l=Number(a.timingFunction));a.hasOwnProperty("speed")&&(k=Number(a.speed));0>=k?(this.$f(d,c,b),this.Yc(f)):(a=new m.ik,a.Ta="__AutoMove",a.dg=this.pan.c,a.fg=this.j.c,a.wd=this.f.c,a.eg=this.Za,a.Od=d,a.Pd=c,a.We=b,a.Zc=f,a.Ee=!1,a.Xd=!1,a.Yd=!1,0==l&&(a.Xd=!0),1==l&&(a.Ee=!0,a.Xd=!0),2==l&&(a.Yd=!0),a.speed=k,this.v.kj=this.D,
this.D=this.Ij(a),this.v.lj=(new Date).getTime(),this.v.cj=!0,this.v.active=!0,this.v.te=!1,this.v.pan=d,this.v.j=c,this.v.f=b,this.Ad=!1)};b.prototype.dn=function(a){this.moveTo(this.pan.Pa,this.j.Pa,this.f.Pa,a)};b.prototype.en=function(a,d){var c={};c.pan=this.pan.Pa;c.tilt=this.j.Pa;c.fov=this.f.Pa;c.projection=this.dh;c.timingFunction=d;c.speed=a;this.Zg(c)};b.prototype.Ll=function(a,d,c,b){var f=new m.Vg(this);f.type="point";f.pan=d;f.j=c;f.id=a;f.b={};f.b.player=this;f.Fe();f.b.hotspot=f;f.b.__div=
document.createElement("div");f.b.__div.appendChild(b);this.P.push(f);f.b.__div.style.position="absolute";f.b.__div.style.left="-1000px";f.b.__div.style.top="-1000px";this.Ba.insertBefore(f.b.__div,this.Ba.firstChild);this.ya=!0};b.prototype.Co=function(a,d,c){for(var b=0;b<this.P.length;b++){var f=this.P[b];f.id==a&&(f.pan=d,f.j=c,f.Fe())}this.ya=!0};b.prototype.Bn=function(a){for(var d=-1,c,b=0;b<this.P.length;b++)c=this.P[b],c.id==a&&(d=b);-1<d&&(c=this.P.splice(d,1).pop(),c.b&&c.b.__div&&this.Ba.removeChild(c.b.__div))};
b.prototype.Gm=function(){for(var a=[],d=0;d<this.P.length;d++){var c=this.P[d];"point"==c.type&&a.push(String(c.id))}return a};b.prototype.rm=function(a){for(var d=0;d<this.P.length;d++){var c=this.P[d];if(c.id==a)return d={},d.id=a,d.pan=c.pan,d.tilt=c.j,c.b&&c.b.__div&&(d.div=c.b.__div),d}};b.prototype.ul=function(a,d){this.Y.start.x=a;this.Y.start.y=d;this.Y.ba.x=a;this.Y.ba.y=d;this.va.ba.x=a;this.va.ba.y=d;this.Ki++;this.pan.dd=this.pan.c;this.j.dd=this.j.c};b.prototype.sl=function(a,d){var c=
this.Kb();this.pan.dd+=a*c/this.m.height;this.j.dd+=d*c/this.m.height;this.pan.c=this.pan.dd;this.j.c=this.j.dd};b.prototype.tl=function(a,d){this.Y.c.x=a;this.Y.c.y=d;this.Y.aa.x=this.Y.c.x-this.Y.ba.x;this.Y.aa.y=this.Y.c.y-this.Y.ba.y;this.A.ld&&(this.Y.ba.x=this.Y.c.x,this.Y.ba.y=this.Y.c.y,this.update())};b.prototype.qa=function(){this.s.active&&(this.s.active=!1,this.pan.d=0,this.j.d=0,this.f.d=0);this.v.active&&(this.v.active=!1,this.pan.d=0,this.j.d=0,this.f.d=0);this.gf=this.v.te=!1;this.s.zi=
!1;this.cd=.02;this.ef=0;this.s.bd&&(this.s.bd=!1,this.s.enabled=this.s.nj);this.Ke=(new Date).getTime()};b.prototype.wm=function(){return this.Ke};b.prototype.Oj=function(a,d){a||(a=this.ra.x,d=this.ra.y);var c=this.m.height/(2*Math.tan(this.f.c*Math.PI/360)),b=a-this.m.width/2,f=d-this.m.height/2,l={};l.pan=180*Math.atan(b/c)/Math.PI;l.tilt=180*Math.atan(-f/Math.sqrt(b*b+c*c))/Math.PI;return l};b.prototype.Im=function(a,d){var c,b;a||(a=this.ra.x,d=this.ra.y);if(2===this.jb)b=this.f.c/this.m.height,
c=-(a-this.m.width/2)*b+this.pan.c,b=-(d-this.m.height/2)*b+this.j.c;else{b=new m.sa(0,0,1);c=this.Oj(a,d);b.le(-c.tilt);b.Vf(c.pan);b.le(-this.j.c);b.Vf(-this.pan.c);b.le(-this.Da.pitch);b.jh(this.Da.M);for(c=b.Nl()-180;-180>c;)c+=360;b=b.Ol()}var f={};f.pan=c;f.tilt=b;return f};b.prototype.md=function(a){return a==this.control?!0:a&&void 0!==a.ggPermeable&&0==a.ggPermeable?!1:a&&a.ggType&&("container"==a.ggType||"cloner"==a.ggType||"timer"==a.ggType)?!0:!1};b.prototype.Oh=function(a,d){var c=this.ed(),
b,f,l;for(b=0;b<this.J.length+this.Xa.length;b++){var k;k=b<this.J.length?this.J[b]:this.Xa[b-this.J.length];if(k.xb)return k}for(b=0;b<this.J.length+this.Xa.length;b++)if(k=b<this.J.length?this.J[b]:this.Xa[b-this.J.length],!k.Xc){var g=[],h=new m.sa,n,r,p;0<k.f&&(r=Math.tan(k.f/2*Math.PI/180),p=0<k.Ac?r*k.Rc/k.Ac:r,k.hd&&1!=k.hd&&(p*=k.hd));for(n=0;4>n;n++){switch(n){case 0:h.Ya(-r,-p,-1);break;case 1:h.Ya(r,-p,-1);break;case 2:h.Ya(r,p,-1);break;case 3:h.Ya(-r,p,-1)}h.wa(-k.j*Math.PI/180);h.Ea(k.pan*
Math.PI/180);h.Ea(-this.pan.c*Math.PI/180);h.wa(this.j.c*Math.PI/180);h.lb(this.M.c*Math.PI/180);g.push(h.clone())}g=this.Qh(g);if(0<g.length){for(n=0;n<g.length;n++)h=g[n],.1>h.z?(l=-c/h.z,f=this.m.width/2+h.x*l,l=this.m.height/2+h.y*l):l=f=0,h.hc=f,h.Cb=l;if(this.Xj(g,a,d))return k}}return null};b.prototype.Sg=function(){return document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!=document.msFullscreenElement||document.fullScreen};b.prototype.cn=function(a){this.ml(a);
if(this.Oc)this.Oc.onclick();this.Cd=null;if(!this.A.yb){a=a?a:window.event;if((a.which||0==a.which||1==a.which)&&this.md(a.target)){var b;(b=this.Oh(this.ra.x,this.ra.y))&&b.Sc&&(this.Cd=b);this.ul(a.pageX,a.pageY);this.X.gb=!0;this.X.startTime=(new Date).getTime();a.preventDefault();this.qa()}this.Y.aa.x=0;this.Y.aa.y=0}};b.prototype.$e=function(a,b){var c=this.w.Yi;c.enabled&&(this.Aa!=this.pb&&0<=a&&0<=b&&""!=this.Aa.title?(this.ua.innerHTML=this.Aa.title,this.ua.style.color=this.fa(c.Zi,c.Xi),
c.background?this.ua.style.backgroundColor=this.fa(c.Qb,c.Pb):this.ua.style.backgroundColor="transparent",this.ua.style.border="solid "+this.fa(c.Tb,c.Sb)+" "+c.Kh+"px",this.ua.style.borderRadius=c.Jh+"px",this.ua.style.textAlign="center",0<c.width?(this.ua.style.left=a-c.width/2+this.margin.left+"px",this.ua.style.width=c.width+"px"):(this.ua.style.width="auto",this.ua.style.left=a-this.ua.offsetWidth/2+this.margin.left+"px"),this.ua.style.height=0<c.height?c.height+"px":"auto",this.ua.style.top=
b+25+ +this.margin.top+"px",this.ua.style.visibility="inherit",this.ua.style.overflow="hidden"):(this.ua.style.visibility="hidden",this.ua.innerHTML=""))};b.prototype.ml=function(a){var b=this.ce();this.Sg()?(this.ra.x=a.pageX-this.margin.left,this.ra.y=a.pageY-this.margin.top):(this.ra.x=a.pageX-b.x,this.ra.y=a.pageY-b.y);return b};b.prototype.Ue=function(a){a&&null!==a&&"object"==typeof a?this.Aa=a:this.Aa=this.pb;this.Aa.Fe&&this.Aa.Fe();this.hotspot=this.Aa};b.prototype.bn=function(a){a=a?a:window.event;
var b=this.ml(a);if(!this.A.yb){this.s.active&&(this.s.Xg=(new Date).getTime());this.X.gb&&(a.preventDefault(),(a.which||0==a.which||1==a.which)&&this.tl(a.pageX,a.pageY),this.qa());var c=!1;if(this.Aa==this.pb||"poly"==this.Aa.type){var e=this.pb;0<this.P.length&&this.md(a.target)&&(e=this.Ph(this.ra.x,this.ra.y));this.kh(e);this.$e(a.pageX-b.x,a.pageY-b.y);0!=e&&(c=!0)}a=null;c||(a=this.Oh(this.ra.x,this.ra.y));this.s.Cg&&(this.s.Cg=!1);this.Ba.style.cursor=this.Aa!=this.pb&&this.Aa.Ie&&c||a&&a.Bf?
"pointer":"default"}};b.prototype.kh=function(a){!1===a&&(a=this.pb);this.Aa!=a&&(this.Aa!=this.pb&&(0<this.w.mode&&(this.Aa.eb=0),this.Qa&&this.Qa.hotspotProxyOut&&this.Qa.hotspotProxyOut(this.Aa.id)),a!=this.pb?(this.Ue(a),this.Qa&&this.Qa.hotspotProxyOver&&this.Qa.hotspotProxyOver(this.Aa.id),0<this.w.mode&&(this.w.eb=1,this.Aa.eb=1)):(this.Ue(this.pb),0<this.w.mode&&(this.w.eb=0)),this.ha&&this.ha.changeCurrentHotspot(this.Aa.id))};b.prototype.an=function(a){a=a?a:window.event;this.Wg=-1;if(!this.A.yb&&
this.X.gb){this.qa();a.preventDefault();this.X.gb=!1;a=(new Date).getTime();var b;b=Math.abs(this.Y.start.x-this.Y.ba.x)+Math.abs(this.Y.start.y-this.Y.ba.y);400>a-this.X.startTime&&0<=b&&20>b&&(this.Cd&&this.Cd.Sc(),(b=this.Ph(this.ra.x,this.ra.y))&&this.jl(b),b=Math.abs(this.Y.pd.x-this.Y.ba.x)+Math.abs(this.Y.pd.y-this.Y.ba.y),700>a-this.Hf&&0<=b&&20>b?(this.A.Wh&&this.uh(),this.Hf=0):this.Hf=a,this.Y.pd.x=this.Y.ba.x,this.Y.pd.y=this.Y.ba.y)}};b.prototype.vk=function(a){if(!this.A.qd&&(a=a?a:
window.event,this.md(a.target))){var b=a.detail?-1*a.detail:a.wheelDelta/40;this.A.bk&&(b=-b);a.axis&&(-1==this.Wg?this.Wg=a.axis:this.Wg!=a.axis&&(b=0));var c=0<b?1:-1;a.wheelDeltaX&&a.wheelDeltaY&&Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)&&(b=0);0!=b&&(this.kf(c*this.A.$k,!0),this.update());a.preventDefault();this.qa()}};b.prototype.yo=function(a){a||(a=window.event);var b=a.touches,c=this.ce();this.ra.x=b[0].pageX-c.x;this.ra.y=b[0].pageY-c.y;this.Ye=this.Cd=null;this.bi&&(this.bi=!1,this.km());
if(!this.A.yb){if(!this.X.gb&&b[0]){this.X.startTime=(new Date).getTime();this.X.start.x=b[0].pageX;this.X.start.y=b[0].pageY;this.X.ba.x=b[0].pageX;this.X.ba.y=b[0].pageY;this.kc=b[0].target;if(this.md(a.target)){var e;(e=this.Oh(this.ra.x,this.ra.y))&&e.Sc&&(this.Cd=e);if(e=this.Ph(this.ra.x,this.ra.y))this.O(e),this.Ye=e,this.kh(e),e=this.wf(a),this.$e(e.x-c.x,e.y-c.y);this.ul(b[0].pageX,b[0].pageY);this.X.Bj=b[0].identifier;this.X.gb=!0;a.preventDefault();this.qa()}if(this.kc){c=this.kc;for(e=
!1;c&&c!=this.control;){if(c.onmouseover)c.onmouseover();c.onmousedown&&!e&&(c.onmousedown(),e=!0);c=c.parentNode}e&&a.preventDefault()}}1<b.length&&(this.X.gb=!1);!this.ki&&2==b.length&&b[0]&&b[1]&&(a=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.bl=Math.sqrt(a*a+b*b),this.f.Ne=this.f.c);this.Y.aa.x=0;this.Y.aa.y=0}};b.prototype.km=function(){this.Ah&&this.o.b&&(this.o.nd||this.o.b.play(),this.o.b.muted=!1);if(this.Hd){var a=this.Ha.createOscillator(),b=this.Ha.createGain();a.frequency.value=
30;a.type="sine";a.connect(b);b.connect(this.Ha.destination);b.gain.value=.01;a.start(0);setTimeout(function(){a.stop()},1E4)}for(b=0;b<this.S.length;b++){var c=this.S[b];(!this.Vc(c.id)||c.ia)&&0<=c.loop&&c.autoplay&&(c.ia&&c.ye(),this.je(c.id,c.loop))}for(b=0;b<this.J.length;b++)c=this.J[b],!this.Vc(c.id)&&c.autoplay&&this.Ah&&this.je(c.id,c.loop)};b.prototype.xo=function(a){a||(a=window.event);var b=a.touches,c=this.ce();this.ra.x=b[0].pageX-c.x;this.ra.y=b[0].pageY-c.y;if(!this.A.yb){b[0]&&(this.X.ba.x=
b[0].pageX,this.X.ba.y=b[0].pageY);if(this.X.gb){a.preventDefault();for(var e=0;e<b.length;e++)if(b[e].identifier==this.X.Bj){this.tl(b[e].pageX,b[e].pageY);break}this.Ye&&(e=this.wf(a),this.$e(e.x-c.x,e.y-c.y));this.qa()}2==b.length&&b[0]&&b[1]&&(this.X.gb=!1,this.ki||(this.A.qd||(c=b[0].pageX-b[1].pageX,b=b[0].pageY-b[1].pageY,this.f.wj=Math.sqrt(c*c+b*b),this.va.f.active=!0,this.va.f.Wb=this.f.Ne*Math.sqrt(this.f.bl/this.f.wj),4==this.za()&&this.va.f.Wb>this.f.max&&(this.va.f.Wb=this.f.max),this.va.f.Wb<
this.f.min&&(this.va.f.Wb=this.f.min)),this.qa(),a.preventDefault()))}};b.prototype.wo=function(a){var b,c=this.ce(),e=!1;if(!this.A.yb){this.X.gb&&this.qa();var f=(new Date).getTime(),l;b=Math.abs(this.X.start.x-this.X.ba.x)+Math.abs(this.X.start.y-this.X.ba.y);if(0<=b&&20>b){a.preventDefault();e=!0;this.md(this.kc)&&this.Cd&&this.Cd.Sc();if(this.kc)for(b=this.kc,l=!1;b&&b!=this.control;)b.onclick&&!l&&(b.onclick(),l=!0,e=!1),b=b.parentNode;b=Math.abs(this.X.pd.x-this.X.ba.x)+Math.abs(this.X.pd.y-
this.X.ba.y);if(700>f-this.Hf&&0<=b&&20>b){a.preventDefault();if(this.md(this.kc)&&this.A.Wh){var k=this;setTimeout(function(){k.uh()},1)}if(this.kc)for(b=this.kc,l=!1;b&&b!=this.control;)b.ondblclick&&!l&&(b.ondblclick(),l=!0,e=!1),b=b.parentNode;this.Hf=0}else this.Hf=f;this.X.pd.x=this.X.ba.x;this.X.pd.y=this.X.ba.y}if(this.kc)for(a.preventDefault(),b=this.kc,l=!1;b&&b!=this.control;){if(b.onmouseout)b.onmouseout();b.onmouseup&&!l&&(b.onmouseup(),l=!0);b=b.parentNode}a=this.wf(a);this.$e(a.x-c.x,
a.y-c.y);this.Ye&&e&&this.jl(this.Ye);this.kc=null;this.X.gb=!1;this.kh(this.pb);this.Ye=null}};b.prototype.vo=function(a){var b=this.ce();this.A.yb||(this.X.gb=!1);this.Ye=null;this.kh(this.pb);a=this.wf(a);this.$e(a.x-b.x,a.y-b.y)};b.prototype.Xm=function(){return null!=this.kc||this.X.gb};b.prototype.wk=function(a){!this.ge&&window.MSGesture&&(this.O("setup gesture"),this.ge=new MSGesture,this.ge.target=this.control);this.ge&&this.ge.addPointer(a.pointerId)};b.prototype.Kj=function(a){this.ki=
!0;this.$g=1;this.A.yb||this.A.qd||(a.touches?(this.kc=a.touches.target,this.md(a.target)&&(a.preventDefault(),this.f.Ne=this.f.c,this.qa())):(a.preventDefault(),this.f.Ne=this.f.c,this.qa()))};b.prototype.mm=function(a){this.A.yb||this.A.qd||!this.md(a.target)||(a.preventDefault(),this.va.f.active=!0,this.va.f.Wb=this.f.Ne/Math.sqrt(a.scale),4==this.za()&&this.va.f.Wb>this.f.max&&(this.va.f.Wb=this.f.max),this.update(),this.qa())};b.prototype.fn=function(a){this.A.yb||this.A.qd||(a.preventDefault(),
1!=a.scale&&(this.va.f.active=!0,this.$g*=a.scale,this.va.f.Wb=this.f.Ne/Math.sqrt(this.$g),4==this.za()&&this.va.f.Wb>this.f.max&&(this.va.f.Wb=this.f.max),this.update(),this.qa()))};b.prototype.Jj=function(a){this.A.yb||this.A.qd||(this.va.f.active=!1,a.preventDefault(),this.qa(),this.ge&&this.ge.reset&&this.ge.reset())};b.prototype.Ym=function(a){this.A.Lf||(this.isFullscreen&&a.preventDefault(),this.ee=a.keyCode,this.qa())};b.prototype.Zm=function(a){this.ee&&(this.ee=0,a.preventDefault(),this.qa())};
b.prototype.ln=function(){this.ee=0};b.prototype.bh=function(){this.isFullscreen&&(this.Sg()||this.exitFullscreen(),this.Sg()&&(this.U.style.left="0px",this.U.style.top="0px"))};b.prototype.jl=function(a){this.Qa&&this.Qa.hotspotProxyClick&&this.Qa.hotspotProxyClick(a.id);""!=a.url&&(this.Di(a.url,a.target),this.$e(-1,-1))};b.prototype.Dd=function(){return Math.min(1,2*Math.tan(Math.PI*Math.min(this.f.c,90)/360))};b.prototype.Dk=function(){var a=this;setTimeout(function(){a.Dk()},100);9!=a.gh||a.ck||
requestAnimationFrame(function(){a.Wc("restart recover timer")});10<a.gh&&1<a.Ki&&(a.Wc("recover timer - disabling requestAnimationFrame"),a.ck=!0,a.Ei());a.gh++};b.prototype.Uk=function(a){var b={So:{value:0,name:"pan"},To:{value:1,name:"tilt"},Qo:{value:2,name:"fov"}},c=0,e=0,f=0,l;for(l in b){var k=b[l],g;for(g=Math.floor(a);!this.He(g,k.value)&&0<g;)g--;var h=this.He(g,k.value),n=this.zm(h);if(n){g=new m.lc(h.time,h.value);var r=new m.lc(n.time,n.value),p=(a-h.time)/(n.time-h.time);if(0!=h.type||
0!=n.type&&3!=n.type)if(3==h.type)g=h.value;else{var p=new m.lc,u=new m.lc,t=n.time-h.time;0==h.type?u.Ya(h.time+.3*t,h.value):u.Ya(h.Ud,h.Vd);0==n.type||3==n.type?p.Ya(n.time-.3*t,n.value):p.Ya(n.Td,n.Hc);h=new m.lc;h.Ih(g,r,u,p,a);g=h.y}else h=new m.lc,h.kd(g,r,p),g=h.y}else g=h.value;switch(k.value){case 0:k=this.pan.c;if(this.Ad){if(2!=this.jb){for(;360<g;)g-=360;for(;-360>g;)g+=360}c=g-k;2!=this.jb&&(180<c&&(c-=360),-180>c&&(c+=360));this.pan.c=this.pan.c+c*this.cd}else this.pan.c=g;break;case 1:k=
this.j.c;this.Ad?(e=g-k,this.j.c=this.j.c+e*this.cd):this.j.c=g;break;case 2:k=this.f.c,this.Ad?(f=g-k,this.f.c=this.f.c+f*this.cd):this.f.c=g}}b=this.za();for(l=Math.floor(a);!this.He(l,3)&&0<l;)l--;l=this.He(l,3);k=a-l.time;this.Ad&&-1!=this.ff&&this.tg+this.Fh>a?(b=this.vf(this.ff),this.f.c>b?this.tg=a:(a=(a-this.tg)/this.Fh,a=Math.min(1,a),this.Yc(this.Za,this.ff,1-a))):0==l.mb||k>l.mb-.3?this.Yc(l.value):(a=k/l.mb,this.Yc(b,l.value,1-a));this.Ad&&(c=Math.sqrt(c*c+e*e+f*f),.3>c&&(this.Ad=!1,this.cd=
.02,this.ef=0),0<this.ef&&c>this.ef&&(this.cd+=.01,this.cd=Math.min(this.cd,1)),this.ef=c);this.update()};b.prototype.rn=function(a){var b,c=this.v.speed;this.v.pi&&(c=c*(a.getTime()-this.v.pi)/60,5<c&&(c=5),.2>c&&(c=.2));this.v.pi=a.getTime();this.s.Ig&&(this.ma.ready()||4==this.Za)&&this.Kg()&&(this.s.Ig=!1,this.s.active=!0,this.qb.ud=!0,this.qb.ai=!1);if(this.v.active||0!=this.v.Bb&&this.ma.ready()){if(this.v.cj&&"__AutoMove"==this.D.Ta)if(b=a.getTime()-this.v.lj,c=b/100,c>=this.D.length){if(this.Ia.splice(this.Ia.indexOf(this.D),
1),this.v.active=!1,this.D=this.v.kj,this.v.Bb=0,b=this.s.bd,this.$f(this.v.pan,this.v.j,this.v.f),this.v.Ai&&(this.v.Ai=!1,this.s.zi=!0,this.s.active=!0,this.s.bd=b),this.onMoveComplete)this.onMoveComplete()}else this.Uk(c);else{this.pan.d=this.v.pan-this.pan.c;if(360==this.pan.max-this.pan.min){for(;-180>this.pan.d;)this.pan.d+=360;for(;180<this.pan.d;)this.pan.d-=360}this.j.d=this.v.j-this.j.c;this.M.d=this.v.M-this.M.c;this.f.d=this.v.f-this.f.c;b=c*this.Dd();var e=Math.sqrt(this.pan.d*this.pan.d+
this.j.d*this.j.d+this.M.d*this.M.d+this.f.d*this.f.d),f=this.pan.c-this.v.mk,g=this.j.c-this.v.pk,k=this.M.c-this.v.nk,h=this.f.c-this.v.lk;100*Math.sqrt(f*f+g*g+k*k+h*h)<b&&0==this.v.Bb&&(this.v.te=!0);this.v.mk=this.pan.c;this.v.pk=this.j.c;this.v.nk=this.M.c;this.v.lk=this.f.c;if(100*e<b||this.v.te){if(this.pan.d=0,this.j.d=0,this.M.d=0,this.f.d=0,this.v.active&&(this.v.active=!1,this.pan.c=this.v.pan,this.j.c=this.v.j,this.M.c=this.v.M,this.f.c=this.v.f,this.onMoveComplete))this.onMoveComplete()}else e=
e>5*b?b/e:.2,this.pan.d*=e,this.j.d*=e,this.f.d*=e;this.pan.c+=this.pan.d;this.j.c+=this.j.d;this.M.c+=this.M.d;this.f.c+=this.f.d;0!=this.v.Bb&&(this.v.Bb!=this.Za?(c=this.vf(this.v.Bb),this.uf()>c?(this.f.c+=-Math.max((2.5-1.7*Math.min(Math.sqrt(this.pan.d*this.pan.d+this.j.d*this.j.d+this.M.d*this.M.d)/b,1))*b,this.f.d)-this.f.d,this.v.f=this.f.c):(this.gc=this.Za,this.Za=this.v.Bb,this.O("New projection from Target:"+this.Za),this.Rf=this.v.Tf=0,this.ma.Pg())):1>this.v.Tf?(this.v.Tf=Math.min(1,
this.v.Tf+.05*c),this.Rf=this.v.Tf):(this.gc=0,this.v.Bb=0,this.ma.Pg()))}this.Ke=a.getTime();this.update()}else if(this.s.active){b=a.getTime()-this.s.startTime;this.s.Xg<this.s.startTime&&(this.s.Xg=this.s.startTime);if((this.s.dj||this.s.bd||this.qb.ud)&&0<this.Ia.length){c=b/100;e=!1;if(this.zb!=this.D.Ta){for(b=0;b<this.Ia.length;b++)if(""==this.zb||""!=this.zb&&this.Ia[b].Ta==this.zb){e=!0;this.D=this.Ia[b];this.zb=this.D.Ta;break}!e&&0<this.Ia.length&&(e=!0,this.D=this.Ia[0],this.zb=this.D.Ta)}else e=
!0;if(e)if(b=(f=this.o.b&&this.o.nd)&&this.s.Wi&&!this.qb.ud,this.gf){e=c;if(b)for(this.o.b.currentTime<this.mj&&this.Hh&&(this.Gh++,this.Hh=!1),e=10*(this.Gh*this.o.b.duration+this.o.b.currentTime),this.mj=this.o.b.currentTime,.05>this.o.b.duration-this.o.b.currentTime&&(this.Hh=!0);e>=10*this.ue;)e-=10*this.ue;if(!f&&c>=this.D.length||f&&!b&&c>=this.D.length||f&&b&&this.D.Ta!=this.D.yk&&c>=this.D.length){this.gf=!1;if(this.qb.ud){this.qb.ud=!1;this.qb.ai=!0;this.s.active=this.C.Sd;this.Ia.splice(this.Ia.indexOf(this.D),
1);0<this.Ia.length&&(this.D=this.Ia[0]);this.zb="";this.Yf(this.C.yi);this.Zf(this.C.hj);this.Xf(this.C.oi);this.C.Sd=!1;this.Ke=a.getTime();return}this.zb=this.D.yk;if(this.zb==this.D.Ta){if(1<this.La.length&&0<this.s.ah){if(this.s.Bi){b=1E3;do c=this.La[Math.floor(Math.random()*this.La.length)];while(b--&&c==this.Vb)}else c=this.Nj();this.he("{"+c+"}");this.s.startTime=a.getTime();this.gf=!1;this.s.active=!0;this.C.Sd=!0}}else this.Gf&&this.D.xk!=this.Vb&&(this.he("{"+this.D.xk+"}"),this.C.enabled?
(this.s.active=!1,this.C.Sd=!0):this.s.active=!0),this.s.startTime=a.getTime()}else this.Uk(e)}else if(c=this.D.ja[0],e=this.D.ja[1],f=this.D.ja[2],g=this.D.ja[3],3!=g.ub&&(g=0),this.s.zi||this.v.te||this.qb.ud||b){if(this.gf=!0,this.s.startTime=a.getTime(),this.Ad=b){for(this.ue=this.Gh=0;this.ue<this.D.length/10;)this.ue+=this.o.b.duration;e=10*this.o.b.currentTime;for(b=Math.floor(e);!this.He(b,3)&&0<b;)b--;b=this.He(b,3);b.value==this.Za?this.ff=-1:(this.ff=b.value,this.tg=e,this.Fh=Math.max(5,
b.time+b.mb-e))}}else{b=this.s.bd;k={};for(k.pan=c.value;360<k.pan;)k.pan-=360;for(;-360>k.pan;)k.pan+=360;k.tilt=e.value;k.fov=f.value;k.projection=g?g.value:4;k.timingFunction=3;k.speed=1;this.v.Ai=!0;this.Zg(k);this.s.active=!0;this.s.bd=b}}else if(0<this.s.ah&&this.Gf&&b>=1E3*this.s.ah){if(1<this.La.length){if(this.s.Bi){b=1E3;do c=this.La[Math.floor(Math.random()*this.La.length)];while(b--&&c==this.Vb)}else b=this.La.indexOf(this.Vb),b++,b>=this.La.length&&(b=0),c=this.La[b];this.s.startTime=
a.getTime();this.s.od=a.getTime();this.s.timeout=0;this.he("{"+c+"}");this.s.active=!0;this.C.Sd=!0}}else b=a.getTime(),e=c=1E3/60,0!=this.s.od&&(e=b-this.s.od),this.j.d=this.s.sh*(0-this.j.c)/100,this.f.d=this.s.sh*(this.f.Pa-this.f.c)/100,this.pan.d=.95*this.pan.d+-this.s.speed*this.Dd()*.05,c=e/c,this.pan.c+=this.pan.d*c,this.j.c+=this.j.d*c,this.f.c+=this.f.d*c,this.s.od=b,this.update();3E3<a.getTime()-this.s.Xg&&!this.s.Cg&&(this.Ba.style.cursor="none",this.s.Cg=!0)}else!this.qb.ai&&1E3<a.getTime()-
this.Ke&&(this.Ia.splice(this.Ia.indexOf(this.D),1),this.D=this.tf(!1),this.zb=this.D.Ta,this.s.active=!1,this.s.Ig=!0),this.s.enabled&&!this.X.gb&&a.getTime()-this.Ke>1E3*this.s.timeout&&(this.s.hg&&this.Kg()||!this.s.hg)&&(this.s.active=!0,this.s.startTime=a.getTime(),this.s.od=0,this.pan.d=0,this.j.d=0,this.f.d=0),!this.va.enabled||0!=this.ee||this.X.gb||0==this.pan.d&&0==this.j.d&&0==this.f.d||(this.pan.d*=.9,this.j.d*=.9,this.f.d*=.9,this.pan.c+=this.pan.d,this.j.c+=this.j.d,this.kf(this.f.d),
1E-4>this.pan.d*this.pan.d+this.j.d*this.j.d+this.f.d*this.f.d&&(this.pan.d=0,this.j.d=0,this.f.d=0),this.update())};b.prototype.tn=function(a){var b=this.C;if(b.zd){var c=a.getTime()-b.yl,c=c/(1E3*b.xl);if(1<=c){b.zd=!1;for(c=0;c<this.Fa.jg.length;c++)this.Fa.Zh(this.Fa.jg[c]);b.Ui=a.getTime();this.dl();b.qe=!0;0==b.Ob||b.df||(4==b.Ob?(this.D=this.tf(!0,b.me,b.ne,b.xd),this.zb=this.D.Ta,this.s.active=!0,this.qb.ud=!0):this.moveTo(b.me,b.ne,b.xd,b.Qd,0,b.Zc))}else b.Ck(c)}else b.qe&&(c=a.getTime()-
b.Ui,c/=1E3*b.ug,1<=c?(b.qe=!1,this.Ke=a.getTime(),this.update(),0!=b.Ob&&b.df&&(4==b.Ob?(this.D=this.tf(!0,b.me,b.ne,b.xd),this.zb=this.D.Ta,this.s.active=!0,this.qb.ud=!0):this.moveTo(b.me,b.ne,b.xd,b.Qd,0,b.Zc)),4!=b.Ob&&(this.Yf(b.yi),this.Zf(b.hj),this.Xf(b.oi),this.s.active=b.Sd,b.Sd=!1),this.s.od=0,this.ga&&this.Rh(),this.xg=!1):b.Ck(c));b=this.mn;b.Ql&&(b.Eg?a.getTime()-b.Xh>=1E3*b.fm&&(b.Eg=!1):(b.current+=b.Ic,0>b.current&&(b.current=0,b.Ic=-b.Ic,b.Eg=!0,b.Xh=a.getTime()),1<b.current&&(b.current=
1,b.Ic=-b.Ic,b.Eg=!0,b.Xh=a.getTime())))};b.prototype.xn=function(){var a,b=this.w;if(0<b.cb.length){for(a=0;a<b.cb.length;a++)b.Dc[a]!=b.Eb[a]&&(b.Dc[a]>b.Eb[a]?(b.Eb[a]+=.05,b.Dc[a]<b.Eb[a]&&(b.Eb[a]=b.Dc[a])):(b.Eb[a]-=.05,b.Dc[a]>b.Eb[a]&&(b.Eb[a]=b.Dc[a],-1!=b.nh.indexOf(b.cb[a])&&(b.nh.splice(b.nh.indexOf(b.cb[a]),1),b.cb.splice(a,1),b.Dc.splice(a,1),b.Eb.splice(a,1)))));this.update()}if(2==b.mode)for(a=0;a<this.P.length;a++){var c=this.P[a];"poly"==c.type&&c.eb!=c.oa&&(c.eb>c.oa?(c.oa+=b.Ic,
c.eb<c.oa&&(c.oa=c.eb)):(c.oa-=b.Ic,c.eb>c.oa&&(c.oa=c.eb)),this.update())}3==b.mode&&b.eb!=b.oa&&(b.eb>b.oa?(b.oa+=b.Ic,b.eb<b.oa&&(b.oa=b.eb)):(b.oa-=b.Ic,b.eb>b.oa&&(b.oa=b.eb)),this.update())};b.prototype.wn=function(){var a=this.va;this.X.gb&&(this.A.ld?(a.aa.x=.4*(this.Y.ba.x-a.ba.x),a.aa.y=.4*(this.Y.ba.y-a.ba.y),a.ba.x+=a.aa.x,a.ba.y+=a.aa.y):(a.aa.x=.1*-this.Y.aa.x*this.A.sensitivity/8,a.aa.y=.1*-this.Y.aa.y*this.A.sensitivity/8),this.sl(a.aa.x,a.aa.y),this.update());a.f.active&&(this.pj(.4*
(a.f.Wb-this.f.c)),.001>Math.abs(a.f.Wb-this.f.c)/this.f.c&&(a.f.active=!1),this.update());if(a.enabled&&(0!=a.aa.x||0!=a.aa.y)&&!this.X.gb){var b=.9*(1-a.Oi);a.aa.x=b*a.aa.x;a.aa.y=b*a.aa.y;.01>a.aa.x*a.aa.x+a.aa.y*a.aa.y?(a.aa.x=0,a.aa.y=0):(this.sl(a.aa.x,a.aa.y),this.update())}};b.prototype.sn=function(){if(this.A.Qk&&this.A.ld){var a=new g;a.pan=this.pan.c;a.j=this.j.c;a.f=this.f.c;this.Ae(a);this.Ae(a);this.Ae(a);var b=a.pan-this.pan.c,c=a.j-this.j.c,a=a.f-this.f.c;if(0!=b||0!=c||0!=a){var e;
e=.2+.9*Math.min((Math.abs(b)+Math.abs(c)+Math.abs(a))/Math.abs(Math.min(this.f.c,100))*.3,1);this.pan.c+=b*e;this.j.c+=c*e;this.f.c+=a*e;this.va.Oi=.3;this.update()}else this.va.Oi=0}else this.yg();if(2!=this.jb){for(;360<this.pan.c;)this.pan.c-=360;for(;-360>this.pan.c;)this.pan.c+=360}};b.prototype.un=function(){if(0!=this.ee){var a=this.A.sensitivity/8;switch(this.ee){case 37:case 65:this.vg(a*this.Dd(),!0);break;case 38:case 87:this.wg(a*this.Dd(),!0);break;case 39:case 68:this.vg(-a*this.Dd(),
!0);break;case 40:case 83:this.wg(-a*this.Dd(),!0);break;case 43:case 107:case 16:case 81:this.A.ui||this.kf(-a,!0);break;case 17:case 18:case 109:case 45:case 91:case 69:this.A.ui||this.kf(a,!0)}this.update()}};b.prototype.vn=function(){if(!this.Kg()&&this.Cf&&5<this.g.Nk){var a,b=0,c=this.Hb.length;if(this.mg)c=50,this.Yh<c&&this.Yh++,b=this.Yh;else for(a=0;a<c;a++)(this.Hb[a].complete&&this.Hb[a].src!=this.zj||""==this.Hb[a].src)&&b++;b==c?(this.eh=1,this.isLoaded=!0,this.N&&this.N.ggLoaded&&this.N.ggLoaded(),
this.s.hg&&this.s.enabled&&!this.v.active&&!this.C.zd&&(this.s.active=!0,this.s.startTime=(new Date).getTime(),this.s.od=0)):this.eh=b/(1*c)}};b.prototype.Ei=function(){var a=new Date;this.vb&&""!==this.be&&!this.ha&&document.hasOwnProperty(this.be)&&document[this.be].setPan&&0==this.jm--&&(this.ha=document[this.be],this.Ec=this.ea=!1,this.ta&&(this.ta.style.visibility="hidden"),this.ha.setLocked(!0),this.ha.setSlaveMode(!0),this.ha.readConfigString(this.Uh),this.Wc("Flash player '"+this.be+"' connected."));
this.Jg++;120<=this.Jg&&(this.O("Fps: "+1E3*this.Jg/(a.getTime()-this.jk)),this.jk=a.getTime(),this.Jg=0);this.Ki=this.gh=0;this.bj&&(this.ad(),this.bj=!1);this.wn();this.un();this.vn();this.rn(a);this.sn();this.tn(a);this.ma.Fo();(0<=this.w.mode||0<this.w.cb.length)&&this.xn();this.yh();this.ya&&(0<this.Fg?this.Fg--:(this.ya=!1,this.Fg=0),this.C.qe||this.C.zd||this.lg());var b=this;setTimeout(function(){b.Ei()},1E3/60)};b.prototype.vf=function(a){switch(a){case 4:a=Math.min(110,this.f.max);break;
case 12:a=Math.min(270,this.f.wi);a=Math.min(360*this.Rd(),a);a=Math.min(360/this.Rd(),a);break;case 9:a=Math.min(270,this.f.xi);break;default:a=90}return a};b.prototype.ol=function(){var a=this;setTimeout(function(){a.Ve(!1)},10);setTimeout(function(){a.Ve(!1)},100)};b.prototype.yh=function(){this.Th.Cj(this.pan.c,this.j.c);for(var a=0;a<this.S.length+this.J.length;a++){var b;if(a<this.S.length)b=this.S[a];else if(b=this.J[a-this.S.length],b.Xc)continue;b.yh()}};b.prototype.xj=function(a){var b=
"",c,e,f,g,k,h=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),c=c<<2|e>>4,e=(e&15)<<4|g>>2,f=(g&3)<<6|k,b+=String.fromCharCode(c),64!=
g&&(b+=String.fromCharCode(e)),64!=k&&(b+=String.fromCharCode(f));while(h<a.length);return b};b.prototype.fo=function(a,b){var c,e,f=this;if(0!=f.Of.length||!f.A.Df||f.A.nf||f.A.zg)if(f.Oc)f.Oc=null,f.U.removeChild(f.Oc);else{f.Oc=document.createElement("div");var g=f.Oc;c="left: "+a+"px;"+("top:\t "+b+"px;")+"z-index: 32000;";c+="position:relative;";c+="display: table;";c+="background-color: white;";c+="border: 1px solid lightgray;";c+="box-shadow: 1px 1px 3px #333;";c+="font-family: Verdana, Arial, Helvetica, sans-serif;";
c+="font-size: 9pt;";c+="opacity : 0.95;";g.setAttribute("style",c);g.setAttribute("class","gg_contextmenu");c=document.createElement("style");e=document.createTextNode(".gg_context_row:hover { background-color: #3399FF }");c.type="text/css";c.styleSheet?c.styleSheet.cssText=e.nodeValue:c.appendChild(e);g.appendChild(c);for(e=0;e<f.Of.length;e++){var k=f.Of[e],h=document.createElement("div");c="text-align: left;";c+="margin: 0;";c+="padding: 5px 20px;";c+="vertical-align: left;";h.setAttribute("style",
c);h.setAttribute("class","gg_context_row");c=document.createElement("a");c.href=k.url;c.target="_blank";c.innerHTML=k.text;c.setAttribute("style","color: black; text-decoration: none;");h.appendChild(c);g.appendChild(h)}0<f.Of.length&&(!f.A.Df||f.A.nf||f.A.zg)&&g.appendChild(document.createElement("hr"));if(f.A.zg&&f.ea){k=[];k.push({text:"Rectilinear Projection",Sf:4});k.push({text:"Stereographic Projection",Sf:9});k.push({text:"Fisheye Projection",Sf:12});for(e=0;e<k.length;e++){var h=k[e],m=document.createElement("div");
m.setAttribute("class","gg_context_row");c="text-align: left;";c+="margin: 0;";c=f.Za==h.Sf?c+"padding: 5px 20px 5px 7px;":c+"padding: 5px 20px;";c+="vertical-align: left;";c+="cursor: pointer;";m.setAttribute("style",c);m.onclick=function(a){return function(){f.Nh(a,1);f.update()}}(h.Sf);f.Za==h.Sf?m.innerHTML="&#10687; "+h.text:m.innerHTML=h.text;g.appendChild(m)}f.A.Df&&!f.A.nf||g.appendChild(document.createElement("hr"))}f.A.nf&&(e=document.createElement("div"),e.setAttribute("class","gg_context_row"),
c="text-align: left;margin: 0;padding: 5px 20px;",c+="vertical-align: left;",c+="cursor: pointer;",e.setAttribute("style",c),e.onclick=function(){f.uh()},e.innerHTML=f.Sg()?"Exit Fullscreen":"Enter Fullscreen",g.appendChild(e));c="<<L>>"+String(f.Ja);c=c.toUpperCase();f.A.Df&&"U"==c.charAt(2)||(e=document.createElement("div"),c="text-align: left;margin: 0;padding: 5px 20px;",c+="vertical-align: left;",e.setAttribute("style",c),e.setAttribute("class","gg_context_row"),c=document.createElement("a"),
c.href=f.xj("aHR0cDovL3Bhbm8ydnIuY29tLw=="),c.target="_blank",c.innerHTML=f.xj("Q3JlYXRlZCB3aXRoIFBhbm8yVlI="),c.setAttribute("style","color: black; text-decoration: none;"),e.appendChild(c),g.appendChild(e));f.U.insertBefore(f.Oc,f.U.firstChild);g.onclick=function(){f.Oc&&(f.U.removeChild(f.Oc),f.Oc=null)};g.oncontextmenu=g.onclick}};b.prototype.Pl=function(){var a=this,b;b=a.Ba;a.control=b;a.control=b;a.ol();setTimeout(function(){a.Ei()},10);setTimeout(function(){a.Dk()},200);setTimeout(function(){a.se();
a.lg()},10);b.addEventListener&&(b.addEventListener("touchstart",function(b){a.yo(b)},!1),b.addEventListener("touchmove",function(b){a.xo(b)},!1),b.addEventListener("touchend",function(b){a.wo(b)},!1),b.addEventListener("touchcancel",function(b){a.vo(b)},!1),b.addEventListener("pointerdown",function(b){a.wk(b)},!1),b.addEventListener("MSPointerDown",function(b){a.wk(b)},!1),b.addEventListener("MSGestureStart",function(b){a.Kj(b)},!1),b.addEventListener("MSGestureEnd",function(b){a.Jj(b)},!1),b.addEventListener("MSGestureChange",
function(b){a.fn(b)},!1),b.addEventListener("gesturestart",function(b){a.Kj(b)},!1),b.addEventListener("gesturechange",function(b){a.mm(b)},!1),b.addEventListener("gestureend",function(b){a.Jj(b)},!1),b.addEventListener("mousedown",function(b){a.cn(b)},!1),b.addEventListener("mousemove",function(b){a.bn(b)},!1),document.addEventListener("mouseup",function(b){a.an(b)},!1),b.addEventListener("mousewheel",function(b){a.vk(b)},!1),b.addEventListener("DOMMouseScroll",function(b){a.vk(b)},!1),document.addEventListener("keydown",
function(b){a.Ym(b)},!1),document.addEventListener("keyup",function(b){a.Zm(b)},!1),window.addEventListener("orientationchange",function(){a.ol()},!1),window.addEventListener("resize",function(){a.se()},!1),window.addEventListener("blur",function(){a.ln()},!1),a.U.addEventListener("webkitfullscreenchange",function(){a.bh()},!1),document.addEventListener("mozfullscreenchange",function(){a.bh()},!1),window.addEventListener("webkitfullscreenchange",function(){a.bh()},!1),document.addEventListener("MSFullscreenChange",
function(){a.bh()},!1));b.oncontextmenu=function(b){void 0===b&&(b=window.event);if(b.target&&!a.md(b.target))return!0;if(!b.ctrlKey){b=a.wf(b);var d=a.ce();a.fo(b.x-d.x,b.y-d.y);return!1}return!0}};b.prototype.jj=function(){for(var a=0;a<this.P.length;a++)if("point"==this.P[a].type&&(this.Qa&&this.Qa.addSkinHotspot?(this.P[a].Fe(),this.P[a].b=new this.Qa.addSkinHotspot(this.P[a])):this.P[a].b=new m.zl(this,this.P[a]),this.P[a].b.__div.style.left="-1000px",this.P[a].b.__div.style.top="-1000px",this.P[a].b&&
this.P[a].b.__div)){var b=this.Ba.firstChild;b?this.Ba.insertBefore(this.P[a].b.__div,b):this.Ba.appendChild(this.P[a].b.__div)}};b.prototype.wl=function(){var a,b=document.createElement("fakeelement"),c={OTransition:"oTransitionEnd",MSTransition:"msTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",transition:"transitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]};b.prototype.Jb=function(a){var b=[];a=new RegExp(a,"");for(var c=0;c<this.S.length;c++)a.test(this.S[c].id)&&
b.push(this.S[c]);for(c=0;c<this.J.length;c++)a.test(this.J[c].id)&&b.push(this.J[c]);for(c=0;c<this.Xa.length;c++)a.test(this.Xa[c].id)&&b.push(this.Xa[c]);return b};b.prototype.ym=function(a){if("_videopanorama"==a)return this.o.b;a=this.Jb(a);return 0<a.length?a[0].b:null};b.prototype.Ik=function(a,b){for(var c=0;c<this.J.length;c++)if(this.J[c].id==a)return this.J[c].b=b,this.J[c];c=new m.Rk(this);c.registerElement(a,b);return c};b.prototype.Vc=function(a){if(this.vb){var b=this.ha;if(b)return b.isPlaying(a)}else{if("_main"===
a)return!0;a=this.Jb(a);if(0<a.length)return a[0].ia?a[0].ke:!a[0].b.ended&&!a[0].b.paused}return!1};b.prototype.je=function(a,b){if(this.vb){var c=this.ha;c&&c.playSound(a,b)}else try{for(var c=this.Jb(a),e=0;e<c.length;e++){var f=c[e];f.Mc=b&&!isNaN(Number(b))?Number(b)-1:f.loop-1;-1==f.Mc&&(f.Mc=1E7);this.O(f.b);f.ia?f.Jc():f.b.play()}}catch(g){this.O(g)}};b.prototype.Ek=function(a,b){for(var c=this.Jb(a),e=0;e<c.length;e++){var f=c[e];this.Vc(f.id)?this.Fi(f.id):this.je(f.id,b)}};b.prototype.yn=
function(a,b){for(var c=this.Jb(a),e=0;e<c.length;e++){var f=c[e];this.Vc(f.id)?this.el(f.id):this.je(f.id,b)}};b.prototype.Fi=function(a){if(this.vb){var b=this.ha;b&&b.pauseSound(a)}else try{if("_main"==a){for(b=0;b<this.S.length;b++)this.S[b].ia?this.S[b].Lh():this.S[b].b.pause();for(b=0;b<this.J.length;b++)this.J[b].b.pause()}else for(var c=this.Jb(a),b=0;b<c.length;b++){var e=c[b];e.ia?e.Lh():e.b.pause()}}catch(f){this.O(f)}};b.prototype.Kl=function(a,b){for(var c=this.Jb(a),e=0;e<c.length;e++){var f=
c[e];0==b||1==b?f.yf&&f.yf(1==b):2==b&&f.Sc&&f.Sc()}};b.prototype.el=function(a){var b;if(this.vb)(b=this.ha)&&b.stopSound(a);else try{if("_main"===a){for(b=0;b<this.S.length;b++)this.S[b].ia?this.S[b].ye():(this.S[b].b.pause(),this.S[b].b.currentTime=0);for(b=0;b<this.J.length;b++)this.J[b].b.pause(),this.J[b].b.currentTime=0}else{var c=this.Jb(a);for(b=0;b<c.length;b++){var e=c[b];e.ia?e.ye():e.b&&e.b.pause&&(e.b.pause(),e.b.currentTime=0,this.Rg&&(e.td(),e.addElement()))}}}catch(f){this.O(f)}};
b.prototype.io=function(a){a=this.Jb(a);return 0<a.length?(a=a[0],a.ia?a.Sl():a.b?a.b.currentTime:0):0};b.prototype.jo=function(a,b){var c=this.Jb(a);0<c.length&&(c=c[0],c.ia?(0>b&&(b=0),b>c.hf.duration&&(b=c.hf.duration-.1),c.Tl(b)):c.b&&(0>b&&(b=0),b>c.b.duration&&(b=c.b.duration-.1),c.b.currentTime=b))};b.prototype.bo=function(a,b){if(this.vb){var c=this.ha;c&&c.setVolume(a,b)}else try{var e=Number(b);1<e&&(e=1);0>e&&(e=0);"_videopanorama"===a&&this.o.b&&(this.o.b.volume=e);if("_main"===a){this.V=
e;for(c=0;c<this.S.length;c++)this.S[c].b.volume=this.S[c].level*this.V;for(c=0;c<this.J.length;c++)this.J[c].b.volume=this.J[c].level*this.V;this.o.b&&(this.o.b.volume=this.V)}else{var f=this.Jb(a);this.O(f);for(c=0;c<f.length;c++){var g=f[c];g.b&&null!=g.b.volume&&(g.b.volume=e*this.V);g.level=e}}}catch(k){this.O(k)}};b.prototype.$l=function(a,b){if(this.vb){var c=this.ha;c&&c.changeVolume(a,b)}else try{var e;"_videopanorama"===a&&this.o.b&&(this.o.b.volume=this.o.b.volume+Number(b));if("_main"===
a){c=this.V;c+=Number(b);1<c&&(c=1);0>c&&(c=0);this.V=c;for(e=0;e<this.S.length;e++)this.S[e].b.volume=this.S[e].level*this.V;for(e=0;e<this.J.length;e++)this.J[e].b.volume=this.J[e].level*this.V;this.o.b&&(this.o.b.volume=this.V)}else{var f=this.Jb(a);for(e=0;e<f.length;e++){var g=f[e],c=g.level,c=c+Number(b);1<c&&(c=1);0>c&&(c=0);g.level=c;g.b&&null!=g.b.volume&&(g.b.volume=c*this.V)}}}catch(k){this.O(k)}};b.prototype.dl=function(){try{for(var a=this,b=!1,c=!1,e=0;e<this.S.length;e++){var f=this.S[e];
-1==f.loop||this.Vc(f.id)||(this.Ha&&this.Fa.enabled&&4!=f.mode&&6!=f.mode?this.Fa.uj?(f.ia?f.Jc():(f.b.play(),f.b.currentTime=0),f.ka=0,c=!0):b=!0:4==f.mode||6==f.mode||"_background"==f.id&&this.Vc(f.id)||(f.ia?f.Jc():(f.b.play(),f.b.currentTime&&(f.b.currentTime=0))))}b&&setTimeout(function(){a.Fa.oo()},1E3*this.Fa.mb);c&&(this.Fa.lo=this.Ha.currentTime,this.Fa.ko=setInterval(function(){a.Fa.im()},10))}catch(g){this.O(g)}};b.prototype.Mk=function(){for(var a;0<this.P.length;)a=this.P.pop(),a.b&&
(this.Ba.removeChild(a.b.__div),delete a.b),a.b=null};b.prototype.Ri=function(a){this.qg=a;0!=a?this.U.style.zIndex=a.toString():this.U.style.zIndex="auto";this.Ca&&this.Ca.Kc&&(this.Ca.Kc.zIndex=(a+4).toString());this.Ba.style.zIndex=(a+4).toString();this.ta.style.zIndex=(a+3).toString();this.ua.style.zIndex=(a+5).toString();for(var b=0;b<this.J.length+this.Xa.length;b++){var c;c=b<this.J.length?this.J[b]:this.Xa[b-this.J.length];c.b&&(c.b.style.zIndex=(a+(c.xb?8E4:0)).toString())}};b.prototype.Ve=
function(a){var b=this.isFullscreen!==a;this.isFullscreen!==a&&(this.isFullscreen=a,this.update(100));if(this.isFullscreen){if(this.zh)try{this.U.webkitRequestFullScreen?this.U.webkitRequestFullScreen():this.U.mozRequestFullScreen?this.U.mozRequestFullScreen():this.U.msRequestFullscreen?this.U.msRequestFullscreen():this.U.requestFullScreen?this.U.requestFullScreen():this.U.requestFullscreen&&this.U.requestFullscreen()}catch(c){this.O(c)}this.U.style.position="absolute";a=this.ce();this.U.style.left=
window.pageXOffset-a.x+this.margin.left+"px";this.U.style.top=window.pageYOffset-a.y+this.margin.top+"px";this.Ri(10);document.body.style.overflow="hidden";b&&this.N&&this.N.ggEnterFullscreen&&this.N.ggEnterFullscreen()}else{if(this.zh)try{document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.fullScreen&&(document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&
document.exitFullscreen())}catch(c){this.O(c)}this.U.style.position="relative";this.U.style.left="0px";this.U.style.top="0px";this.Ri(0);document.body.style.overflow="";b&&this.N&&this.N.ggExitFullscreen&&this.N.ggExitFullscreen()}this.se()};b.prototype.uh=function(){this.Ve(!this.isFullscreen)};b.prototype.hm=function(){this.Ve(!0)};b.prototype.exitFullscreen=function(){this.Ve(!1)};b.prototype.tm=function(){return this.isFullscreen};b.prototype.al=function(a,b,c){this.s.enabled=!0;this.s.active=
!0;this.s.od=0;this.s.startTime=(new Date).getTime();a&&0!=a&&(this.s.speed=a);b&&(this.s.timeout=b);c&&(this.s.sh=c)};b.prototype.po=function(){this.s.active=!1;this.s.enabled=!1;this.s.bd=!1};b.prototype.to=function(){this.s.enabled=!this.s.active;this.s.active=this.s.enabled;this.s.od=0;this.s.enabled&&(this.s.startTime=(new Date).getTime())};b.prototype.mo=function(){this.s.bd||(this.s.bd=!0,this.s.nj=this.s.enabled,this.al())};b.prototype.tj=function(a){if(this.Be=document.getElementById(a)){this.Be.innerHTML=
"";this.U=document.createElement("div");this.U.onselectstart=function(){return!1};O&&this.U.setAttribute("id","viewport");a="top:\t0px;left: 0px;position:relative;-ms-touch-action: none;touch-action: none;text-align: left;"+(this.Ja+"user-select: none;");this.U.setAttribute("style",a);this.Be.appendChild(this.U);this.B=document.createElement("div");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ja+"user-select: none;");
O&&this.B.setAttribute("id","viewer");this.B.setAttribute("style",a);this.U.appendChild(this.B);if(this.vb){var b=document.createElement("div");a="top:\t0px;left: 0px;width:  100%;height: 100%;overflow: hidden;position:absolute;-ms-touch-action: none;touch-action: none;"+(this.Ja+"user-select: none;");b.setAttribute("id",this.di);b.setAttribute("style",a);this.B.appendChild(b)}this.Ca&&(this.Ca.Kc=document.createElement("canvas"),O&&this.Ca.Kc.setAttribute("id","lensflarecanvas"),a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+
(this.Ja+"user-select: none;"),a+=this.Ja+"pointer-events: none;",this.Ca.Kc.setAttribute("style",a),this.U.appendChild(this.Ca.Kc));this.Ba=document.createElement("div");O&&this.Ba.setAttribute("id","hotspots");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;";this.ek&&(a+="background-image: url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);");this.Id&&!this.ea&&(a+=this.Ja+"transform: translateZ(9999999px);");a+=this.Ja+"user-select: none;";
this.Ba.setAttribute("style",a);this.U.appendChild(this.Ba);this.ta=document.createElement("canvas");O&&this.ta.setAttribute("id","hotspotcanvas");a="top:\t0px;left: 0px;width:  100px;height: 100px;overflow: hidden;position:absolute;"+(this.Ja+"user-select: none;");a+=this.Ja+"pointer-events: none;";this.ta.setAttribute("style",a);this.U.appendChild(this.ta);this.ua=document.createElement("div");O&&this.ua.setAttribute("id","hotspottext");this.ua.setAttribute("style","top:\t0px;left: 0px;position:absolute;padding: 3px;visibility: hidden;");
this.ua.innerHTML=" Hotspot text!";this.U.appendChild(this.ua);this.divSkin=this.N=this.Ba;this.Ri(0)}else alert("container not found!")};b.prototype.vj=function(a){this.ya=!0;return function(){a.Oa&&(a.g&&a.g.complete?(a.loaded=!0,a.Oa.drawImage(a.g,0,0,a.width,a.height),a.g=null,a.sd=null):a.sd&&a.sd.complete&&!a.loaded&&(a.Oa.drawImage(a.sd,0,0,a.width,a.height),a.sd=null))}};b.prototype.sj=function(a){var b,c,e,f=128;this.g.Qe&&(this.B.style.backgroundColor=this.g.Qe.replace("0x","#"));a?(f=this.jf,
this.Xe=1):this.jc>f&&(f=this.jc);for(e=0;6>e;e++){c=this.fb.$a[e];a?(c.width=this.jf,c.height=this.jf):(c.K=document.createElement("canvas"),c.K.width=this.jc,c.K.height=this.jc,c.width=this.jc,c.height=this.jc,c.Oa=c.K.getContext("2d"));b="position:absolute;";b+="left: 0px;";b+="top: 0px;";b+="width: "+f+"px;";b+="height: "+f+"px;";a&&(b+="outline: 1px solid transparent;");b+=this.Ja+"transform-origin: 0% 0%;";b+="-webkit-user-select: none;";b+=this.Ja+"transform: ";var g;g="";var k=1;this.Se&&
(k=100);g=4>e?g+("rotateY("+-90*e+"deg)"):g+("rotateX("+(4==e?-90:90)+"deg)");this.Se&&(g+=" scale("+k+")");g+=" translate3d("+-f/2+"px,"+-f/2+"px,"+-f*k/(2*this.Xe)+"px)";b+=g+";";c.Tj=g;a||(c.K.setAttribute("style",b),this.B.insertBefore(c.K,this.B.firstChild))}if(!a){for(e=0;6>e;e++)c=this.fb.$a[e],""!=this.De[e]&&(c.sd=new Image,c.sd.crossOrigin=this.crossOrigin,c.sd.onload=this.vj(c),c.sd.setAttribute("src",this.Xb(this.De[e])),this.Hb.push(c.sd));for(e=0;6>e;e++)c=this.fb.$a[e],c.loaded=!1,
c.g=new Image,c.g.crossOrigin=this.crossOrigin,c.g.onload=this.vj(c),c.g.setAttribute("src",this.Xb(this.Bg[e])),this.Hb.push(c.g)}};b.prototype.ih=function(){var a;this.va.aa.x=0;this.va.aa.y=0;if(this.Ec){for(a=0;a<this.fb.$a.length;a++)this.fb.$a[a].K&&this.fb.$a[a].K.setAttribute&&(this.fb.$a[a].K.setAttribute("src",this.zj),this.B.removeChild(this.fb.$a[a].K));if(this.g.I){for(a=0;a<this.g.I.length;a++){var b=this.g.I[a],c;for(c in b.W)if(b.W.hasOwnProperty(c)){var e=b.W[c];e.visible=!1;e.K&&
(e.Oa&&e.Oa.clearRect(0,0,e.Oa.canvas.width,e.Oa.canvas.height),this.vh.push(e.K));e.g&&delete e.g;e.hb&&(this.H.deleteTexture(e.hb),this.Tc--);e.Oa=null;e.K=null;e.g=null}delete b.W}delete this.g.I;this.g.I=null}}this.ma.ih();c=[];for(a=0;a<this.J.length;a++)b=this.J[a],b.Xc?c.push(b):b.td();for(a=0;a<this.Xa.length;a++)this.Xa[a].td();this.w.If=-1;this.ta.style.visibility="hidden";this.jb=0;b=[];this.Fa.jg=[];for(a=0;a<this.S.length;a++)if(e=this.S[a],0==e.mode||1==e.mode)b.push(e),this.O("Keep in list "+
e.id);else if(this.Ha&&this.Fa.enabled&&this.Vc(e.id))this.Fa.jg.push(e),1!=this.C.Na&&2!=this.C.Na&&this.Fa.Zh(e);else{try{e.ia?e.ye():e.b.pause()}catch(f){this.O(f)}e.td()}this.S=b;this.J=c;this.Xa=[];this.o.b&&(this.U.removeChild(this.o.b),this.o.b=null,a=this.Jb("_videopanorama"),0<a.length&&(a[0].b=null));this.o.nd=!1;this.o.Tg=!1};b.prototype.Qj=function(){var a=1,b=-1!=navigator.userAgent.indexOf("Mac");window.devicePixelRatio&&b&&(a=window.devicePixelRatio);return{Bh:screen.width*a,Og:screen.height*
a}};b.prototype.Mj=function(){var a=this.Qj();return a.Bh>a.Og?a.Bh:a.Og};b.prototype.Ji=function(a,b){var c=(new DOMParser).parseFromString(a,"text/xml");this.Uh=a;this.Hk(c,b);this.ha&&(this.O("Apply to Flash player"),this.ha.readConfigString(this.Uh),this.ha.setLocked(!0),this.ha.setSlaveMode(!0))};b.prototype.Gk=function(a,b,c){try{var e;e=new XMLHttpRequest;e.open("GET",a,!1);e.send(null);if(e.responseXML){var f=a.lastIndexOf("/");0<=f&&(this.Bd=a.substr(0,f+1));2<=arguments.length&&null!=b&&
(this.Bd=b);this.Ji(e.responseText,c)}else alert("Error loading panorama XML")}catch(g){alert("Error:"+g)}};b.prototype.An=function(a,b,c,e){var f;f=new XMLHttpRequest;var g=this;f.onload=function(k){if(4<=f.readyState)if(f.responseXML){var h=a.lastIndexOf("/");0<=h&&(g.Bd=a.substr(0,h+1));3<=arguments.length&&null!=c&&(g.Bd=c);g.Ji(f.responseText,e);b&&b()}else alert("Error loading panorama XML");else console.error("Wrong state loading XML:"+f.statusText)};f.onerror=function(){console.error("Error loading XML:"+
f.statusText)};f.open("GET",a,!0);f.send(null)};b.prototype.Mh=function(a){var b="";"{"==a.charAt(0)&&(b=a.substr(1,a.length-2));a={oldNodeId:this.Vb,nodeId:b};this.il("beforechangenodeid",a);""!=this.Vb&&-1==this.gj.indexOf(this.Vb)&&this.gj.push(this.Vb);this.kk=this.Vb;this.Vb=b;this.O("change active node: "+b);this.Qa&&this.Qa.changeActiveNode&&this.Qa.changeActiveNode("{"+b+"}");this.il("changenodeid",a)};b.prototype.Lj=function(){return this.Vb};b.prototype.Nj=function(){if(0<this.La.length){var a;
a=this.La.indexOf(this.Vb);a++;a>=this.La.length&&(a=0);return this.La[a]}return""};b.prototype.Jm=function(){if(0<this.La.length){var a;a=this.La.indexOf(this.Vb);a--;0>a&&(a=this.La.length-1);return this.La[a]}return""};b.prototype.xm=function(){return this.kk};b.prototype.jn=function(a){return-1!=this.gj.indexOf(a)};b.prototype.Hk=function(a,b){var c=a.firstChild;this.pe=[];this.La=[];this.Dg=[];if("tour"==c.nodeName){this.Gf=!0;var e="",f;(f=c.getAttributeNode("start"))&&(e=f.nodeValue.toString());
this.hasOwnProperty("startNode")&&this.startNode&&(e=String(this.startNode),this.startNode="");for(var g=c.firstChild,k="",c="";g;){if("panorama"==g.nodeName){if(f=g.getAttributeNode("id"))k=f.nodeValue.toString(),""==e&&(e=k),""==c&&(c=k),this.pe[k]=g,this.La.push(k);for(f=g.firstChild;f;){if("userdata"==f.nodeName){var h=this.Gg(f);this.ej[k]=h;h.customnodeid&&(this.Dg[h.customnodeid]=k)}f=f.nextSibling}}g=g.nextSibling}this.pe.hasOwnProperty(e)||(g=this.Dg[e])&&(e=g);this.pe.hasOwnProperty(e)||
(this.Wc("Start node "+e+" not found!"),e=c);this.Ii(this.pe[e],b);this.Mh("{"+e+"}")}else this.Gf=!1,this.Ii(c,b),this.Mh(""),this.La.push("")};b.prototype.Ii=function(a,b){this.Mk();this.Ca&&this.Ca.Cn();this.Ue(this.pb);this.ih();this.Jf=0;for(var c=a.firstChild,e,f,g=0;c;){if("view"==c.nodeName){if(e=c.getAttributeNode("fovmode"))this.f.mode=Number(e.nodeValue);e=c.getAttributeNode("pannorth");this.pan.Ci=1*(e?e.nodeValue:0);for(var k=c.firstChild;k;){"start"==k.nodeName&&(e=k.getAttributeNode("pan"),
this.pan.c=Number(e?e.nodeValue:0),this.pan.Pa=this.pan.c,e=k.getAttributeNode("tilt"),this.j.c=Number(e?e.nodeValue:0),this.j.Pa=this.j.c,e=k.getAttributeNode("roll"),this.M.c=Number(e?e.nodeValue:0),this.M.Pa=this.M.c,e=k.getAttributeNode("fov"),this.f.c=Number(e?e.nodeValue:70),this.f.Pa=this.f.c,e=k.getAttributeNode("projection"),this.dh=Number(e?e.nodeValue:4),this.Yc(this.dh));"min"==k.nodeName&&(e=k.getAttributeNode("pan"),this.pan.min=1*(e?e.nodeValue:0),e=k.getAttributeNode("tilt"),this.j.min=
1*(e?e.nodeValue:-90),e=k.getAttributeNode("fov"),this.f.min=1*(e?e.nodeValue:5),1E-20>this.f.min&&(this.f.min=1E-20),e=k.getAttributeNode("fovpixel"),this.f.Pf=1*(e?e.nodeValue:0));if("max"==k.nodeName){e=k.getAttributeNode("pan");this.pan.max=1*(e?e.nodeValue:0);e=k.getAttributeNode("tilt");this.j.max=1*(e?e.nodeValue:90);e=k.getAttributeNode("fov");this.f.max=1*(e?e.nodeValue:120);180<=this.f.max&&(this.f.max=179.9);if(e=k.getAttributeNode("fovstereographic"))this.f.xi=1*e.nodeValue;if(e=k.getAttributeNode("fovfisheye"))this.f.wi=
1*e.nodeValue;if(e=k.getAttributeNode("scaletofit"))this.A.Sk=1==e.nodeValue}if("flyin"==k.nodeName){if(e=k.getAttributeNode("projection"))this.mc.Bb=Number(e.nodeValue);if(e=k.getAttributeNode("pan"))this.mc.pan=parseFloat(e.nodeValue);if(e=k.getAttributeNode("tilt"))this.mc.j=parseFloat(e.nodeValue);if(e=k.getAttributeNode("fov"))this.mc.f=parseFloat(e.nodeValue)}k=k.nextSibling}}if("autorotate"==c.nodeName){if(e=c.getAttributeNode("speed"))this.s.speed=1*e.nodeValue;if(e=c.getAttributeNode("delay"))this.s.timeout=
1*e.nodeValue;if(e=c.getAttributeNode("returntohorizon"))this.s.sh=1*e.nodeValue;if(e=c.getAttributeNode("nodedelay"))this.s.ah=1*e.nodeValue;if(e=c.getAttributeNode("noderandom"))this.s.Bi=1==e.nodeValue;this.$d&&(this.s.enabled=!0,this.s.active=!1);if(e=c.getAttributeNode("startloaded"))this.s.hg=1==e.nodeValue,this.s.hg&&(this.s.active=!1);if(e=c.getAttributeNode("useanimation"))this.s.dj=1==e.nodeValue;if(e=c.getAttributeNode("syncanimationwithvideo"))this.s.Wi=1==e.nodeValue}if("animation"==
c.nodeName){if(e=c.getAttributeNode("syncanimationwithvideo"))this.s.Wi=1==e.nodeValue;if(e=c.getAttributeNode("useinautorotation"))this.s.dj=1==e.nodeValue;this.Ia=[];for(k=c.firstChild;k;){if("clip"==k.nodeName){this.D=new m.tk;if(e=k.getAttributeNode("animtitle"))this.D.Uo=e.nodeValue.toString();if(e=k.getAttributeNode("cliptitle"))this.D.Ta=e.nodeValue.toString();if(e=k.getAttributeNode("nodeid"))this.D.Vo=e.nodeValue.toString();if(e=k.getAttributeNode("length"))this.D.length=Number(e.nodeValue);
if(e=k.getAttributeNode("animtype"))this.D.Ml=Number(e.nodeValue);if(e=k.getAttributeNode("nextcliptitle"))this.D.yk=e.nodeValue.toString();if(e=k.getAttributeNode("nextclipnodeid"))this.D.xk=e.nodeValue.toString();if(e=k.getAttributeNode("transitiontype"))this.D.zo=Number(e.nodeValue);var h=k.firstChild;for(this.D.ja=[];h;){if("keyframe"==h.nodeName){var B=new m.yc;if(e=h.getAttributeNode("time"))B.time=Number(e.nodeValue);if(e=h.getAttributeNode("value"))B.value=Number(e.nodeValue);if(e=h.getAttributeNode("transitiontime"))B.mb=
Number(e.nodeValue);e=h.getAttributeNode("type");var n=0;e&&(B.type=Number(e.nodeValue),n=Number(e.nodeValue));if(e=h.getAttributeNode("property"))B.ub=Number(e.nodeValue);if(1==n||2==n){if(e=h.getAttributeNode("bezierintime"))B.Td=Number(e.nodeValue);if(e=h.getAttributeNode("bezierinvalue"))B.Hc=Number(e.nodeValue);if(e=h.getAttributeNode("bezierouttime"))B.Ud=Number(e.nodeValue);if(e=h.getAttributeNode("bezieroutvalue"))B.Vd=Number(e.nodeValue)}this.D.ja.push(B)}h=h.nextSibling}this.zb==this.D.Ta&&
(e=this.D.ja,this.$f(e[0].value,e[1].value,e[2].value));this.Ia.push(this.D)}k=k.nextSibling}}"input"==c.nodeName&&(f||(f=c));if(f)for(k=0;6>k;k++)e=f.getAttributeNode("prev"+k+"url"),this.De[k]=e?String(e.nodeValue):"";"altinput"==c.nodeName&&(k=0,(e=c.getAttributeNode("screensize"))&&(k=1*e.nodeValue),0<k&&k<=this.Mj()&&k>g&&(g=k,f=c));if("control"==c.nodeName&&this.$d){if(e=c.getAttributeNode("simulatemass"))this.va.enabled=1==e.nodeValue;if(e=c.getAttributeNode("rubberband"))this.A.Qk=1==e.nodeValue;
if(e=c.getAttributeNode("locked"))this.A.yb=1==e.nodeValue;e&&(this.A.Lf=1==e.nodeValue);if(e=c.getAttributeNode("lockedmouse"))this.A.yb=1==e.nodeValue;if(e=c.getAttributeNode("lockedkeyboard"))this.A.Lf=1==e.nodeValue;if(e=c.getAttributeNode("lockedkeyboardzoom"))this.A.ui=1==e.nodeValue;if(e=c.getAttributeNode("lockedwheel"))this.A.qd=1==e.nodeValue;if(e=c.getAttributeNode("invertwheel"))this.A.bk=1==e.nodeValue;if(e=c.getAttributeNode("speedwheel"))this.A.$k=1*e.nodeValue;if(e=c.getAttributeNode("invertcontrol"))this.A.ld=
1==e.nodeValue;if(e=c.getAttributeNode("sensitivity"))this.A.sensitivity=1*e.nodeValue,1>this.A.sensitivity&&(this.A.sensitivity=1);if(e=c.getAttributeNode("dblclickfullscreen"))this.A.Wh=1==e.nodeValue;if(e=c.getAttributeNode("contextfullscreen"))this.A.nf=1==e.nodeValue;if(e=c.getAttributeNode("contextprojections"))this.A.zg=1==e.nodeValue;if(e=c.getAttributeNode("hideabout"))this.A.Df=1==e.nodeValue;for(k=c.firstChild;k;)"menulink"==k.nodeName&&(h={text:"",url:""},e=k.getAttributeNode("text"),
h.text=e.nodeValue,e=k.getAttributeNode("url"),h.url=e.nodeValue,this.Of.push(h)),k=k.nextSibling}if("transition"==c.nodeName&&this.$d){if(e=c.getAttributeNode("enabled"))this.C.enabled=1==e.nodeValue;if(e=c.getAttributeNode("blendtime"))this.C.ug=e.nodeValue;if(e=c.getAttributeNode("blendcolor"))this.C.we=e.nodeValue.toString();if(e=c.getAttributeNode("type"))this.C.type=e.nodeValue.toString();if(e=c.getAttributeNode("softedge"))this.C.uc=1*e.nodeValue;if(e=c.getAttributeNode("zoomin"))this.C.Na=
e.nodeValue;if(e=c.getAttributeNode("zoomout"))this.C.Ob=e.nodeValue;if(e=c.getAttributeNode("zoomfov"))this.C.cf=e.nodeValue;if(e=c.getAttributeNode("zoomspeed"))this.C.Qd=e.nodeValue;if(e=c.getAttributeNode("zoomoutpause"))this.C.df=1==e.nodeValue}if("soundstransition"==c.nodeName){if(e=c.getAttributeNode("enabled"))this.Fa.enabled=1==e.nodeValue;if(e=c.getAttributeNode("transitiontime"))this.Fa.mb=1*e.nodeValue;if(e=c.getAttributeNode("crossfade"))this.Fa.uj=1==e.nodeValue}if("flyintransition"==
c.nodeName){if(e=c.getAttributeNode("enabled"))this.qb.enabled=1==e.nodeValue&&this.ea;if(e=c.getAttributeNode("speed"))this.qb.speed=1*e.nodeValue}"userdata"==c.nodeName&&(this.userdata=this.af=this.Gg(c));if("hotspots"==c.nodeName)for(k=c.firstChild;k;){if("label"==k.nodeName&&this.$d){h=this.w.Yi;if(e=k.getAttributeNode("enabled"))h.enabled=1==e.nodeValue;if(e=k.getAttributeNode("width"))h.width=1*e.nodeValue;if(e=k.getAttributeNode("height"))h.height=1*e.nodeValue;if(e=k.getAttributeNode("textcolor"))h.Zi=
1*e.nodeValue;if(e=k.getAttributeNode("textalpha"))h.Xi=1*e.nodeValue;if(e=k.getAttributeNode("background"))h.background=1==e.nodeValue;if(e=k.getAttributeNode("backgroundalpha"))h.Pb=1*e.nodeValue;if(e=k.getAttributeNode("backgroundcolor"))h.Qb=1*e.nodeValue;if(e=k.getAttributeNode("border"))h.Kh=1*e.nodeValue;if(e=k.getAttributeNode("bordercolor"))h.Tb=1*e.nodeValue;if(e=k.getAttributeNode("borderalpha"))h.Sb=1*e.nodeValue;if(e=k.getAttributeNode("borderradius"))h.Jh=1*e.nodeValue;if(e=k.getAttributeNode("wordwrap"))h.Ch=
1==e.nodeValue}if("polystyle"==k.nodeName&&this.$d){if(e=k.getAttributeNode("mode"))this.w.mode=1*e.nodeValue;if(e=k.getAttributeNode("bordercolor"))this.w.Tb=1*e.nodeValue;if(e=k.getAttributeNode("backgroundcolor"))this.w.Qb=1*e.nodeValue;if(e=k.getAttributeNode("borderalpha"))this.w.Sb=1*e.nodeValue;if(e=k.getAttributeNode("backgroundalpha"))this.w.Pb=1*e.nodeValue;if(e=k.getAttributeNode("handcursor"))this.w.Ie=1==e.nodeValue}e=void 0;"hotspot"==k.nodeName&&(e=new m.Vg(this),e.type="point",e.Db(k),
this.P.push(e));"polyhotspot"==k.nodeName&&(e=new m.Vg(this),e.type="poly",e.Db(k),this.P.push(e));k=k.nextSibling}if("sounds"==c.nodeName||"media"==c.nodeName)for(k=c.firstChild;k;)"sound"!=k.nodeName||this.zk||(e=new m.Il(this),e.Db(k),this.vb||e.addElement()),"video"==k.nodeName&&(e=new m.Rk(this),e.Db(k),this.vb||e.addElement()),"image"==k.nodeName&&(e=new m.Gl(this),e.Db(k),this.vb||e.addElement()),"lensflare"==k.nodeName&&this.Ca&&(e=new m.Hl(this),e.Db(k),this.Ca.Kf.push(e)),k=k.nextSibling;
c=c.nextSibling}b&&""!=b&&(c=b.toString().split("/"),4<c.length&&this.Yc(Number(c[4])),0<c.length&&(e=String(c[0]),"N"==e.charAt(0)?this.Qi(Number(e.substr(1))):"S"==e.charAt(0)?this.Qi(-180+Number(e.substr(1))):this.lh(Number(e))),1<c.length&&this.mh(Number(c[1])),2<c.length&&this.Wf(Number(c[2])));if(f){for(k=0;6>k;k++)(e=f.getAttributeNode("tile"+k+"url"))&&(this.Bg[k]=String(e.nodeValue)),e=f.getAttributeNode("tile"+k+"url1");for(k=0;6>k;k++)(e=f.getAttributeNode("prev"+k+"url"))&&(this.De[k]=
String(e.nodeValue));if(e=f.getAttributeNode("tilesize"))this.jc=1*e.nodeValue;if(e=f.getAttributeNode("canvassize"))this.jf=Number(e.nodeValue);if(e=f.getAttributeNode("tilescale"))this.Xe=1*e.nodeValue;if(e=f.getAttributeNode("leveltileurl"))this.g.sk=e.nodeValue;if(e=f.getAttributeNode("leveltilesize"))this.g.G=Number(e.nodeValue);if(e=f.getAttributeNode("levelbias"))this.g.qk=Number(e.nodeValue);if(e=f.getAttributeNode("levelbiashidpi"))this.g.rk=Number(e.nodeValue);e=f.getAttributeNode("overlap");
this.Da.M=0;this.Da.pitch=0;e&&(this.g.Ka=Number(e.nodeValue));if(e=f.getAttributeNode("levelingroll"))this.Da.M=Number(e.nodeValue);if(e=f.getAttributeNode("levelingpitch"))this.Da.pitch=Number(e.nodeValue);this.jb=0;(e=f.getAttributeNode("flat"))&&1==e.nodeValue&&(this.jb=2);e=f.getAttributeNode("width");this.g.width=1*(e?e.nodeValue:1);e=f.getAttributeNode("height");this.g.height=1*(e?e.nodeValue:this.g.width);this.o.src=[];this.g.I=[];for(k=f.firstChild;k;){if("preview"==k.nodeName){if(e=k.getAttributeNode("color"))this.g.Qe=
e.nodeValue;if(e=k.getAttributeNode("strip"))this.g.Fk=1==e.nodeValue}if("video"==k.nodeName){if(e=k.getAttributeNode("format"))"3x2"==e.nodeValue&&(this.o.format=14),"equirectangular"==e.nodeValue&&(this.o.format=1);if(e=k.getAttributeNode("flipy"))this.o.ei=Number(e.nodeValue);if(e=k.getAttributeNode("startmuted"))this.o.cl=1==e.nodeValue;if(e=k.getAttributeNode("bleed"))this.o.ve=Number(e.nodeValue);if(e=k.getAttributeNode("endaction"))this.o.Zd=String(e.nodeValue);if(e=k.getAttributeNode("width"))this.o.width=
Number(e.nodeValue);if(e=k.getAttributeNode("height"))this.o.height=Number(e.nodeValue);for(f=k.firstChild;f;)"source"==f.nodeName&&(e=f.getAttributeNode("url"))&&this.o.src.push(e.nodeValue.toString()),f=f.nextSibling}if("level"==k.nodeName){f=new m.Ak;e=k.getAttributeNode("width");f.width=1*(e?e.nodeValue:1);e=k.getAttributeNode("height");f.height=1*(e?e.nodeValue:f.width);if(e=k.getAttributeNode("preload"))f.cache=1==e.nodeValue;if(e=k.getAttributeNode("preview"))f.Pe=1==e.nodeValue;f.L=Math.floor((f.width+
this.g.G-1)/this.g.G);f.da=Math.floor((f.height+this.g.G-1)/this.g.G);this.g.I.push(f)}k=k.nextSibling}this.g.ri=this.g.I.length}this.mg&&(this.ea=this.Ec=!1,this.Ub||(this.O("dummy rendering"),this.Ub=document.createElement("canvas"),this.Ub.width=100,this.Ub.height=100,this.Ub.id="dummycanvas",this.B.appendChild(this.Ub)),this.ad());this.ea&&this.H&&(this.ma.$j(this.Xe),this.ma.ak());this.Ec&&(0<this.g.I.length?this.sj(!0):this.sj(!1),this.Jf=0);var r=this;0<this.g.I.length&&this.g.Fk&&0==this.jb&&
(c=new Image,f=new m.Ak,f.Pe=!0,f.cache=!0,f.L=f.da=0,f.height=f.width=0,this.g.I.push(f),c.crossOrigin=this.crossOrigin,c.onload=this.ma.hn(c),c.setAttribute("src",this.oe(6,this.g.ri-1,0,0)));if(0<this.o.src.length&&this.ea)if(this.Ah){this.o.b=document.createElement("video");this.o.b.crossOrigin=this.crossOrigin;this.o.b.setAttribute("style","display:none; max-width:none;");this.o.b.setAttribute("playsinline","playsinline");this.Hd&&this.bi&&this.o.cl&&this.o.b.setAttribute("muted","muted");this.o.b.a=
!0;this.o.b.volume=this.V;this.U.appendChild(this.o.b);this.o.nd=!1;this.o.fl=!1;this.o.b.oncanplay=function(){if(!r.o.nd){r.o.Tg=!0;var a,b,c,d,e,f,g=[],h=new m.sa,k=r.H,l=r.o.b.videoWidth/3;r.o.width=r.o.b.videoWidth;r.o.height=r.o.b.videoHeight;for(a=0;6>a;a++)for(c=a%3*l+r.o.ve,e=c+l-2*r.o.ve,f=4,3>a&&(f+=l),d=f+l-2*r.o.ve,b=0;4>b;b++){h.x=-1;h.y=-1;h.z=1;for(var n=0;n<b;n++)h.Pk();g.push((0<h.x?c:e)/(3*l),(0<h.y?d:f)/(2*l))}k.bindBuffer(k.ARRAY_BUFFER,r.o.qh);k.bufferData(k.ARRAY_BUFFER,new Float32Array(g),
k.STATIC_DRAW)}};"exit"==this.o.Zd?this.o.b.onended=function(){r.o.Tg=!1;r.o.nd=!1;r.U.removeChild(r.o.b);r.o.b=null;r.update()}:"stop"==this.o.Zd?r.o.b.onended=function(){r.update()}:"{"==this.o.Zd.charAt(0)?this.o.b.onended=function(){r.he(r.o.Zd,"$fwd")}:this.o.b.loop=!0;for(k=0;k<this.o.src.length;k++)f=document.createElement("source"),f.setAttribute("src",this.Xb(this.o.src[k])),this.o.b.appendChild(f);f=this.Jb("_videopanorama");0<f.length?f[0].b=this.o.b:this.Ik("_videopanorama",this.o.b);
this.o.b.play()}else"{"==this.o.Zd.charAt(0)&&r.he(r.o.Zd,"$fwd");this.jj();this.C.zd||this.dl();this.update();this.$d&&(this.N&&this.N.ggViewerInit&&this.N.ggViewerInit(),this.qb.enabled&&0==this.jb&&this.ea&&(this.Yc(9),this.pan.c=this.mc.pan,this.j.c=this.mc.j,this.f.c=this.mc.f,this.Za=this.mc.Bb,this.D=this.tf(!1),this.pan.c=this.D.ja[0].value,this.j.c=this.D.ja[1].value,this.f.c=this.D.ja[2].value,3==this.D.ja[3].ub&&this.Yc(this.D.ja[3].value),this.zb=this.D.Ta,this.s.active=!1,this.s.Ig=!0));
this.$d=!1;this.Cf=!0;this.ad()};b.prototype.Di=function(a,b){0<a.length&&(".xml"==a.substr(a.length-4)||".swf"==a.substr(a.length-4)||"{"==a.charAt(0)?this.he(this.Xb(a),b):window.open(this.Xb(a),b))};b.prototype.no=function(){this.Cf=this.isLoaded=!1;this.checkLoaded=this.Hb=[];this.eh=0;this.N&&this.N.ggReLoaded&&this.N.ggReLoaded()};b.prototype.he=function(a,b){if(""!=a&&"{}"!=a){this.no();this.Qa&&this.Qa.hotspotProxyOut&&this.Qa.hotspotProxyOut(this.Aa.id);".swf"==a.substr(a.length-4)&&(a=a.substr(0,
a.length-4)+".xml");var c="";b&&(c=b.toString());c=c.replace("$cur",this.pan.c+"/"+this.j.c+"/"+this.f.c+"//"+this.za());c=c.replace("$fwd","N"+this.Lg()+"/"+this.j.c+"/"+this.f.c+"//"+this.za());c=c.replace("$bwd","S"+this.Lg()+"/"+this.j.c+"/"+this.f.c+"//"+this.za());c=c.replace("$ap",String(this.pan.c));c=c.replace("$an",String(this.Lg()));c=c.replace("$at",String(this.j.c));c=c.replace("$af",String(this.f.c));c=c.replace("$ar",String(this.za()));if(""!=c){var e=c.split("/");3<e.length&&""!=e[3]&&
(this.startNode=e[3])}this.qa();if("{"==a.charAt(0)){var e=a.substr(1,a.length-2),f=this.Dg[e];f&&(e=f);var f=this.C,g=this.H;if(this.pe[e]){this.xg=!0;if(this.C.enabled&&this.ea&&this.C.Nb){f.qe||f.zd||(f.yi=this.A.yb,f.hj=this.A.qd,f.oi=this.A.Lf,this.Yf(!0),this.Zf(!0),this.Xf(!0));var h;"wipeleftright"==f.type?h=1:"wiperightleft"==f.type?h=2:"wipetopbottom"==f.type?h=3:"wipebottomtop"==f.type?h=4:"wiperandom"==f.type&&(h=Math.ceil(4*Math.random()));f.Vh=h;g.bindFramebuffer(g.FRAMEBUFFER,f.Nb);
g.viewport(0,0,f.Nb.width,f.Nb.height);g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT);f.ig=!0;this.lg();f.ig=!1;g.bindFramebuffer(g.FRAMEBUFFER,null);g.viewport(0,0,this.ib.width,this.ib.height);h=new Date;this.Aa!=this.pb?(f.rg=this.Aa.hc/this.m.width,f.sg=1-this.Aa.Cb/this.m.height):(f.rg=.5,f.sg=.5);1!=f.Na&&2!=f.Na?(f.Ui=h.getTime(),f.qe=!0):(f.yl=h.getTime(),f.zd=!0,f.nb=Math.sin(this.Kb()/2*Math.PI/180)/Math.sin(f.cf/2*Math.PI/180),f.nb=Math.max(f.nb,1),f.xl=1/f.Qd*f.nb*.3)}this.Ii(this.pe[e],
c);this.Mh(a);f.enabled&&this.ea&&0!=f.Ob&&(f.me=this.gi(),f.ne=this.ii(),f.xd=this.Kb(),f.Zc=this.za(),1==f.Ob||3==f.Ob?this.bg(f.cf):2==f.Ob?this.bg(this.uf()+(this.uf()-f.cf)):4==f.Ob&&(this.Yc(this.mc.Bb),this.lh(this.mc.pan),this.mh(this.mc.j),this.bg(this.mc.f)),f.df||1==f.Na||2==f.Na||(4==f.Ob?(this.D=this.tf(!0,f.me,f.ne,f.xd),this.zb=this.D.Ta,this.s.active=!0,this.qb.ud=!0):this.moveTo(f.me,f.ne,f.xd,f.Qd,0,f.Zc)));this.ha&&this.ha.openNext(a,c);this.C.zd||this.C.qe||(this.ga&&this.Rh(),
this.xg=!1)}else{this.Wc("invalid node id: "+e);return}}else this.Gk(a,null,c);this.update(5)}};b.prototype.Am=function(){return this.Gf?this.La.slice(0):[""]};b.prototype.Gg=function(a){var b,c;c=[];c.title="";c.description="";c.author="";c.datetime="";c.copyright="";c.source="";c.information="";c.comment="";c.latitude=0;c.longitude=0;c.customnodeid="";c.tags=[];if(a&&((b=a.getAttributeNode("title"))&&(c.title=b.nodeValue.toString()),(b=a.getAttributeNode("description"))&&(c.description=b.nodeValue.toString()),
(b=a.getAttributeNode("author"))&&(c.author=b.nodeValue.toString()),(b=a.getAttributeNode("datetime"))&&(c.datetime=b.nodeValue.toString()),(b=a.getAttributeNode("copyright"))&&(c.copyright=b.nodeValue.toString()),(b=a.getAttributeNode("source"))&&(c.source=b.nodeValue.toString()),(b=a.getAttributeNode("info"))&&(c.information=b.nodeValue.toString()),(b=a.getAttributeNode("comment"))&&(c.comment=b.nodeValue.toString()),(b=a.getAttributeNode("latitude"))&&(c.latitude=Number(b.nodeValue)),(b=a.getAttributeNode("longitude"))&&
(c.longitude=Number(b.nodeValue)),(b=a.getAttributeNode("customnodeid"))&&(c.customnodeid=b.nodeValue.toString()),b=a.getAttributeNode("tags"))){a=b.nodeValue.toString().split("|");for(b=0;b<a.length;b++)""==a[b]&&(a.splice(b,1),b--);c.tags=a}return c};b.prototype.fi=function(a){return a?this.ej[a]?this.ej[a]:this.Gg():this.af};b.prototype.Bm=function(a){a=this.fi(a);var b=[];""!=a.latitude&&0!=a.latitude&&0!=a.longitude&&(b.push(a.latitude),b.push(a.longitude));return b};b.prototype.Cm=function(a){return this.fi(a).title};
b.prototype.He=function(a,b){var c;for(c=0;c<this.D.ja.length;c++)if(this.D.ja[c].time==a&&this.D.ja[c].ub==b)return this.D.ja[c];return!1};b.prototype.zm=function(a){var b,c=1E5,e=a,f=!1;for(b=0;b<this.D.ja.length;b++)this.D.ja[b].ub==a.ub&&this.D.ja[b].time>a.time&&this.D.ja[b].time<c&&(e=this.D.ja[b],c=e.time,f=!0);return f?e:!1};b.prototype.tf=function(a,b,c,e){for(var f=0;f<this.Ia.length;f++)if(this.Ia[f].Ta&&0==this.Ia[f].Ta.indexOf("__FlyIn"))return this.Ia[f];f=new m.ik;f.Ta="__FlyIn";f.dg=
this.pan.c;f.fg=this.j.c;f.wd=this.f.c;f.eg=this.Za;f.Zc=this.dh;a?(f.Ee=!1,f.Xd=!1,f.speed=this.C.Qd,f.Od=b,f.Pd=c,f.We=e):(f.Ee=!0,f.Xd=!0,f.speed=this.qb.speed,f.Od=this.pan.Pa,f.Pd=this.j.Pa,f.We=this.f.Pa);return this.Ij(f)};b.prototype.Ij=function(a){var b=new m.tk;b.Ta=a.Ta;b.ja=[];var c=a.eg!=a.Zc&&-1!=a.Zc,e=a.Od-a.dg;if(360==this.pan.max-this.pan.min){for(;-360>e;)e+=360;for(;360<e;)e-=360}var f=a.Pd-a.fg,g=a.We-a.wd,h=Math.round(Math.sqrt(e*e+f*f+g*g)/a.speed*.33);c&&(h=Math.max(10,h));
b.length=h;var w,B;a.Yd&&(w=Math.ceil(.7*h),w=Math.min(15,w),w=Math.max(5,w),b.length=h+w,B=.33*w);var n=a.We,r=h,p=0,u=h-1;if(c){var t=a.wd,v;4==a.Zc?v=120:v=this.vf(a.Zc);var n=a.We,g=n-a.wd,q=new m.lc(0,a.wd),x=new m.lc(h,n),A=new m.lc,z=new m.lc;z.Ya(h/3,a.wd+g/3);A.Ya(2*h/3,n-g/3);if(t>v)for(;p<=h&&t>v;)t=new m.lc,t.Ih(q,x,z,A,p),t=t.y,p++;else p=1;p>=.8*h&&(r=p=Math.round(.8*h));0==p&&(p=1);var y;4==a.eg?y=120:y=this.vf(a.eg);v=a.We;if(v>y)for(;u>p&&v>y;)t=new m.lc,t.Ih(q,x,z,A,u),v=t.y,u--}q=
new m.yc;q.time=0;q.ub=0;q.value=a.dg;q.type=1;q.Ud=h/3;q.Vd=a.Ee?a.dg:a.dg+e/3;b.ja.push(q);q=new m.yc;q.time=0;q.ub=1;q.value=a.fg;q.type=1;q.Ud=h/3;q.Vd=a.Ee?a.fg:a.fg+f/3;b.ja.push(q);q=new m.yc;q.time=0;q.ub=2;q.value=a.wd;q.type=1;q.Ud=h/3;q.Vd=a.Ee?a.wd:a.wd+g/3;b.ja.push(q);q=new m.yc;q.time=0;q.ub=3;q.value=a.eg;q.type=0;q.mb=0;b.ja.push(q);c&&(q=new m.yc,q.time=p,q.ub=3,q.value=a.Zc,q.type=0,q.mb=u-p,b.ja.push(q));q=new m.yc;q.time=h;q.ub=0;q.value=a.Od;q.type=1;q.Td=2*h/3;a.Xd&&!a.Yd?q.Hc=
a.Od:q.Hc=a.Od-e/3;a.Yd&&(q.Ud=h+B,q.Vd=q.value+B/h*e);b.ja.push(q);q=new m.yc;q.time=h;q.ub=1;q.value=a.Pd;q.type=1;q.Td=2*h/3;a.Xd&&!a.Yd?q.Hc=a.Pd:q.Hc=a.Pd-f/3;a.Yd&&(q.Ud=h+B,q.Vd=q.value+B/h*f);b.ja.push(q);q=new m.yc;q.time=r;q.ub=2;q.value=n;q.type=1;q.Td=2*r/3;a.Xd?q.Hc=n:q.Hc=n-g/3;b.ja.push(q);a.Yd&&(q=new m.yc,q.time=h+w,q.ub=0,q.value=a.Od,q.type=1,q.Td=h+w-B,q.Hc=a.Od,b.ja.push(q),q=new m.yc,q.time=h+w,q.ub=1,q.value=a.Pd,q.type=1,q.Td=h+w-B,q.Hc=a.Pd,b.ja.push(q));this.Ia.push(b);return b};
b.prototype.Lo=function(){this.o.b&&this.o.b.play()};b.prototype.Mo=function(){this.o.b&&(this.o.b.pause(),this.o.b.currentTime=0)};b.prototype.Ko=function(){this.o.b&&this.o.b.pause()};b.prototype.ao=function(a){this.o.b&&(0>a&&(a=0),a>this.o.b.duration&&(a=this.o.b.duration-.1),this.o.b.currentTime=a,this.update())};b.prototype.Om=function(){return this.o.b?this.o.b.currentTime:0};b.prototype.Nm=function(){if(this.o.b)return this.o.b};b.prototype.$n=function(a){if(this.o.b){var b=!this.o.b.paused&&
!this.o.b.ended,c=this.o.b.currentTime;this.o.b.pause();isNaN(parseInt(a,10))?this.o.b.src=String(a):this.o.b.src=this.o.src[parseInt(a,10)];b&&(this.o.b.onloadedmetadata=function(){this.currentTime=c;this.play();this.onloadedmetadata=null});this.o.b.currentTime=c}};b.prototype.gm=function(){this.zk=!0};return b}();m.a=h})(ggP2VR||(ggP2VR={}));window.ggHasHtml5Css3D=G;window.ggHasWebGL=N;window.pano2vrPlayer=ggP2VR.a;ggP2VR.a.prototype.readConfigString=ggP2VR.a.prototype.Ji;
ggP2VR.a.prototype.readConfigUrl=ggP2VR.a.prototype.Gk;ggP2VR.a.prototype.readConfigUrlAsync=ggP2VR.a.prototype.An;ggP2VR.a.prototype.readConfigXml=ggP2VR.a.prototype.Hk;ggP2VR.a.prototype.openUrl=ggP2VR.a.prototype.Di;ggP2VR.a.prototype.openNext=ggP2VR.a.prototype.he;ggP2VR.a.prototype.setMargins=ggP2VR.a.prototype.On;ggP2VR.a.prototype.addListener=ggP2VR.a.prototype.addListener;ggP2VR.a.prototype.removeEventListener=ggP2VR.a.prototype.removeEventListener;ggP2VR.a.prototype.detectBrowser=ggP2VR.a.prototype.yj;
ggP2VR.a.prototype.initWebGL=ggP2VR.a.prototype.Bc;ggP2VR.a.prototype.getPercentLoaded=ggP2VR.a.prototype.Fm;ggP2VR.a.prototype.setBasePath=ggP2VR.a.prototype.Hn;ggP2VR.a.prototype.getBasePath=ggP2VR.a.prototype.nm;ggP2VR.a.prototype.setViewerSize=ggP2VR.a.prototype.Vk;ggP2VR.a.prototype.getViewerSize=ggP2VR.a.prototype.Rm;ggP2VR.a.prototype.setSkinObject=ggP2VR.a.prototype.Yn;ggP2VR.a.prototype.changeViewMode=ggP2VR.a.prototype.Yl;ggP2VR.a.prototype.getViewMode=ggP2VR.a.prototype.Pm;
ggP2VR.a.prototype.changePolygonMode=ggP2VR.a.prototype.qj;ggP2VR.a.prototype.setPolygonMode=ggP2VR.a.prototype.qj;ggP2VR.a.prototype.getPolygonMode=ggP2VR.a.prototype.Hm;ggP2VR.a.prototype.showOnePolyHotspot=ggP2VR.a.prototype.Xk;ggP2VR.a.prototype.hideOnePolyHotspot=ggP2VR.a.prototype.Wj;ggP2VR.a.prototype.changePolyHotspotColor=ggP2VR.a.prototype.Wl;ggP2VR.a.prototype.toggleOnePolyHotspot=ggP2VR.a.prototype.uo;ggP2VR.a.prototype.changeViewState=ggP2VR.a.prototype.Zl;
ggP2VR.a.prototype.getViewState=ggP2VR.a.prototype.Qm;ggP2VR.a.prototype.setRenderFlags=ggP2VR.a.prototype.Qn;ggP2VR.a.prototype.getRenderFlags=ggP2VR.a.prototype.Km;ggP2VR.a.prototype.setMaxTileCount=ggP2VR.a.prototype.Tk;ggP2VR.a.prototype.getVFov=ggP2VR.a.prototype.Kb;ggP2VR.a.prototype.setVFov=ggP2VR.a.prototype.bg;ggP2VR.a.prototype.getHFov=ggP2VR.a.prototype.qm;ggP2VR.a.prototype.updatePanorama=ggP2VR.a.prototype.lg;ggP2VR.a.prototype.isTouching=ggP2VR.a.prototype.Xm;
ggP2VR.a.prototype.getIsMobile=ggP2VR.a.prototype.um;ggP2VR.a.prototype.setIsMobile=ggP2VR.a.prototype.Mn;ggP2VR.a.prototype.getIsAutorotating=ggP2VR.a.prototype.sm;ggP2VR.a.prototype.getIsLoaded=ggP2VR.a.prototype.Kg;ggP2VR.a.prototype.getIsTileLoading=ggP2VR.a.prototype.vm;ggP2VR.a.prototype.getLastActivity=ggP2VR.a.prototype.wm;ggP2VR.a.prototype.getPan=ggP2VR.a.prototype.gi;ggP2VR.a.prototype.getPanNorth=ggP2VR.a.prototype.Lg;ggP2VR.a.prototype.getPanDest=ggP2VR.a.prototype.Dm;
ggP2VR.a.prototype.getPanN=ggP2VR.a.prototype.Em;ggP2VR.a.prototype.setPan=ggP2VR.a.prototype.lh;ggP2VR.a.prototype.setPanNorth=ggP2VR.a.prototype.Qi;ggP2VR.a.prototype.changePan=ggP2VR.a.prototype.vg;ggP2VR.a.prototype.changePanLog=ggP2VR.a.prototype.Vl;ggP2VR.a.prototype.getTilt=ggP2VR.a.prototype.ii;ggP2VR.a.prototype.getTiltDest=ggP2VR.a.prototype.Mm;ggP2VR.a.prototype.setTilt=ggP2VR.a.prototype.mh;ggP2VR.a.prototype.changeTilt=ggP2VR.a.prototype.wg;ggP2VR.a.prototype.changeTiltLog=ggP2VR.a.prototype.Xl;
ggP2VR.a.prototype.getFov=ggP2VR.a.prototype.uf;ggP2VR.a.prototype.getFovDest=ggP2VR.a.prototype.pm;ggP2VR.a.prototype.setFov=ggP2VR.a.prototype.Wf;ggP2VR.a.prototype.changeFov=ggP2VR.a.prototype.pj;ggP2VR.a.prototype.changeFovLog=ggP2VR.a.prototype.kf;ggP2VR.a.prototype.getRoll=ggP2VR.a.prototype.Lm;ggP2VR.a.prototype.setRoll=ggP2VR.a.prototype.Rn;ggP2VR.a.prototype.setPanTilt=ggP2VR.a.prototype.Pn;ggP2VR.a.prototype.setPanTiltFov=ggP2VR.a.prototype.$f;ggP2VR.a.prototype.setDefaultView=ggP2VR.a.prototype.Jn;
ggP2VR.a.prototype.setLocked=ggP2VR.a.prototype.Nn;ggP2VR.a.prototype.setLockedMouse=ggP2VR.a.prototype.Yf;ggP2VR.a.prototype.setLockedKeyboard=ggP2VR.a.prototype.Xf;ggP2VR.a.prototype.setLockedWheel=ggP2VR.a.prototype.Zf;ggP2VR.a.prototype.moveTo=ggP2VR.a.prototype.moveTo;ggP2VR.a.prototype.moveToEx=ggP2VR.a.prototype.Zg;ggP2VR.a.prototype.moveToDefaultView=ggP2VR.a.prototype.dn;ggP2VR.a.prototype.moveToDefaultViewEx=ggP2VR.a.prototype.en;ggP2VR.a.prototype.addHotspotElements=ggP2VR.a.prototype.jj;
ggP2VR.a.prototype.playSound=ggP2VR.a.prototype.je;ggP2VR.a.prototype.playPauseSound=ggP2VR.a.prototype.Ek;ggP2VR.a.prototype.playStopSound=ggP2VR.a.prototype.yn;ggP2VR.a.prototype.pauseSound=ggP2VR.a.prototype.Fi;ggP2VR.a.prototype.activateSound=ggP2VR.a.prototype.Kl;ggP2VR.a.prototype.soundGetTime=ggP2VR.a.prototype.io;ggP2VR.a.prototype.soundSetTime=ggP2VR.a.prototype.jo;ggP2VR.a.prototype.isPlaying=ggP2VR.a.prototype.Vc;ggP2VR.a.prototype.stopSound=ggP2VR.a.prototype.el;
ggP2VR.a.prototype.setVolume=ggP2VR.a.prototype.bo;ggP2VR.a.prototype.changeVolume=ggP2VR.a.prototype.$l;ggP2VR.a.prototype.removeHotspots=ggP2VR.a.prototype.Mk;ggP2VR.a.prototype.addHotspot=ggP2VR.a.prototype.Ll;ggP2VR.a.prototype.updateHotspot=ggP2VR.a.prototype.Co;ggP2VR.a.prototype.removeHotspot=ggP2VR.a.prototype.Bn;ggP2VR.a.prototype.setActiveHotspot=ggP2VR.a.prototype.Ue;ggP2VR.a.prototype.getPointHotspotIds=ggP2VR.a.prototype.Gm;ggP2VR.a.prototype.getHotspot=ggP2VR.a.prototype.rm;
ggP2VR.a.prototype.setFullscreen=ggP2VR.a.prototype.Ve;ggP2VR.a.prototype.toggleFullscreen=ggP2VR.a.prototype.uh;ggP2VR.a.prototype.enterFullscreen=ggP2VR.a.prototype.hm;ggP2VR.a.prototype.exitFullscreen=ggP2VR.a.prototype.exitFullscreen;ggP2VR.a.prototype.getIsFullscreen=ggP2VR.a.prototype.tm;ggP2VR.a.prototype.startAutorotate=ggP2VR.a.prototype.al;ggP2VR.a.prototype.stopAutorotate=ggP2VR.a.prototype.po;ggP2VR.a.prototype.toggleAutorotate=ggP2VR.a.prototype.to;ggP2VR.a.prototype.startAnimation=ggP2VR.a.prototype.mo;
ggP2VR.a.prototype.createLayers=ggP2VR.a.prototype.tj;ggP2VR.a.prototype.removePanorama=ggP2VR.a.prototype.ih;ggP2VR.a.prototype.getScreenResolution=ggP2VR.a.prototype.Qj;ggP2VR.a.prototype.getMaxScreenResolution=ggP2VR.a.prototype.Mj;ggP2VR.a.prototype.getNodeIds=ggP2VR.a.prototype.Am;ggP2VR.a.prototype.getNodeUserdata=ggP2VR.a.prototype.fi;ggP2VR.a.prototype.getNodeLatLng=ggP2VR.a.prototype.Bm;ggP2VR.a.prototype.getNodeTitle=ggP2VR.a.prototype.Cm;ggP2VR.a.prototype.getCurrentNode=ggP2VR.a.prototype.Lj;
ggP2VR.a.prototype.getNextNode=ggP2VR.a.prototype.Nj;ggP2VR.a.prototype.getPrevNode=ggP2VR.a.prototype.Jm;ggP2VR.a.prototype.getLastVisitedNode=ggP2VR.a.prototype.xm;ggP2VR.a.prototype.getCurrentPointHotspots=ggP2VR.a.prototype.om;ggP2VR.a.prototype.getPositionAngles=ggP2VR.a.prototype.Im;ggP2VR.a.prototype.getPositionRawAngles=ggP2VR.a.prototype.Oj;ggP2VR.a.prototype.nodeVisited=ggP2VR.a.prototype.jn;ggP2VR.a.prototype.setElementIdPrefix=ggP2VR.a.prototype.Kn;ggP2VR.a.prototype.videoPanoPlay=ggP2VR.a.prototype.Lo;
ggP2VR.a.prototype.videoPanoStop=ggP2VR.a.prototype.Mo;ggP2VR.a.prototype.videoPanoPause=ggP2VR.a.prototype.Ko;ggP2VR.a.prototype.getVideoPanoTime=ggP2VR.a.prototype.Om;ggP2VR.a.prototype.setVideoPanoTime=ggP2VR.a.prototype.ao;ggP2VR.a.prototype.getVideoPanoObject=ggP2VR.a.prototype.Nm;ggP2VR.a.prototype.setVideoPanoSource=ggP2VR.a.prototype.$n;ggP2VR.a.prototype.getMediaObject=ggP2VR.a.prototype.ym;ggP2VR.a.prototype.registerVideoElement=ggP2VR.a.prototype.Ik;
ggP2VR.a.prototype.disableSoundLoading=ggP2VR.a.prototype.gm;ggP2VR.a.prototype.setCrossOrigin=ggP2VR.a.prototype.In;ggP2VR.a.prototype.setProjection=ggP2VR.a.prototype.Yc;ggP2VR.a.prototype.getProjection=ggP2VR.a.prototype.za;ggP2VR.a.prototype.changeProjection=ggP2VR.a.prototype.Nh;ggP2VR.a.prototype.changeProjectionEx=ggP2VR.a.prototype.Nh;ggP2VR.a.prototype.changeLensflares=ggP2VR.a.prototype.Ul;ggP2VR.a.prototype.setTransition=ggP2VR.a.prototype.Zn;
